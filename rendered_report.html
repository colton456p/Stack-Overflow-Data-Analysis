<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pre-LLM Code Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { text-align: center; }
        .month-section { margin-bottom: 20px; }
        .question { margin-bottom: 10px; }
        .answer { margin-bottom: 15px; }
        .tags { font-style: italic; }
    </style>
</head>
<body>
    <h1>Pre-LLM Code Report</h1>
    
    <div class="month-section">
        <h2>Month: Dec-18</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><h2>Problem</h2>

<p>I am writing an application in React and was unable to avoid a super common pitfall, which is calling <code>setState(...)</code> after <code>componentWillUnmount(...)</code>.</p>

<p>I looked very carefully at my code and tried to put some guarding clauses in place, but the problem persisted and I am still observing the warning.</p>

<p>Therefore, I've got two questions:</p>

<ol>
<li><strong>How do I figure out from the stack trace</strong>, which particular component and event handler or lifecycle hook is responsible for the rule violation?</li>
<li>Well, how to fix the problem itself, because my code was written with this pitfall in mind and is already trying to prevent it, but some underlying component's still generating the warning.</li>
</ol>

<h2>Browser console</h2>

<pre><code>Warning: Can't perform a React state update on an unmounted component.
This is a no-op, but it indicates a memory leak in your application.
To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount
method.
    in TextLayerInternal (created by Context.Consumer)
    in TextLayer (created by PageInternal) index.js:1446
d/console[e]
index.js:1446
warningWithoutStack
react-dom.development.js:520
warnAboutUpdateOnUnmounted
react-dom.development.js:18238
scheduleWork
react-dom.development.js:19684
enqueueSetState
react-dom.development.js:12936
./node_modules/react/cjs/react.development.js/Component.prototype.setState
react.development.js:356
_callee$
TextLayer.js:97
tryCatch
runtime.js:63
invoke
runtime.js:282
defineIteratorMethods/&lt;/prototype[method]
runtime.js:116
asyncGeneratorStep
asyncToGenerator.js:3
_throw
asyncToGenerator.js:29
</code></pre>

<p><a href="https://i.sstatic.net/ATfMj.png" rel="noreferrer"><img src="https://i.sstatic.net/ATfMj.png" alt="enter image description here"></a></p>

<h2>Code</h2>

<p><strong>Book.tsx</strong></p>

<pre><code>import { throttle } from 'lodash';
import * as React from 'react';
import { AutoWidthPdf } from '../shared/AutoWidthPdf';
import BookCommandPanel from '../shared/BookCommandPanel';
import BookTextPath from '../static/pdf/sde.pdf';
import './Book.css';

const DEFAULT_WIDTH = 140;

class Book extends React.Component {
  setDivSizeThrottleable: () =&gt; void;
  pdfWrapper: HTMLDivElement | null = null;
  isComponentMounted: boolean = false;
  state = {
    hidden: true,
    pdfWidth: DEFAULT_WIDTH,
  };

  constructor(props: any) {
    super(props);
    this.setDivSizeThrottleable = throttle(
      () =&gt; {
        if (this.isComponentMounted) {
          this.setState({
            pdfWidth: this.pdfWrapper!.getBoundingClientRect().width - 5,
          });
        }
      },
      500,
    );
  }

  componentDidMount = () =&gt; {
    this.isComponentMounted = true;
    this.setDivSizeThrottleable();
    window.addEventListener("resize", this.setDivSizeThrottleable);
  };

  componentWillUnmount = () =&gt; {
    this.isComponentMounted = false;
    window.removeEventListener("resize", this.setDivSizeThrottleable);
  };

  render = () =&gt; (
    &lt;div className="Book"&gt;
      { this.state.hidden &amp;&amp; &lt;div className="Book__LoadNotification centered"&gt;Book is being loaded...&lt;/div&gt; }

      &lt;div className={this.getPdfContentContainerClassName()}&gt;
        &lt;BookCommandPanel
          bookTextPath={BookTextPath}
          /&gt;

        &lt;div className="Book__PdfContent" ref={ref =&gt; this.pdfWrapper = ref}&gt;
          &lt;AutoWidthPdf
            file={BookTextPath}
            width={this.state.pdfWidth}
            onLoadSuccess={(_: any) =&gt; this.onDocumentComplete()}
            /&gt;
        &lt;/div&gt;

        &lt;BookCommandPanel
          bookTextPath={BookTextPath}
          /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );

  getPdfContentContainerClassName = () =&gt; this.state.hidden ? 'hidden' : '';

  onDocumentComplete = () =&gt; {
    try {
      this.setState({ hidden: false });
      this.setDivSizeThrottleable();
    } catch (caughtError) {
      console.warn({ caughtError });
    }
  };
}

export default Book;
</code></pre>

<p><strong>AutoWidthPdf.tsx</strong></p>

<pre><code>import * as React from 'react';
import { Document, Page, pdfjs } from 'react-pdf';

pdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;

interface IProps {
  file: string;
  width: number;
  onLoadSuccess: (pdf: any) =&gt; void;
}
export class AutoWidthPdf extends React.Component&lt;IProps&gt; {
  render = () =&gt; (
    &lt;Document
      file={this.props.file}
      onLoadSuccess={(_: any) =&gt; this.props.onLoadSuccess(_)}
      &gt;
      &lt;Page
        pageNumber={1}
        width={this.props.width}
        /&gt;
    &lt;/Document&gt;
  );
}
</code></pre>

<hr>

<h1>Update 1: Cancel throttleable function (still no luck)</h1>

<pre><code>const DEFAULT_WIDTH = 140;

class Book extends React.Component {
  setDivSizeThrottleable: ((() =&gt; void) &amp; Cancelable) | undefined;
  pdfWrapper: HTMLDivElement | null = null;
  state = {
    hidden: true,
    pdfWidth: DEFAULT_WIDTH,
  };

  componentDidMount = () =&gt; {
    this.setDivSizeThrottleable = throttle(
      () =&gt; {
        this.setState({
          pdfWidth: this.pdfWrapper!.getBoundingClientRect().width - 5,
        });
      },
      500,
    );

    this.setDivSizeThrottleable();
    window.addEventListener("resize", this.setDivSizeThrottleable);
  };

  componentWillUnmount = () =&gt; {
    window.removeEventListener("resize", this.setDivSizeThrottleable!);
    this.setDivSizeThrottleable!.cancel();
    this.setDivSizeThrottleable = undefined;
  };

  render = () =&gt; (
    &lt;div className="Book"&gt;
      { this.state.hidden &amp;&amp; &lt;div className="Book__LoadNotification centered"&gt;Book is being loaded...&lt;/div&gt; }

      &lt;div className={this.getPdfContentContainerClassName()}&gt;
        &lt;BookCommandPanel
          BookTextPath={BookTextPath}
          /&gt;

        &lt;div className="Book__PdfContent" ref={ref =&gt; this.pdfWrapper = ref}&gt;
          &lt;AutoWidthPdf
            file={BookTextPath}
            width={this.state.pdfWidth}
            onLoadSuccess={(_: any) =&gt; this.onDocumentComplete()}
            /&gt;
        &lt;/div&gt;

        &lt;BookCommandPanel
          BookTextPath={BookTextPath}
          /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );

  getPdfContentContainerClassName = () =&gt; this.state.hidden ? 'hidden' : '';

  onDocumentComplete = () =&gt; {
    try {
      this.setState({ hidden: false });
      this.setDivSizeThrottleable!();
    } catch (caughtError) {
      console.warn({ caughtError });
    }
  };
}

export default Book;
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 470<br>
            <strong>Answer:</strong>
            <p><p>Here is a <strong>React Hooks</strong> specific solution for</p>
<h3>Error</h3>
<blockquote>
<p>Warning: Can't perform a React state update on an unmounted component.</p>
</blockquote>
<h3>Solution</h3>
<p>You can declare <code>let isMounted = true</code> inside <code>useEffect</code>, which will be changed in the <a href="https://reactjs.org/docs/hooks-effect.html#effects-with-cleanup" rel="noreferrer">cleanup callback</a>, as soon as the component is unmounted. Before state updates, you now check this variable conditionally:</p>
<pre><code>useEffect(() =&gt; {
  let isMounted = true;               // note mutable flag
  someAsyncOperation().then(data =&gt; {
    if (isMounted) setState(data);    // add conditional check
  })
  return () =&gt; { isMounted = false }; // cleanup toggles value, if unmounted
}, []);                               // adjust dependencies to your needs
</code></pre>
<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="true">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const Parent = () =&gt; {
  const [mounted, setMounted] = useState(true);
  return (
    &lt;div&gt;
      Parent:
      &lt;button onClick={() =&gt; setMounted(!mounted)}&gt;
        {mounted ? "Unmount" : "Mount"} Child
      &lt;/button&gt;
      {mounted &amp;&amp; &lt;Child /&gt;}
      &lt;p&gt;
        Unmount Child, while it is still loading. It won't set state later on,
        so no error is triggered.
      &lt;/p&gt;
    &lt;/div&gt;
  );
};

const Child = () =&gt; {
  const [state, setState] = useState("loading (4 sec)...");
  useEffect(() =&gt; {
    let isMounted = true;
    fetchData();
    return () =&gt; {
      isMounted = false;
    };

    // simulate some Web API fetching
    function fetchData() {
      setTimeout(() =&gt; {
        // drop "if (isMounted)" to trigger error again 
        // (take IDE, doesn't work with stack snippet)
        if (isMounted) setState("data fetched")
        else console.log("aborted setState on unmounted component")
      }, 4000);
    }
  }, []);

  return &lt;div&gt;Child: {state}&lt;/div&gt;;
};

ReactDOM.render(&lt;Parent /&gt;, document.getElementById("root"));</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/react/16.13.0/umd/react.production.min.js" integrity="sha256-32Gmw5rBDXyMjg/73FgpukoTZdMrxuYW7tj8adbN8z4=" crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.13.0/umd/react-dom.production.min.js" integrity="sha256-bjQ42ac3EN0GqK40pC9gGi/YixvKyZ24qMP/9HiGW7w=" crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;div id="root"&gt;&lt;/div&gt;
&lt;script&gt;var { useReducer, useEffect, useState, useRef } = React&lt;/script&gt;</code></pre>
</div>
</div>
</p>
<h3>Extension: Custom <code>useAsync</code> Hook</h3>
<p>We can encapsulate all the boilerplate into a custom Hook, that automatically aborts async functions in case the component unmounts or dependency values have changed before:</p>
<pre><code>function useAsync(asyncFn, onSuccess) {
  useEffect(() =&gt; {
    let isActive = true;
    asyncFn().then(data =&gt; {
      if (isActive) onSuccess(data);
    });
    return () =&gt; { isActive = false };
  }, [asyncFn, onSuccess]);
}
</code></pre>
<p><div class="snippet" data-lang="js" data-hide="true" data-console="true" data-babel="true">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>// custom Hook for automatic abortion on unmount or dependency change
// You might add onFailure for promise errors as well.
function useAsync(asyncFn, onSuccess) {
  useEffect(() =&gt; {
    let isActive = true;
    asyncFn().then(data =&gt; {
      if (isActive) onSuccess(data)
      else console.log("aborted setState on unmounted component")
    });
    return () =&gt; {
      isActive = false;
    };
  }, [asyncFn, onSuccess]);
}

const Child = () =&gt; {
  const [state, setState] = useState("loading (4 sec)...");
  useAsync(simulateFetchData, setState);
  return &lt;div&gt;Child: {state}&lt;/div&gt;;
};

const Parent = () =&gt; {
  const [mounted, setMounted] = useState(true);
  return (
    &lt;div&gt;
      Parent:
      &lt;button onClick={() =&gt; setMounted(!mounted)}&gt;
        {mounted ? "Unmount" : "Mount"} Child
      &lt;/button&gt;
      {mounted &amp;&amp; &lt;Child /&gt;}
      &lt;p&gt;
        Unmount Child, while it is still loading. It won't set state later on,
        so no error is triggered.
      &lt;/p&gt;
    &lt;/div&gt;
  );
};

const simulateFetchData = () =&gt; new Promise(
  resolve =&gt; setTimeout(() =&gt; resolve("data fetched"), 4000));

ReactDOM.render(&lt;Parent /&gt;, document.getElementById("root"));</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/react/16.13.0/umd/react.production.min.js" integrity="sha256-32Gmw5rBDXyMjg/73FgpukoTZdMrxuYW7tj8adbN8z4=" crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.13.0/umd/react-dom.production.min.js" integrity="sha256-bjQ42ac3EN0GqK40pC9gGi/YixvKyZ24qMP/9HiGW7w=" crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;div id="root"&gt;&lt;/div&gt;
&lt;script&gt;var { useReducer, useEffect, useState, useRef } = React&lt;/script&gt;</code></pre>
</div>
</div>
</p>
<p>More on effect cleanups: <a href="https://overreacted.io/a-complete-guide-to-useeffect/#so-what-about-cleanup" rel="noreferrer">Overreacted: A Complete Guide to useEffect</a></p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, setstate, typescript, lodash, reactjs
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p><strong>What are the most common pandas ways to select/filter rows of a <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/advanced.html#" rel="noreferrer">dataframe whose index is a MultiIndex</a>?</strong></p>

<ul>
<li>Slicing based on a single value/label</li>
<li>Slicing based on multiple labels from one or more levels</li>
<li>Filtering on boolean conditions and expressions</li>
<li>Which methods are applicable in what circumstances</li>
</ul>

<p>Assumptions for simplicity:</p>

<ol>
<li>input dataframe does not have duplicate index keys</li>
<li>input dataframe below only has two levels. (Most solutions shown here generalize to N levels)</li>
</ol>

<hr>

<h3>Example input:</h3>

<blockquote>
<pre><code>mux = pd.MultiIndex.from_arrays([
    list('aaaabbbbbccddddd'),
    list('tuvwtuvwtuvwtuvw')
], names=['one', 'two'])

df = pd.DataFrame({'col': np.arange(len(mux))}, mux)

         col
one two     
a   t      0
    u      1
    v      2
    w      3
b   t      4
    u      5
    v      6
    w      7
    t      8
c   u      9
    v     10
d   w     11
    t     12
    u     13
    v     14
    w     15
</code></pre>
</blockquote>

<h2>Question 1: Selecting a Single Item</h2>

<p>How do I select rows having "a" in level "one"? </p>

<pre><code>         col
one two     
a   t      0
    u      1
    v      2
    w      3
</code></pre>

<p>Additionally, how would I be able to drop level "one" in the output?</p>

<pre><code>     col
two     
t      0
u      1
v      2
w      3
</code></pre>

<p><strong>Question 1b</strong><br>
How do I slice all rows with value "t" on level "two"?</p>

<pre><code>         col
one two     
a   t      0
b   t      4
    t      8
d   t     12
</code></pre>

<h2>Question 2: Selecting Multiple Values in a Level</h2>

<p>How can I select rows corresponding to items "b" and "d" in level "one"?</p>

<pre><code>         col
one two     
b   t      4
    u      5
    v      6
    w      7
    t      8
d   w     11
    t     12
    u     13
    v     14
    w     15
</code></pre>

<p><strong>Question 2b</strong><br>
How would I get all values corresponding to "t" and "w" in level "two"?</p>

<pre><code>         col
one two     
a   t      0
    w      3
b   t      4
    w      7
    t      8
d   w     11
    t     12
    w     15
</code></pre>

<h2>Question 3: Slicing a Single Cross Section <code>(x, y)</code></h2>

<p>How do I retrieve a cross section, i.e., a single row having a specific values for the index from <code>df</code>? Specifically, how do I retrieve the cross section of <code>('c', 'u')</code>, given by</p>

<pre><code>         col
one two     
c   u      9
</code></pre>

<h2>Question 4: Slicing Multiple Cross Sections <code>[(a, b), (c, d), ...]</code></h2>

<p>How do I select the two rows corresponding to <code>('c', 'u')</code>, and <code>('a', 'w')</code>?</p>

<pre><code>         col
one two     
c   u      9
a   w      3
</code></pre>

<h2>Question 5: One Item Sliced per Level</h2>

<p>How can I retrieve all rows corresponding to "a" in level "one" or "t" in level "two"?</p>

<pre><code>         col
one two     
a   t      0
    u      1
    v      2
    w      3
b   t      4
    t      8
d   t     12
</code></pre>

<h2>Question 6: Arbitrary Slicing</h2>

<p>How can I slice specific cross sections? For "a" and "b", I would like to select all rows with sub-levels "u" and "v", and for "d", I would like to select rows with sub-level "w".</p>

<pre><code>         col
one two     
a   u      1
    v      2
b   u      5
    v      6
d   w     11
    w     15
</code></pre>

<blockquote>
  <p>Question 7 will use a unique setup consisting of a numeric level:</p>

<pre><code>np.random.seed(0)
mux2 = pd.MultiIndex.from_arrays([
    list('aaaabbbbbccddddd'),
    np.random.choice(10, size=16)
], names=['one', 'two'])

df2 = pd.DataFrame({'col': np.arange(len(mux2))}, mux2)

         col
one two     
a   5      0
    0      1
    3      2
    3      3
b   7      4
    9      5
    3      6
    5      7
    2      8
c   4      9
    7     10
d   6     11
    8     12
    8     13
    1     14
    6     15
</code></pre>
</blockquote>

<h2>Question 7: Filtering by numeric inequality on individual levels of the multiindex</h2>

<p>How do I get all rows where values in level "two" are greater than 5?</p>

<pre><code>         col
one two     
b   7      4
    9      5
c   7     10
d   6     11
    8     12
    8     13
    6     15
</code></pre>

<hr>

<p>Note: This post will <em>not</em> go through how to create MultiIndexes, how to perform assignment operations on them, or any performance related discussions (these are separate topics for another time). </p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 387<br>
            <strong>Answer:</strong>
            <p><h3><a href="https://pandas.pydata.org/pandas-docs/stable/advanced.html#multiindex-advanced-indexing" rel="noreferrer">MultiIndex / Advanced Indexing</a></h3>
<blockquote>
<p><strong>Note</strong><br />
This post will be structured in the following manner:</p>
<ol>
<li>The questions put forth in the OP will be addressed, one by one</li>
<li>For each question, one or more methods applicable to solving this problem and getting the expected result will be demonstrated.</li>
</ol>
<p><strong>Note</strong>s (much like this one) will be included for readers interested in learning about additional functionality, implementation details,
and other info cursory to the topic at hand. These notes have been
compiled through scouring the docs and uncovering various obscure
features, and from my own (admittedly limited) experience.</p>
<p>All code samples have created and tested on <strong>pandas v0.23.4, python3.7</strong>. If something is not clear, or factually incorrect, or if you did not
find a solution applicable to your use case, please feel free to
suggest an edit, request clarification in the comments, or open a new
question, ....as applicable.</p>
</blockquote>
<p>Here is an introduction to some common idioms (henceforth referred to as the Four Idioms) we will be frequently re-visiting</p>
<ol>
<li><p><em><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.loc.html" rel="noreferrer"><code>DataFrame.loc</code></a></em> - A general solution for selection by label (+ <em><a href="https://pandas.pydata.org/pandas-docs/version/0.23.4/generated/pandas.IndexSlice.html" rel="noreferrer"><code>pd.IndexSlice</code></a></em> for more complex applications involving slices)</p>
</li>
<li><p><em><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.xs.html" rel="noreferrer"><code>DataFrame.xs</code></a></em> - Extract a particular cross section from a Series/DataFrame.</p>
</li>
<li><p><em><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.query.html" rel="noreferrer"><code>DataFrame.query</code></a></em> - Specify slicing and/or filtering operations dynamically (i.e., as an expression that is evaluated dynamically. Is more applicable to some scenarios than others. Also see <a href="https://pandas.pydata.org/pandas-docs/stable/indexing.html#multiindex-query-syntax" rel="noreferrer">this section of the docs</a> for querying on MultiIndexes.</p>
</li>
<li><p>Boolean indexing with a mask generated using <em><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.MultiIndex.get_level_values.html" rel="noreferrer"><code>MultiIndex.get_level_values</code></a></em> (often in conjunction with <em><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Index.isin.html" rel="noreferrer"><code>Index.isin</code></a></em>, especially when filtering with multiple values). This is also quite useful in some circumstances.</p>
</li>
</ol>
<p>It will be beneficial to look at the various slicing and filtering problems in terms of the Four Idioms to gain a better understanding what can be applied to a given situation. It is very important to understand that not all of the idioms will work equally well (if at all) in every circumstance. If an idiom has not been listed as a potential solution to a problem below, that means that idiom cannot be applied to that problem effectively.</p>
<hr />
<blockquote>
<h3>Question 1</h3>
<p>How do I select rows having &quot;a&quot; in level &quot;one&quot;?</p>
<pre><code>         col
one two     
a   t      0
    u      1
    v      2
    w      3
</code></pre>
</blockquote>
<p>You can use <code>loc</code>, as a general purpose solution applicable to most situations:</p>
<pre><code>df.loc[['a']]
</code></pre>
<p>At this point, if you get</p>
<pre><code>TypeError: Expected tuple, got str
</code></pre>
<p>That means you're using an older version of pandas. Consider upgrading! Otherwise, use <code>df.loc[('a', slice(None)), :]</code>.</p>
<p>Alternatively, you can use <code>xs</code> here, since we are extracting a single cross section. Note the <code>levels</code> and <code>axis</code> arguments (reasonable defaults can be assumed here).</p>
<pre><code>df.xs('a', level=0, axis=0, drop_level=False)
# df.xs('a', drop_level=False)
</code></pre>
<p>Here, the <code>drop_level=False</code> argument is needed to prevent <code>xs</code> from dropping level &quot;one&quot; in the result (the level we sliced on).</p>
<p>Yet another option here is using <code>query</code>:</p>
<pre><code>df.query(&quot;one == 'a'&quot;)
</code></pre>
<p>If the index did not have a name, you would need to change your query string to be <code>&quot;ilevel_0 == 'a'&quot;</code>.</p>
<p>Finally, using <code>get_level_values</code>:</p>
<pre><code>df[df.index.get_level_values('one') == 'a']
# If your levels are unnamed, or if you need to select by position (not label),
# df[df.index.get_level_values(0) == 'a']
</code></pre>
<blockquote>
<p>Additionally, how would I be able to drop level &quot;one&quot; in the output?</p>
<pre><code>     col
two     
t      0
u      1
v      2
w      3
</code></pre>
</blockquote>
<p>This can be <em>easily</em> done using either</p>
<pre><code>df.loc['a'] # Notice the single string argument instead the list.
</code></pre>
<p>Or,</p>
<pre><code>df.xs('a', level=0, axis=0, drop_level=True)
# df.xs('a')
</code></pre>
<p>Notice that we can omit the <code>drop_level</code> argument (it is assumed to be <code>True</code> by default).</p>
<blockquote>
<p><strong>Note</strong><br />
You may notice that a filtered DataFrame may still have all the levels, even if they do not show when printing the DataFrame out. For example,</p>
<pre><code>v = df.loc[['a']]
print(v)
         col
one two     
a   t      0
    u      1
    v      2
    w      3

print(v.index)
MultiIndex(levels=[['a', 'b', 'c', 'd'], ['t', 'u', 'v', 'w']],
           labels=[[0, 0, 0, 0], [0, 1, 2, 3]],
           names=['one', 'two'])
</code></pre>
<p>You can get rid of these levels using <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.MultiIndex.remove_unused_levels.html" rel="noreferrer"><em><code>MultiIndex.remove_unused_levels</code></em></a>:</p>
<pre><code>v.index = v.index.remove_unused_levels()
</code></pre>
</blockquote>
<blockquote>
<pre><code>print(v.index)
MultiIndex(levels=[['a'], ['t', 'u', 'v', 'w']],
           labels=[[0, 0, 0, 0], [0, 1, 2, 3]],
           names=['one', 'two'])
</code></pre>
</blockquote>
<hr />
<blockquote>
<h3>Question 1b</h3>
<p>How do I slice all rows with value &quot;t&quot; on level &quot;two&quot;?</p>
<pre><code>         col
one two     
a   t      0
b   t      4
    t      8
d   t     12
</code></pre>
</blockquote>
<p>Intuitively, you would want something involving <a href="https://docs.python.org/3/library/functions.html#slice" rel="noreferrer"><em><code>slice()</code></em></a>:</p>
<pre><code>df.loc[(slice(None), 't'), :]
</code></pre>
<p>It Just Works!‚Ñ¢ But it is clunky. We can facilitate a more natural slicing syntax using the <code>pd.IndexSlice</code> API here.</p>
<pre><code>idx = pd.IndexSlice
df.loc[idx[:, 't'], :]
</code></pre>
<p>This is much, much cleaner.</p>
<blockquote>
<p><strong>Note</strong><br />
Why is the trailing slice <code>:</code> across the columns required? This is because, <code>loc</code> can be used to select and slice along both axes (<code>axis=0</code> or
<code>axis=1</code>). Without explicitly making it clear which axis the slicing
is to be done on, the operation becomes ambiguous. See the big red box in the <a href="http://pandas.pydata.org/pandas-docs/stable/advanced.html#using-slicers" rel="noreferrer">documentation on slicing</a>.</p>
<p>If you want to remove any shade of ambiguity, <code>loc</code> accepts an <code>axis</code>
parameter:</p>
<pre><code>df.loc(axis=0)[pd.IndexSlice[:, 't']]
</code></pre>
<p>Without the <code>axis</code> parameter (i.e., just by doing <code>df.loc[pd.IndexSlice[:, 't']]</code>), slicing is assumed to be on the columns,
and a <code>KeyError</code> will be raised in this circumstance.</p>
<p>This is documented in <a href="https://pandas.pydata.org/pandas-docs/stable/advanced.html#using-slicers" rel="noreferrer">slicers</a>. For the purpose of this post, however, we will explicitly specify all axes.</p>
</blockquote>
<p>With <code>xs</code>, it is</p>
<pre><code>df.xs('t', axis=0, level=1, drop_level=False)
</code></pre>
<p>With <code>query</code>, it is</p>
<pre><code>df.query(&quot;two == 't'&quot;)
# Or, if the first level has no name, 
# df.query(&quot;ilevel_1 == 't'&quot;) 
</code></pre>
<p>And finally, with <code>get_level_values</code>, you may do</p>
<pre><code>df[df.index.get_level_values('two') == 't']
# Or, to perform selection by position/integer,
# df[df.index.get_level_values(1) == 't']
</code></pre>
<p>All to the same effect.</p>
<hr />
<blockquote>
<h3>Question 2</h3>
<p>How can I select rows corresponding to items &quot;b&quot; and &quot;d&quot; in level &quot;one&quot;?</p>
<pre><code>         col
one two     
b   t      4
    u      5
    v      6
    w      7
    t      8
d   w     11
    t     12
    u     13
    v     14
    w     15
</code></pre>
</blockquote>
<p>Using loc, this is done in a similar fashion by specifying a list.</p>
<pre><code>df.loc[['b', 'd']]
</code></pre>
<p>To solve the above problem of selecting &quot;b&quot; and &quot;d&quot;, you can also use <code>query</code>:</p>
<pre><code>items = ['b', 'd']
df.query(&quot;one in @items&quot;)
# df.query(&quot;one == @items&quot;, parser='pandas')
# df.query(&quot;one in ['b', 'd']&quot;)
# df.query(&quot;one == ['b', 'd']&quot;, parser='pandas')
</code></pre>
<blockquote>
<p><strong>Note</strong><br />
Yes, the default parser is <code>'pandas'</code>, but it is important to highlight this syntax isn't conventionally python. The
Pandas parser generates a slightly different parse tree from the
expression. This is done to make some operations more intuitive to
specify. For more information, please read my post on
<a href="https://stackoverflow.com/questions/53779986/dynamic-expression-evaluation-in-pandas-using-pd-eval">Dynamic Expression Evaluation in pandas using pd.eval()</a>.</p>
</blockquote>
<p>And, with <code>get_level_values</code> + <code>Index.isin</code>:</p>
<pre><code>df[df.index.get_level_values(&quot;one&quot;).isin(['b', 'd'])]
</code></pre>
<hr />
<blockquote>
<h3>Question 2b</h3>
<p>How would I get all values corresponding to &quot;t&quot; and &quot;w&quot; in level &quot;two&quot;?</p>
<pre><code>         col
one two     
a   t      0
    w      3
b   t      4
    w      7
    t      8
d   w     11
    t     12
    w     15
</code></pre>
</blockquote>
<p>With <code>loc</code>, this is possible <em>only</em> in conjuction with <code>pd.IndexSlice</code>.</p>
<pre><code>df.loc[pd.IndexSlice[:, ['t', 'w']], :] 
</code></pre>
<p>The first colon <code>:</code> in <code>pd.IndexSlice[:, ['t', 'w']]</code> means to slice across the first level. As the depth of the level being queried increases, you will need to specify more slices, one per level being sliced across. You will not need to specify more levels <em>beyond</em> the one being sliced, however.</p>
<p>With <code>query</code>, this is</p>
<pre><code>items = ['t', 'w']
df.query(&quot;two in @items&quot;)
# df.query(&quot;two == @items&quot;, parser='pandas') 
# df.query(&quot;two in ['t', 'w']&quot;)
# df.query(&quot;two == ['t', 'w']&quot;, parser='pandas')
</code></pre>
<p>With <code>get_level_values</code> and <code>Index.isin</code> (similar to above):</p>
<pre><code>df[df.index.get_level_values('two').isin(['t', 'w'])]
</code></pre>
<hr />
<blockquote>
<h3>Question 3</h3>
<p>How do I retrieve a cross section, i.e., a single row having a specific values
for the index from <code>df</code>? Specifically, how do I retrieve the cross
section of <code>('c', 'u')</code>, given by</p>
<pre><code>         col
one two     
c   u      9
</code></pre>
</blockquote>
<p>Use <code>loc</code> by specifying a tuple of keys:</p>
<pre><code>df.loc[('c', 'u'), :]
</code></pre>
<p>Or,</p>
<pre><code>df.loc[pd.IndexSlice[('c', 'u')]]
</code></pre>
<blockquote>
<p><strong>Note</strong><br />
At this point, you may run into a <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.errors.PerformanceWarning.html#pandas-errors-performancewarning" rel="noreferrer"><em><code>PerformanceWarning</code></em></a> that looks like this:</p>
<pre><code>PerformanceWarning: indexing past lexsort depth may impact performance.
</code></pre>
<p>This just means that your index is not sorted. pandas depends on the index being sorted (in this case, lexicographically, since we are dealing with string values) for optimal search and retrieval. A quick fix would be to sort your
DataFrame in advance using <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_index.html#pandas-dataframe-sort-index" rel="noreferrer"><em><code>DataFrame.sort_index</code></em></a>. This is especially desirable from a performance standpoint if you plan on doing
multiple such queries in tandem:</p>
<pre><code>df_sort = df.sort_index()
df_sort.loc[('c', 'u')]
</code></pre>
<p>You can also use <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.MultiIndex.is_lexsorted.html" rel="noreferrer"><em><code>MultiIndex.is_lexsorted()</code></em></a> to check whether the index
is sorted or not. This function returns <code>True</code> or <code>False</code> accordingly.
You can call this function to determine whether an additional sorting
step is required or not.</p>
</blockquote>
<p>With <code>xs</code>, this is again simply passing a single tuple as the first argument, with all other arguments set to their appropriate defaults:</p>
<pre><code>df.xs(('c', 'u'))
</code></pre>
<p>With <code>query</code>, things become a bit clunky:</p>
<pre><code>df.query(&quot;one == 'c' and two == 'u'&quot;)
</code></pre>
<p>You can see now that this is going to be relatively difficult to generalize. But is still OK for this particular problem.</p>
<p>With accesses spanning multiple levels, <code>get_level_values</code> can still be used, but is not recommended:</p>
<pre><code>m1 = (df.index.get_level_values('one') == 'c')
m2 = (df.index.get_level_values('two') == 'u')
df[m1 &amp; m2]
</code></pre>
<hr />
<blockquote>
<h3>Question 4</h3>
<p>How do I select the two rows corresponding to <code>('c', 'u')</code>, and <code>('a', 'w')</code>?</p>
<pre><code>         col
one two     
c   u      9
a   w      3
</code></pre>
</blockquote>
<p>With <code>loc</code>, this is still as simple as:</p>
<pre><code>df.loc[[('c', 'u'), ('a', 'w')]]
# df.loc[pd.IndexSlice[[('c', 'u'), ('a', 'w')]]]
</code></pre>
<p>With <code>query</code>, you will need to dynamically generate a query string by iterating over your cross sections and levels:</p>
<pre><code>cses = [('c', 'u'), ('a', 'w')]
levels = ['one', 'two']
# This is a useful check to make in advance.
assert all(len(levels) == len(cs) for cs in cses) 

query = '(' + ') or ('.join([
    ' and '.join([f&quot;({l} == {repr(c)})&quot; for l, c in zip(levels, cs)]) 
    for cs in cses
]) + ')'

print(query)
# ((one == 'c') and (two == 'u')) or ((one == 'a') and (two == 'w'))

df.query(query)
</code></pre>
<p>100% DO NOT RECOMMEND! But it is possible.</p>
<p><strong>What if I have multiple levels?</strong><br />
One option in this scenario would be to use <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.droplevel.html" rel="noreferrer"><code>droplevel</code></a> to drop the levels you're not checking, then use <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.isin.html" rel="noreferrer"><code>isin</code></a> to test membership, and then boolean index on the final result.</p>
<pre><code>df[df.index.droplevel(unused_level).isin([('c', 'u'), ('a', 'w')])]
</code></pre>
<hr />
<blockquote>
<h3>Question 5</h3>
<p>How can I retrieve all rows corresponding to &quot;a&quot; in level &quot;one&quot; or
&quot;t&quot; in level &quot;two&quot;?</p>
<pre><code>         col
one two     
a   t      0
    u      1
    v      2
    w      3
b   t      4
    t      8
d   t     12
</code></pre>
</blockquote>
<p>This is actually very difficult to do with <code>loc</code> while ensuring correctness <em>and</em> still maintaining code clarity. <code>df.loc[pd.IndexSlice['a', 't']]</code> is incorrect, it is interpreted as <code>df.loc[pd.IndexSlice[('a', 't')]]</code> (i.e., selecting a cross section). You may think of a solution with <code>pd.concat</code> to handle each label separately:</p>
<pre><code>pd.concat([
    df.loc[['a'],:], df.loc[pd.IndexSlice[:, 't'],:]
])

         col
one two     
a   t      0
    u      1
    v      2
    w      3
    t      0   # Does this look right to you? No, it isn't!
b   t      4
    t      8
d   t     12
</code></pre>
<p>But you'll notice one of the rows is duplicated. This is because that row satisfied both slicing conditions, and so appeared twice. You will instead need to do</p>
<pre><code>v = pd.concat([
        df.loc[['a'],:], df.loc[pd.IndexSlice[:, 't'],:]
])
v[~v.index.duplicated()]
</code></pre>
<p>But if your DataFrame inherently contains duplicate indices (that you want), then this will not retain them.  <strong>Use with extreme caution</strong>.</p>
<p>With <code>query</code>, this is stupidly simple:</p>
<pre><code>df.query(&quot;one == 'a' or two == 't'&quot;)
</code></pre>
<p>With <code>get_level_values</code>, this is still simple, but not as elegant:</p>
<pre><code>m1 = (df.index.get_level_values('one') == 'a')
m2 = (df.index.get_level_values('two') == 't')
df[m1 | m2] 
</code></pre>
<hr />
<blockquote>
<h3>Question 6</h3>
<p>How can I slice specific cross sections? For &quot;a&quot; and &quot;b&quot;, I would like to select all rows with sub-levels &quot;u&quot; and &quot;v&quot;, and
for &quot;d&quot;, I would like to select rows with sub-level &quot;w&quot;.</p>
<pre><code>         col
one two     
a   u      1
    v      2
b   u      5
    v      6
d   w     11
    w     15
</code></pre>
</blockquote>
<p>This is a special case that I've added to help understand the applicability of the Four Idioms‚Äîthis is one case where none of them will work effectively, since the slicing is <em>very</em> specific, and does not follow any real pattern.</p>
<p>Usually, slicing problems like this will require explicitly passing a list of keys to <code>loc</code>. One way of doing this is with:</p>
<pre><code>keys = [('a', 'u'), ('a', 'v'), ('b', 'u'), ('b', 'v'), ('d', 'w')]
df.loc[keys, :]
</code></pre>
<p>If you want to save some typing, you will recognise that there is a pattern to slicing &quot;a&quot;, &quot;b&quot; and its sublevels, so we can separate the slicing task into two portions and <code>concat</code> the result:</p>
<pre><code>pd.concat([
     df.loc[(('a', 'b'), ('u', 'v')), :], 
     df.loc[('d', 'w'), :]
   ], axis=0)
</code></pre>
<p>Slicing specification for &quot;a&quot; and &quot;b&quot; is slightly cleaner <code>(('a', 'b'), ('u', 'v'))</code> because the same sub-levels being indexed are the same for each level.</p>
<hr />
<blockquote>
<h3>Question 7</h3>
<p>How do I get all rows where values in level &quot;two&quot; are greater than 5?</p>
<pre><code>         col
one two     
b   7      4
    9      5
c   7     10
d   6     11
    8     12
    8     13
    6     15
</code></pre>
</blockquote>
<p>This can be done using <code>query</code>,</p>
<pre><code>df2.query(&quot;two &gt; 5&quot;)
</code></pre>
<p>And <code>get_level_values</code>.</p>
<pre><code>df2[df2.index.get_level_values('two') &gt; 5]
</code></pre>
<blockquote>
<p><strong>Note</strong><br />
Similar to this example, we can filter based on any arbitrary condition using these constructs. In general, it is useful to remember that <code>loc</code> and <code>xs</code> are specifically for label-based indexing, while <code>query</code> and
<code>get_level_values</code> are helpful for building general conditional masks
for filtering.</p>
</blockquote>
<hr />
<blockquote>
<h3>Bonus Question</h3>
<p>What if I need to slice a <code>MultiIndex</code> <em>column</em>?</p>
</blockquote>
<p>Actually, most solutions here are applicable to columns as well, with minor changes. Consider:</p>
<pre><code>np.random.seed(0)
mux3 = pd.MultiIndex.from_product([
        list('ABCD'), list('efgh')
], names=['one','two'])

df3 = pd.DataFrame(np.random.choice(10, (3, len(mux))), columns=mux3)
print(df3)

one  A           B           C           D         
two  e  f  g  h  e  f  g  h  e  f  g  h  e  f  g  h
0    5  0  3  3  7  9  3  5  2  4  7  6  8  8  1  6
1    7  7  8  1  5  9  8  9  4  3  0  3  5  0  2  3
2    8  1  3  3  3  7  0  1  9  9  0  4  7  3  2  7
</code></pre>
<p>These are the following changes you will need to make to the Four Idioms to have them working with columns.</p>
<ol>
<li><p>To slice with <code>loc</code>, use</p>
<pre><code> df3.loc[:, ....] # Notice how we slice across the index with `:`. 
</code></pre>
<p>or,</p>
<pre><code> df3.loc[:, pd.IndexSlice[...]]
</code></pre>
</li>
<li><p>To use <code>xs</code> as appropriate, just pass an argument <code>axis=1</code>.</p>
</li>
<li><p>You can access the column level values directly using <code>df.columns.get_level_values</code>. You will then need to do something like</p>
<pre><code> df.loc[:, {condition}] 
</code></pre>
<p>Where <code>{condition}</code> represents some condition built using <code>columns.get_level_values</code>.</p>
</li>
<li><p>To use <code>query</code>, your only option is to transpose, query on the index, and transpose again:</p>
<pre><code> df3.T.query(...).T
</code></pre>
<p>Not recommended, use one of the other 3 options.</p>
</li>
</ol>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, slice, multi-index, dataframe, pandas
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>Are there ways to simulate <code>componentDidMount</code> in React functional components via hooks?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 649<br>
            <strong>Answer:</strong>
            <p><p>For the stable version of hooks (React Version 16.8.0+)</p>

<p>For <code>componentDidMount</code></p>

<pre><code>useEffect(() =&gt; {
  // Your code here
}, []);
</code></pre>

<p>For <code>componentDidUpdate</code></p>

<pre><code>useEffect(() =&gt; {
  // Your code here
}, [yourDependency]);
</code></pre>

<p>For <code>componentWillUnmount</code></p>

<pre><code>useEffect(() =&gt; {
  // componentWillUnmount
  return () =&gt; {
     // Your code here
  }
}, [yourDependency]);
</code></pre>

<p>So in this situation, you need to pass your dependency into this array. Let's assume you have a state like this </p>

<p><code>const [count, setCount] = useState(0);</code></p>

<p>And whenever count increases you want to re-render your function component. Then your <code>useEffect</code> should look like this</p>

<pre><code>useEffect(() =&gt; {
  // &lt;div&gt;{count}&lt;/div&gt;
}, [count]);
</code></pre>

<p>This way whenever your count updates your component will re-render. Hopefully this will help a bit.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>Lets say I have some state that is dependent on some other state (eg when A changes I want B to change). </p>

<p>Is it appropriate to create a hook that observes A and sets B inside the useEffect hook? </p>

<p>Will the effects cascade such that, when I click the button, the first effect will fire, causing b to change, causing the second effect to fire, before the next render? Are there any performance downsides to structuring code like this?</p>

<pre><code>let MyComponent = props =&gt; {
  let [a, setA] = useState(1)
  let [b, setB] = useState(2)
  useEffect(
    () =&gt; {
      if (/*some stuff is true*/) {
        setB(3)
      }
    },
    [a],
  )
  useEffect(
    () =&gt; {
      // do some stuff
    },
    [b],
  )

  return (
    &lt;button
      onClick={() =&gt; {
        setA(5)
      }}
    &gt;
      click me
    &lt;/button&gt;
  )
}
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 46<br>
            <strong>Answer:</strong>
            <p><p>Effects are always executed after the render phase is completed even if you setState inside the one effect, another effect will read the updated state and take action on it only after the render phase. </p>

<p>Having said that its probably better to take both actions in the same effect unless there is a possibility that <code>b</code> can change due to reasons other than <code>changing a</code> in which case too you would want to execute the same logic</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><ul>
<li>How can I perform a (<code>INNER</code>| (<code>LEFT</code>|<code>RIGHT</code>|<code>FULL</code>) <code>OUTER</code>) <code>JOIN</code> with pandas?</li>
<li>How do I add NaNs for missing rows after a merge?</li>
<li>How do I get rid of NaNs after merging?</li>
<li>Can I merge on the index?</li>
<li>How do I merge multiple DataFrames?</li>
<li>Cross join with pandas</li>
<li><code>merge</code>? <code>join</code>? <code>concat</code>? <code>update</code>? Who? What? Why?!</li>
</ul>
<p>... and more. I've seen these recurring questions asking about various facets of the pandas merge functionality. Most of the information regarding merge and its various use cases today is fragmented across dozens of badly worded, unsearchable posts. The aim here is to collate some of the more important points for posterity.</p>
<p>This Q&amp;A is meant to be the next installment in a series of helpful user guides on common pandas idioms (see <a href="https://stackoverflow.com/questions/47152691/how-to-pivot-a-dataframe">this post on pivoting</a>, and <a href="https://stackoverflow.com/questions/49620538/what-are-the-levels-keys-and-names-arguments-for-in-pandas-concat-functio">this post on concatenation</a>, which I will be touching on, later).</p>
<p>Please note that this post is <em>not</em> meant to be a replacement for <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/merging.html" rel="noreferrer">the documentation</a>, so please read that as well! Some of the examples are taken from there.</p>
<hr />
<h3>Table of Contents</h3>
<p><sub>For ease of access.</sub></p>
<ul>
<li><p><a href="https://stackoverflow.com/a/53645883/4909087">Merging basics - basic types of joins</a> (read this first)</p>
</li>
<li><p><a href="https://stackoverflow.com/a/65167356/4909087">Index-based joins</a></p>
</li>
<li><p><a href="https://stackoverflow.com/a/65167327/4909087">Generalizing to multiple DataFrames</a></p>
</li>
<li><p><a href="https://stackoverflow.com/a/53699013/4909087">Cross join</a></p>
</li>
</ul>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 1288<br>
            <strong>Answer:</strong>
            <p><p>This post aims to give readers a primer on SQL-flavored merging with Pandas, how to use it, and when not to use it.</p>
<p>In particular, here's what this post will go through:</p>
<ul>
<li><p>The basics - types of joins (LEFT, RIGHT, OUTER, INNER)</p>
<ul>
<li>merging with different column names</li>
<li>merging with multiple columns</li>
<li>avoiding duplicate merge key column in output</li>
</ul>
</li>
</ul>
<p>What this post (and other posts by me on this thread) will not go through:</p>
<ul>
<li>Performance-related discussions and timings (for now). Mostly notable mentions of better alternatives, wherever appropriate.</li>
<li>Handling suffixes, removing extra columns, renaming outputs, and other specific use cases. There are other (read: better) posts that deal with that, so figure it out!</li>
</ul>
<blockquote>
<p><strong>Note</strong>
Most examples default to INNER JOIN operations while demonstrating various features, unless otherwise specified.</p>
<p>Furthermore, all the DataFrames here can be copied and replicated so
you can play with them. Also, see <a href="https://stackoverflow.com/questions/31610889/how-to-copy-paste-dataframe-from-stackoverflow-into-python">this
post</a>
on how to read DataFrames from your clipboard.</p>
<p>Lastly, all visual representation of JOIN operations have been hand-drawn using Google Drawings. Inspiration from <a href="https://stackoverflow.com/a/55858991/4909087">here</a>.</p>
</blockquote>
<hr />
<hr />
<h1>Enough talk - just show me how to use <code>merge</code>!</h1>
<h3>Setup &amp; Basics</h3>
<pre><code>np.random.seed(0)
left = pd.DataFrame({'key': ['A', 'B', 'C', 'D'], 'value': np.random.randn(4)})
right = pd.DataFrame({'key': ['B', 'D', 'E', 'F'], 'value': np.random.randn(4)})

left

  key     value
0   A  1.764052
1   B  0.400157
2   C  0.978738
3   D  2.240893

right

  key     value
0   B  1.867558
1   D -0.977278
2   E  0.950088
3   F -0.151357
</code></pre>
<p>For the sake of simplicity, the key column has the same name (for now).</p>
<p>An <strong>INNER JOIN</strong> is represented by</p>
<img src="https://i.sstatic.net/YvuOa.png" width="500"/>
<blockquote>
<p><strong>Note</strong>
This, along with the forthcoming figures all follow this convention:</p>
<ul>
<li><strong>blue</strong> indicates rows that are present in the merge result</li>
<li><strong>red</strong> indicates rows that are excluded from the result (i.e., removed)</li>
<li><strong>green</strong> indicates missing values that are replaced with <code>NaN</code>s in the result</li>
</ul>
</blockquote>
<p>To perform an INNER JOIN, call <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.merge.html" rel="nofollow noreferrer"><code>merge</code></a> on the left DataFrame, specifying the right DataFrame and the join key (at the very least) as arguments.</p>
<pre><code>left.merge(right, on='key')
# Or, if you want to be explicit
# left.merge(right, on='key', how='inner')

  key   value_x   value_y
0   B  0.400157  1.867558
1   D  2.240893 -0.977278
</code></pre>
<p>This returns only rows from <code>left</code> and <code>right</code> which share a common key (in this example, &quot;B&quot; and &quot;D).</p>
<p>A <strong>LEFT OUTER JOIN</strong>, or LEFT JOIN  is represented by</p>
<img src="https://i.sstatic.net/BECid.png" width="500" />
<p>This can be performed by specifying <code>how='left'</code>.</p>
<pre><code>left.merge(right, on='key', how='left')

  key   value_x   value_y
0   A  1.764052       NaN
1   B  0.400157  1.867558
2   C  0.978738       NaN
3   D  2.240893 -0.977278
</code></pre>
<p>Carefully note the placement of NaNs here. If you specify <code>how='left'</code>, then only keys from <code>left</code> are used, and missing data from <code>right</code> is replaced by NaN.</p>
<p>And similarly, for a <strong>RIGHT OUTER JOIN</strong>, or RIGHT JOIN which is...</p>
<img src="https://i.sstatic.net/8w1US.png" width="500" />
<p>...specify <code>how='right'</code>:</p>
<pre><code>left.merge(right, on='key', how='right')

  key   value_x   value_y
0   B  0.400157  1.867558
1   D  2.240893 -0.977278
2   E       NaN  0.950088
3   F       NaN -0.151357
</code></pre>
<p>Here, keys from <code>right</code> are used, and missing data from <code>left</code> is replaced by NaN.</p>
<p>Finally, for the <strong>FULL OUTER JOIN</strong>, given by</p>
<img src="https://i.sstatic.net/euLoe.png" width="500" />
<p>specify <code>how='outer'</code>.</p>
<pre><code>left.merge(right, on='key', how='outer')

  key   value_x   value_y
0   A  1.764052       NaN
1   B  0.400157  1.867558
2   C  0.978738       NaN
3   D  2.240893 -0.977278
4   E       NaN  0.950088
5   F       NaN -0.151357
</code></pre>
<p>This uses the keys from both frames, and NaNs are inserted for missing rows in both.</p>
<p>The documentation summarizes these various merges nicely:</p>
<p><a href="https://i.sstatic.net/5qDIy.png" rel="nofollow noreferrer"><img src="https://i.sstatic.net/5qDIy.png" alt="Enter image description here" /></a></p>
<hr />
<h3><strong>Other JOINs - LEFT-Excluding, RIGHT-Excluding, and FULL-Excluding/ANTI JOINs</strong></h3>
<p>If you need <strong>LEFT-Excluding JOINs</strong> and <strong>RIGHT-Excluding JOINs</strong> in two steps.</p>
<p>For LEFT-Excluding JOIN, represented as</p>
<img src="https://i.sstatic.net/bXWIV.png" width="500"/>
<p>Start by performing a LEFT OUTER JOIN and then filtering to rows coming from <code>left</code> only (excluding everything from the right),</p>
<pre><code>(left.merge(right, on='key', how='left', indicator=True)
     .query('_merge == &quot;left_only&quot;')
     .drop('_merge', axis=1))

  key   value_x  value_y
0   A  1.764052      NaN
2   C  0.978738      NaN
</code></pre>
<p>Where,</p>
<pre><code>left.merge(right, on='key', how='left', <b>indicator=True</b>)

  key   value_x   value_y     _merge
0   A  1.764052       NaN  left_only
1   B  0.400157  1.867558       both
2   C  0.978738       NaN  left_only
3   D  2.240893 -0.977278       both</code></pre>
<p>And similarly, for a RIGHT-Excluding JOIN,</p>
<img src="https://i.sstatic.net/Z0br2.png" width="500"/>
<pre><code>(left.merge(right, on='key', how='right', <b>indicator=True</b>)
     .query('_merge == "right_only"')
     .drop('_merge', axis=1))

  key  value_x   value_y
2   E      NaN  0.950088
3   F      NaN -0.151357</code></pre>
<p>Lastly, if you are required to do a merge that only retains keys from the left or right, but not both (IOW, performing an <strong>ANTI-JOIN</strong>),</p>
<img src="https://i.sstatic.net/PWMYd.png" width="500"/>
<p>You can do this in similar fashion‚Äî</p>
<pre><code>(left.merge(right, on='key', how='outer', indicator=True)
     .query('_merge != &quot;both&quot;')
     .drop('_merge', axis=1))

  key   value_x   value_y
0   A  1.764052       NaN
2   C  0.978738       NaN
4   E       NaN  0.950088
5   F       NaN -0.151357
</code></pre>
<hr />
<h3><strong>Different names for key columns</strong></h3>
<p>If the key columns are named differently‚Äîfor example, <code>left</code> has <code>keyLeft</code>, and <code>right</code> has <code>keyRight</code> instead of <code>key</code>‚Äîthen you will have to specify <code>left_on</code> and <code>right_on</code> as arguments instead of <code>on</code>:</p>
<pre><code>left2 = left.rename({'key':'keyLeft'}, axis=1)
right2 = right.rename({'key':'keyRight'}, axis=1)

left2

  keyLeft     value
0       A  1.764052
1       B  0.400157
2       C  0.978738
3       D  2.240893

right2

  keyRight     value
0        B  1.867558
1        D -0.977278
2        E  0.950088
3        F -0.151357
</code></pre>

<pre><code>left2.merge(right2, left_on='keyLeft', right_on='keyRight', how='inner')

  keyLeft   value_x keyRight   value_y
0       B  0.400157        B  1.867558
1       D  2.240893        D -0.977278
</code></pre>
<hr />
<h3><strong>Avoiding duplicate key column in output</strong></h3>
<p>When merging on <code>keyLeft</code> from <code>left</code> and <code>keyRight</code> from <code>right</code>, if you only want either of the <code>keyLeft</code> or <code>keyRight</code> (but not both) in the output, you can start by setting the index as a preliminary step.</p>
<pre><code>left3 = left2.set_index('keyLeft')
left3.merge(right2, left_index=True, right_on='keyRight')

    value_x keyRight   value_y
0  0.400157        B  1.867558
1  2.240893        D -0.977278
</code></pre>
<p>Contrast this with the output of the command just before (that is, the output of <code>left2.merge(right2, left_on='keyLeft', right_on='keyRight', how='inner')</code>), you'll notice <code>keyLeft</code> is missing. You can figure out what column to keep based on which frame's index is set as the key. This may matter when, say, performing some OUTER JOIN operation.</p>
<hr />
<h3><strong>Merging only a single column from one of the <code>DataFrames</code></strong></h3>
<p>For example, consider</p>
<pre><code>right3 = right.assign(newcol=np.arange(len(right)))
right3
  key     value  newcol
0   B  1.867558       0
1   D -0.977278       1
2   E  0.950088       2
3   F -0.151357       3
</code></pre>
<p>If you are required to merge only &quot;newcol&quot; (without any of the other columns), you can usually just subset columns before merging:</p>
<pre><code>left.merge(right3[['key', 'newcol']], on='key')

  key     value  newcol
0   B  0.400157       0
1   D  2.240893       1
</code></pre>
<p>If you're doing a LEFT OUTER JOIN, a more performant solution would involve <code>map</code>:</p>
<pre><code># left['newcol'] = left['key'].map(right3.set_index('key')['newcol']))
left.assign(newcol=left['key'].map(right3.set_index('key')['newcol']))

  key     value  newcol
0   A  1.764052     NaN
1   B  0.400157     0.0
2   C  0.978738     NaN
3   D  2.240893     1.0
</code></pre>
<p>As mentioned, this is similar to, but faster than</p>
<pre><code>left.merge(right3[['key', 'newcol']], on='key', how='left')

  key     value  newcol
0   A  1.764052     NaN
1   B  0.400157     0.0
2   C  0.978738     NaN
3   D  2.240893     1.0
</code></pre>
<hr />
<h3><strong>Merging on multiple columns</strong></h3>
<p>To join on more than one column, specify a list for <code>on</code> (or <code>left_on</code> and <code>right_on</code>, as appropriate).</p>
<pre><code>left.merge(right, on=['key1', 'key2'] ...)
</code></pre>
<p>Or, in the event the names are different,</p>
<pre><code>left.merge(right, left_on=['lkey1', 'lkey2'], right_on=['rkey1', 'rkey2'])
</code></pre>
<hr />
<h3><strong>Other useful <code>merge*</code> operations and functions</strong></h3>
<ul>
<li><p>Merging a DataFrame with Series on index: See <a href="https://stackoverflow.com/a/40762674/4909087">this answer</a>.</p>
</li>
<li><p>Besides <code>merge</code>, <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.update.html" rel="nofollow noreferrer"><code>DataFrame.update</code></a> and <a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.combine_first.html" rel="nofollow noreferrer"><code>DataFrame.combine_first</code></a> are also used in certain cases to update one DataFrame with another.</p>
</li>
<li><p><a href="http://pandas.pydata.org/pandas-docs/version/0.19.0/generated/pandas.merge_ordered.html" rel="nofollow noreferrer"><code>pd.merge_ordered</code></a> is a useful function for ordered JOINs.</p>
</li>
<li><p><a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.merge_asof.html" rel="nofollow noreferrer"><code>pd.merge_asof</code></a> (read: merge_asOf) is useful for <em>approximate</em> joins.</p>
</li>
</ul>
<p><strong>This section only covers the very basics, and is designed to only whet your appetite. For more examples and cases, see the <a href="https://pandas.pydata.org/pandas-docs/stable/merging.html" rel="nofollow noreferrer">documentation on <code>merge</code>, <code>join</code>, and <code>concat</code></a> as well as the links to the function specifications.</strong></p>
<hr />
<hr />
<h1>Continue Reading</h1>
<p>Jump to other topics in Pandas Merging 101 to continue learning:</p>
<ul>
<li><p><a href="https://stackoverflow.com/a/53645883/4909087">Merging basics - basic types of joins</a> <sup>*</sup></p>
</li>
<li><p><a href="https://stackoverflow.com/a/65167356/4909087">Index-based joins</a></p>
</li>
<li><p><a href="https://stackoverflow.com/a/65167327/4909087">Generalizing to multiple DataFrames</a></p>
</li>
<li><p><a href="https://stackoverflow.com/a/53699013/4909087">Cross join</a></p>
</li>
</ul>
<p><sub>*You are here.</sub></p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, merge, join, concatenation, pandas
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Jan-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>I am trying to learn hooks and the <code>useState</code> method has made me confused. I am assigning an initial value to a state in the form of an array. The set method in <code>useState</code> is not working for me, both with and without the spread syntax.</p>
<p>I have made an API on another PC that I am calling and fetching the data which I want to set into the state.</p>
<p>Here is my code:</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;div id="root"&gt;&lt;/div&gt;

&lt;script type="text/babel" defer&gt;
// import React, { useState, useEffect } from "react";
// import ReactDOM from "react-dom";
const { useState, useEffect } = React; // web-browser variant

const StateSelector = () =&gt; {
  const initialValue = [
    {
      category: "",
      photo: "",
      description: "",
      id: 0,
      name: "",
      rating: 0
    }
  ];

  const [movies, setMovies] = useState(initialValue);

  useEffect(() =&gt; {
    (async function() {
      try {
        // const response = await fetch("http://192.168.1.164:5000/movies/display");
        // const json = await response.json();
        // const result = json.data.result;
        const result = [
          {
            category: "cat1",
            description: "desc1",
            id: "1546514491119",
            name: "randomname2",
            photo: null,
            rating: "3"
          },
          {
            category: "cat2",
            description: "desc1",
            id: "1546837819818",
            name: "randomname1",
            rating: "5"
          }
        ];
        console.log("result =", result);
        setMovies(result);
        console.log("movies =", movies);
      } catch (e) {
        console.error(e);
      }
    })();
  }, []);

  return &lt;p&gt;hello&lt;/p&gt;;
};

const rootElement = document.getElementById("root");
ReactDOM.render(&lt;StateSelector /&gt;, rootElement);
&lt;/script&gt;

&lt;script src="https://unpkg.com/@babel/standalone@7/babel.min.js"&gt;&lt;/script&gt;
&lt;script src="https://unpkg.com/react@17/umd/react.production.min.js"&gt;&lt;/script&gt;
&lt;script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"&gt;&lt;/script&gt;</code></pre>
</div>
</div>
</p>
<p>Neither <code>setMovies(result)</code> nor <code>setMovies(...result)</code> works.</p>
<p>I expect the <code>result</code> variable to be pushed into the <code>movies</code> array.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 958<br>
            <strong>Answer:</strong>
            <p><p>Much <a href="https://stackoverflow.com/q/30782948/1048572">like <code>.setState()</code> in class components</a> created by extending <code>React.Component</code> or <code>React.PureComponent</code>, the state update using the updater provided by <code>useState</code> hook is also asynchronous, and will not be reflected immediately.</p>
<p><strong>Also, the main issue here is not just the asynchronous nature but the fact that state values are used by functions based on their current closures, and state updates will reflect in the next re-render by which the existing closures are not affected, but new ones are created</strong>. Now in the current state, the values within hooks are obtained by existing closures, and when a re-render happens, the closures are updated based on whether the function is recreated again or not.</p>
<p>Even if you add a <code>setTimeout</code> the function, though the timeout will run after some time by which the re-render would have happened, the <code>setTimeout</code> will still use the value from its previous closure and not the updated one.</p>
<pre><code>setMovies(result);
console.log(movies) // movies here will not be updated
</code></pre>
<p>If you want to perform an action on state update, you need to use the <code>useEffect</code> hook, much like using <code>componentDidUpdate</code> in class components since the setter returned by <code>useState</code> doesn't have a callback pattern</p>
<pre><code>useEffect(() =&gt; {
    // action on update of movies
}, [movies]);
</code></pre>
<p>As far as the syntax to update state is concerned, <code>setMovies(result)</code> will replace the previous <code>movies</code> value in the state with those available from the async request.</p>
<p>However, if you want to merge the response with the previously existing values, you must use the callback syntax of state updation along with the correct use of spread syntax like</p>
<pre><code>setMovies(prevMovies =&gt; ([...prevMovies, ...result]));
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I have seen many answers posted to questions on Stack Overflow involving the use of the Pandas method <code>apply</code>. I have also seen users commenting under them saying that "<code>apply</code> is slow, and should be avoided". </p>

<p>I have read many articles on the topic of performance that explain <code>apply</code> is slow. I have also seen a disclaimer in the docs about how <code>apply</code> is simply a convenience function for passing UDFs (can't seem to find that now). So, the general consensus is that <code>apply</code> should be avoided if possible. However, this raises the following questions: </p>

<ol>
<li>If <code>apply</code> is so bad, then why is it in the API?</li>
<li>How and when should I make my code <code>apply</code>-free?</li>
<li>Are there ever any situations where <code>apply</code> is <em>good</em> (better than other possible solutions)? </li>
</ol>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 266<br>
            <strong>Answer:</strong>
            <p><h1><code>apply</code>, the Convenience Function you Never Needed</h1>
<p>We start by addressing the questions in the OP, one by one.</p>
<blockquote>
<h2>&quot;If <code>apply</code> is so bad, then why is it in the API?&quot;</h2>
</blockquote>
<p><a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply" rel="noreferrer"><code>DataFrame.apply</code></a> and <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.apply.html" rel="noreferrer"><code>Series.apply</code></a> are <em>convenience functions</em> defined on DataFrame and Series object respectively. <code>apply</code> accepts any user defined function that applies a transformation/aggregation on a DataFrame. <code>apply</code> is effectively a silver bullet that does whatever any existing pandas function cannot do.</p>
<p>Some of the things <code>apply</code> can do:</p>
<ul>
<li>Run any user-defined function on a DataFrame or Series</li>
<li>Apply a function either row-wise (<code>axis=1</code>) or column-wise (<code>axis=0</code>) on a DataFrame</li>
<li>Perform index alignment while applying the function</li>
<li>Perform aggregation with user-defined functions (however, we usually prefer <code>agg</code> or <code>transform</code> in these cases)</li>
<li>Perform element-wise transformations</li>
<li>Broadcast aggregated results to original rows (see the <code>result_type</code> argument).</li>
<li>Accept positional/keyword arguments to pass to the user-defined functions.</li>
</ul>
<p>...Among others. For more information, see <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/basics.html#row-or-column-wise-function-application" rel="noreferrer">Row or Column-wise Function Application</a> in the documentation.</p>
<p>So, with all these features, why is <code>apply</code> bad? It is <strong>because <code>apply</code> is</strong> <strong>slow</strong>. Pandas makes no assumptions about the nature of your function, and so <strong>iteratively applies your function</strong> to each row/column as necessary. Additionally, handling <em>all</em> of the situations above means <code>apply</code> incurs some major overhead at each iteration. Further, <code>apply</code> consumes a lot more memory, which is a challenge for memory bounded applications.</p>
<p>There are very few situations where <code>apply</code> is appropriate to use (more on that below). <strong>If you're not sure whether you should be using <code>apply</code>, you probably shouldn't.</strong></p>
<hr />
<hr />
<h2>pandas 2.2 update: <code>apply</code> now supports <code>engine='numba'</code></h2>
<p>More info in the <a href="https://pandas.pydata.org/pandas-docs/stable/whatsnew/v2.2.0.html" rel="noreferrer">release notes</a> as well as <a href="https://github.com/pandas-dev/pandas/pull/54666" rel="noreferrer">GH54666</a></p>
<blockquote>
<p>Choose between the python (default) engine or the numba engine in apply.</p>
<p>The numba engine will attempt to JIT compile the passed function, which may result in speedups for large DataFrames. It also supports the following engine_kwargs :</p>
<ul>
<li>nopython (compile the function in nopython mode)</li>
<li>nogil (release the GIL inside the JIT compiled function)</li>
<li>parallel (try to apply the function in parallel over the DataFrame)</li>
</ul>
<p>Note: Due to limitations within numba/how pandas interfaces with numba, you should only use this if raw=True</p>
</blockquote>
<hr />
<p>Let's address the next question.</p>
<blockquote>
<h2>&quot;How and when should I make my code <code>apply</code>-free?&quot;</h2>
</blockquote>
<p>To rephrase, here are some common situations where you will want to <em>get rid</em> of any calls to <code>apply</code>.</p>
<h3><strong>Numeric Data</strong></h3>
<p>If you're working with numeric data, there is likely already a vectorized cython function that does exactly what you're trying to do (if not, please either ask a question on Stack Overflow or open a feature request on GitHub).</p>
<p>Contrast the performance of <code>apply</code> for a simple addition operation.</p>
<pre><code>df = pd.DataFrame({&quot;A&quot;: [9, 4, 2, 1], &quot;B&quot;: [12, 7, 5, 4]})
df

   A   B
0  9  12
1  4   7
2  2   5
3  1   4
</code></pre>
<p>&lt;!- -&gt;</p>
<pre><code>df.apply(np.sum)

A    16
B    28
dtype: int64

df.sum()

A    16
B    28
dtype: int64
</code></pre>
<p>Performance wise, there's no comparison, the cythonized equivalent is much faster. There's no need for a graph, because the difference is obvious even for toy data.</p>
<pre><code>%timeit df.apply(np.sum)
%timeit df.sum()
2.22 ms ¬± 41.2 ¬µs per loop (mean ¬± std. dev. of 7 runs, 100 loops each)
471 ¬µs ¬± 8.16 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
</code></pre>
<p>Even if you enable passing raw arrays with the <code>raw</code> argument, it's still twice as slow.</p>
<pre><code>%timeit df.apply(np.sum, raw=True)
840 ¬µs ¬± 691 ¬µs per loop (mean ¬± std. dev. of 7 runs, 100 loops each)
</code></pre>
<p>Another example:</p>
<pre><code>df.apply(lambda x: x.max() - x.min())

A    8
B    8
dtype: int64

df.max() - df.min()

A    8
B    8
dtype: int64

%timeit df.apply(lambda x: x.max() - x.min())
%timeit df.max() - df.min()

2.43 ms ¬± 450 ¬µs per loop (mean ¬± std. dev. of 7 runs, 100 loops each)
1.23 ms ¬± 14.7 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
</code></pre>
<p>In general, <strong>seek out vectorized alternatives if possible.</strong></p>
<hr />
<h3><strong>String/Regex</strong></h3>
<p>Pandas provides &quot;vectorized&quot; string functions in most situations, but there are rare cases where those functions do not... &quot;apply&quot;, so to speak.</p>
<p>A common problem is to check whether a value in a column is present in another column of the same row.</p>
<pre><code>df = pd.DataFrame({
    'Name': ['mickey', 'donald', 'minnie'],
    'Title': ['wonderland', &quot;welcome to donald's castle&quot;, 'Minnie mouse clubhouse'],
    'Value': [20, 10, 86]})
df

     Name  Value                       Title
0  mickey     20                  wonderland
1  donald     10  welcome to donald's castle
2  minnie     86      Minnie mouse clubhouse
</code></pre>
<p>This should return the row second and third row, since &quot;donald&quot; and &quot;minnie&quot; are present in their respective &quot;Title&quot; columns.</p>
<p>Using apply, this would be done using</p>
<pre><code>df.apply(lambda x: x['Name'].lower() in x['Title'].lower(), axis=1)

0    False
1     True
2     True
dtype: bool
 
df[df.apply(lambda x: x['Name'].lower() in x['Title'].lower(), axis=1)]

     Name                       Title  Value
1  donald  welcome to donald's castle     10
2  minnie      Minnie mouse clubhouse     86
</code></pre>
<p>However, a better solution exists using list comprehensions.</p>
<pre><code>df[[y.lower() in x.lower() for x, y in zip(df['Title'], df['Name'])]]

     Name                       Title  Value
1  donald  welcome to donald's castle     10
2  minnie      Minnie mouse clubhouse     86
</code></pre>
<p>&lt;!- -&gt;</p>
<pre><code>%timeit df[df.apply(lambda x: x['Name'].lower() in x['Title'].lower(), axis=1)]
%timeit df[[y.lower() in x.lower() for x, y in zip(df['Title'], df['Name'])]]

2.85 ms ¬± 38.4 ¬µs per loop (mean ¬± std. dev. of 7 runs, 100 loops each)
788 ¬µs ¬± 16.4 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
</code></pre>
<p>The thing to note here is that iterative routines happen to be faster than <code>apply</code>, because of the lower overhead. If you need to handle NaNs and invalid dtypes, you can build on this using a custom function you can then call with arguments inside the list comprehension.</p>
<p>For more information on when list comprehensions should be considered a good option, see my writeup: <a href="https://stackoverflow.com/questions/54028199/for-loops-with-pandas-when-should-i-care">Are for-loops in pandas really bad? When should I care?</a>.</p>
<blockquote>
<p><strong>Note</strong><br />
Date and datetime operations also have vectorized versions. So, for example, you should prefer <code>pd.to_datetime(df['date'])</code>, over,
say, <code>df['date'].apply(pd.to_datetime)</code>.</p>
<p>Read more at the
<a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html" rel="noreferrer">docs</a>.</p>
</blockquote>
<hr />
<h3><strong>A Common Pitfall: Exploding Columns of Lists</strong></h3>
<pre><code>s = pd.Series([[1, 2]] * 3)
s

0    [1, 2]
1    [1, 2]
2    [1, 2]
dtype: object
</code></pre>
<p>People are tempted to use <code>apply(pd.Series)</code>. This is <em>horrible</em> in terms of performance.</p>
<pre><code>s.apply(pd.Series)

   0  1
0  1  2
1  1  2
2  1  2
</code></pre>
<p>A better option is to listify the column and pass it to pd.DataFrame.</p>
<pre><code>pd.DataFrame(s.tolist())

   0  1
0  1  2
1  1  2
2  1  2
</code></pre>
<p>&lt;!- -&gt;</p>
<pre><code>%timeit s.apply(pd.Series)
%timeit pd.DataFrame(s.tolist())

2.65 ms ¬± 294 ¬µs per loop (mean ¬± std. dev. of 7 runs, 100 loops each)
816 ¬µs ¬± 40.5 ¬µs per loop (mean ¬± std. dev. of 7 runs, 1000 loops each)
</code></pre>
<hr />
<hr />
<p>Lastly,</p>
<blockquote>
<h2>&quot;Are there any situations where <code>apply</code> is good?&quot;</h2>
</blockquote>
<p>Apply is a convenience function, so there <em>are</em> situations where the overhead is negligible enough to forgive. It really depends on how many times the function is called.</p>
<p><strong>Functions that are Vectorized for Series, but not DataFrames</strong><br />
What if you want to apply a string operation on multiple columns? What if you want to convert multiple columns to datetime? These functions are vectorized for Series only, so they must be <em>applied</em> over each column that you want to convert/operate on.</p>
<pre><code>df = pd.DataFrame(
         pd.date_range('2018-12-31','2019-01-31', freq='2D').date.astype(str).reshape(-1, 2), 
         columns=['date1', 'date2'])
df

       date1      date2
0 2018-12-31 2019-01-02
1 2019-01-04 2019-01-06
2 2019-01-08 2019-01-10
3 2019-01-12 2019-01-14
4 2019-01-16 2019-01-18
5 2019-01-20 2019-01-22
6 2019-01-24 2019-01-26
7 2019-01-28 2019-01-30

df.dtypes

date1    object
date2    object
dtype: object
    
</code></pre>
<p>This is an admissible case for <code>apply</code>:</p>
<pre><code>df.apply(pd.to_datetime, errors='coerce').dtypes

date1    datetime64[ns]
date2    datetime64[ns]
dtype: object
</code></pre>
<p>Note that it would also make sense to <code>stack</code>, or just use an explicit loop. All these options are slightly faster than using <code>apply</code>, but the difference is small enough to forgive.</p>
<pre><code>%timeit df.apply(pd.to_datetime, errors='coerce')
%timeit pd.to_datetime(df.stack(), errors='coerce').unstack()
%timeit pd.concat([pd.to_datetime(df[c], errors='coerce') for c in df], axis=1)
%timeit for c in df.columns: df[c] = pd.to_datetime(df[c], errors='coerce')

5.49 ms ¬± 247 ¬µs per loop (mean ¬± std. dev. of 7 runs, 100 loops each)
3.94 ms ¬± 48.1 ¬µs per loop (mean ¬± std. dev. of 7 runs, 100 loops each)
3.16 ms ¬± 216 ¬µs per loop (mean ¬± std. dev. of 7 runs, 100 loops each)
2.41 ms ¬± 1.71 ms per loop (mean ¬± std. dev. of 7 runs, 1 loop each)
</code></pre>
<p>You can make a similar case for other operations such as string operations, or conversion to category.</p>
<pre><code>u = df.apply(lambda x: x.str.contains(...))
v = df.apply(lambda x: x.astype(category))
</code></pre>
<p>v/s</p>
<pre><code>u = pd.concat([df[c].str.contains(...) for c in df], axis=1)
v = df.copy()
for c in df:
    v[c] = df[c].astype(category)
</code></pre>
<p>And so on...</p>
<hr />
<h3><strong>Converting Series to <code>str</code>: <code>astype</code> versus <code>apply</code></strong></h3>
<p>This seems like an idiosyncrasy of the API. Using <code>apply</code> to convert integers in a Series to string is comparable (and sometimes faster) than using <code>astype</code>.</p>
<p><a href="https://i.sstatic.net/eSs2r.png" rel="noreferrer"><img src="https://i.sstatic.net/eSs2r.png" alt="enter image description here" /></a>
The graph was plotted using the <a href="https://github.com/nschloe/perfplot" rel="noreferrer"><code>perfplot</code></a> library.</p>
<pre><code>import perfplot

perfplot.show(
    setup=lambda n: pd.Series(np.random.randint(0, n, n)),
    kernels=[
        lambda s: s.astype(str),
        lambda s: s.apply(str)
    ],
    labels=['astype', 'apply'],
    n_range=[2**k for k in range(1, 20)],
    xlabel='N',
    logx=True,
    logy=True,
    equality_check=lambda x, y: (x == y).all())
</code></pre>
<p>With floats, I see the <code>astype</code> is consistently as fast as, or slightly faster than <code>apply</code>. So this has to do with the fact that the data in the test is integer type.</p>
<hr />
<h3><strong><code>GroupBy</code> operations with chained transformations</strong></h3>
<p><code>GroupBy.apply</code> has not been discussed until now, but <code>GroupBy.apply</code> is also an iterative convenience function to handle anything that the existing <code>GroupBy</code> functions do not.</p>
<p>One common requirement is to perform a GroupBy and then two prime operations such as a &quot;lagged cumsum&quot;:</p>
<pre><code>df = pd.DataFrame({&quot;A&quot;: list('aabcccddee'), &quot;B&quot;: [12, 7, 5, 4, 5, 4, 3, 2, 1, 10]})
df

   A   B
0  a  12
1  a   7
2  b   5
3  c   4
4  c   5
5  c   4
6  d   3
7  d   2
8  e   1
9  e  10
</code></pre>
<p>&lt;!- -&gt;</p>
<p>You'd need two successive groupby calls here:</p>
<pre><code>df.groupby('A').B.cumsum().groupby(df.A).shift()
 
0     NaN
1    12.0
2     NaN
3     NaN
4     4.0
5     9.0
6     NaN
7     3.0
8     NaN
9     1.0
Name: B, dtype: float64
</code></pre>
<p>Using <code>apply</code>, you can shorten this to a a single call.</p>
<pre><code>df.groupby('A').B.apply(lambda x: x.cumsum().shift())

0     NaN
1    12.0
2     NaN
3     NaN
4     4.0
5     9.0
6     NaN
7     3.0
8     NaN
9     1.0
Name: B, dtype: float64
</code></pre>
<p>It is very hard to quantify the performance because it depends on the data. But in general, <code>apply</code> is an acceptable solution if the goal is to reduce a <code>groupby</code> call (because <code>groupby</code> is also quite expensive).</p>
<hr />
<hr />
<h2>Other Caveats</h2>
<p>Aside from the caveats mentioned above, it is also worth mentioning that <code>apply</code> operates on the first row (or column) twice. This is done to determine whether the function has any side effects. If not, <code>apply</code> may be able to use a fast-path for evaluating the result, else it falls back to a slow implementation.</p>
<pre><code>df = pd.DataFrame({
    'A': [1, 2],
    'B': ['x', 'y']
})

def func(x):
    print(x['A'])
    return x

df.apply(func, axis=1)

# 1
# 1
# 2
   A  B
0  1  x
1  2  y
</code></pre>
<p>This behaviour is also seen in <code>GroupBy.apply</code> on pandas versions &lt;0.25 (it was fixed for 0.25, <a href="https://stackoverflow.com/a/56215416/4909087">see here for more information</a>.)</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, performance, apply, pandas
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>In a team set up, usually, I have faced merge conflicts in <code>package-lock.json</code> and my quick fix has always been to delete the file and regenerate it with <code>npm install</code>. I have not seriously thought about the implication of this fix because it has not caused any perceivable problem before. </p>

<p>Is there a problem with deleting the file and having <code>npm</code> recreate it that way instead of resolving the conflicts manually?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 211<br>
            <strong>Answer:</strong>
            <p><p>Yes, it can and will affect all the project in really bad way.</p>
<ol>
<li><p>if your team does not run <code>npm install</code> after each <code>git pull</code> you all are using different dependencies' versions. So it ends with &quot;but it works for me!!&quot; and &quot;I don't understand why my code does not work for you&quot;</p>
</li>
<li><p>even if all the team runs <code>npm install</code> it still does not mean everything is ok. at some moment you may find your project acts differently. in a part that you have not been changing for years. and after (probably, quite painful) debugging you will find it's because of 3rd level dependency has updated for next major version and this led some breaking changes.</p>
</li>
</ol>
<p>Conclusion: don't ever delete <code>package-lock.json</code>.</p>
<p>Yes, for first level dependencies if we specify them without ranges (like <code>&quot;react&quot;: &quot;16.12.0&quot;</code>) we get the same versions each time we run <code>npm install</code>. But we cannot say the same about dependencies of 2+ level deep (dependencies that our dependencies are relying on), so <code>package-lock.json</code> is really important for stability.</p>
<p>In your case you better do next way:</p>
<ol>
<li>fix conflicts in <code>package.json</code></li>
<li>run <code>npm install</code></li>
</ol>
<p>As easy as it looks. The same to yarn - it fixes lockfile conflict on its own. The only requirement here to resolve all the conflicts in <code>package.json</code> beforehand if any.</p>
<p>Per <a href="https://docs.npmjs.com/cli/v6/configuring-npm/package-locks#resolving-lockfile-conflicts" rel="noreferrer">docs</a> npm will fix merge conflicts in <code>package-lock.json</code> for you.</p>
<p>[Upd from 2021] important! If you use some library already and npm/GitHub account of its maintainer is hacked. And new version with malicious code inside is released. And you have <code>package-lock.json</code> intact. You will be fine. If you drop it you are in trouble.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, node.js, npm, package-lock.json
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>In my project folder I created a <em>venv</em> folder:</p>
<pre><code>python -m venv venv
</code></pre>
<p>When I run command <code>select python interpreter</code> in Visual Studio Code, my venv folder is not shown. I went one level up like suggested <a href="https://github.com/Microsoft/vscode-python/issues/2470" rel="noreferrer">here</a>, but Visual Studio Code doesn't see my virtual interpreter.</p>
<p>What did I miss?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 239<br>
            <strong>Answer:</strong>
            <p><ul>
<li><p>I have been using Visual Studio Code for a while now and found an another way to show virtual environments in Visual Studio Code.</p>
</li>
<li><p>Go to the parent folder in which <code>venv</code> is there through a command prompt.</p>
</li>
<li><p>Type <code>code .</code> and <kbd>Enter</kbd>. [It is working on both Windows and Linux for me.]</p>
</li>
<li><p>That should also show the virtual environments present in that folder.</p>
</li>
</ul>
<p><strong>Original Answer</strong></p>
<p>I almost run into same problem every time I am working on Visual Studio Code using venv. I follow the below steps:</p>
<ol>
<li><p>Go to menu <em>File</em> ‚Üí <em>Preferences</em> ‚Üí <em>Settings</em>.</p>
</li>
<li><p>Click on <em>Workspace settings</em>.</p>
</li>
<li><p>Under <em>Files:Association</em>, in the <em>JSON: Schemas</em> section, you will find <em>Edit in settings.json</em>. Click on that.</p>
</li>
<li><p>Update <code>&quot;python.defaultInterpreterPath&quot;: &quot;Your_venv_path/bin/python&quot;</code> under workspace settings.
(For Windows): Update <code>&quot;python.defaultInterpreterPath&quot;: &quot;Your_venv_path\Scripts\python.exe&quot;</code> under workspace settings.</p>
</li>
<li><p>Restart Visual Studio Code in case if it still doesn't show your <em>venv</em>.</p>
</li>
</ol>
<p><strong>Note:</strong> Use <code>python.pythonPath</code> instead of <code>python.defaultInterpreterPath</code> for older versions.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, virtualenv, visual-studio-code
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>What is the correct way of updating state, in a nested object, in React with Hooks?</p>
<pre><code>export Example = () =&gt; {
  const [exampleState, setExampleState] = useState(
  {masterField: {
        fieldOne: &quot;a&quot;,
        fieldTwo: {
           fieldTwoOne: &quot;b&quot;
           fieldTwoTwo: &quot;c&quot;
           }
        }
   })
</code></pre>
<p>How would one use <code>setExampleState</code> to update <code>exampleState</code> to <code>a</code> (appending an field)?</p>
<pre><code>const a = {
masterField: {
        fieldOne: &quot;a&quot;,
        fieldTwo: {
           fieldTwoOne: &quot;b&quot;,
           fieldTwoTwo: &quot;c&quot;
           }
        },
  masterField2: {
        fieldOne: &quot;c&quot;,
        fieldTwo: {
           fieldTwoOne: &quot;d&quot;,
           fieldTwoTwo: &quot;e&quot;
           }
        },
   }
}

</code></pre>
<p><code>b</code> (Changing values)?</p>
<pre><code>const b = {masterField: {
        fieldOne: &quot;e&quot;,
        fieldTwo: {
           fieldTwoOne: &quot;f&quot;
           fieldTwoTwo: &quot;g&quot;
           }
        }
   })
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 292<br>
            <strong>Answer:</strong>
            <p><p>You can pass new value like this:</p>
<pre><code>  setExampleState({...exampleState,  masterField2: {
        fieldOne: &quot;a&quot;,
        fieldTwo: {
           fieldTwoOne: &quot;b&quot;,
           fieldTwoTwo: &quot;c&quot;
           }
        },
   })
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Feb-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>As far as I understood I can use refs for a single element like this:</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="true">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const { useRef, useState, useEffect } = React;

const App = () =&gt; {
  const elRef = useRef();
  const [elWidth, setElWidth] = useState();

  useEffect(() =&gt; {
    setElWidth(elRef.current.offsetWidth);
  }, []);

  return (
    &lt;div&gt;
      &lt;div ref={elRef} style={{ width: "100px" }}&gt;
        Width is: {elWidth}
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

ReactDOM.render(
  &lt;App /&gt;,
  document.getElementById("root")
);</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;script src="https://unpkg.com/react@16/umd/react.production.min.js"&gt;&lt;/script&gt;
&lt;script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"&gt;&lt;/script&gt;

&lt;div id="root"&gt;&lt;/div&gt;</code></pre>
</div>
</div>
</p>

<p>How can I implement this for an array of elements? Obviously not like that: (I knew it even I did not try it:)</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="true">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const { useRef, useState, useEffect } = React;

const App = () =&gt; {
  const elRef = useRef();
  const [elWidth, setElWidth] = useState();

  useEffect(() =&gt; {
    setElWidth(elRef.current.offsetWidth);
  }, []);

  return (
    &lt;div&gt;
      {[1, 2, 3].map(el =&gt; (
        &lt;div ref={elRef} style={{ width: `${el * 100}px` }}&gt;
          Width is: {elWidth}
        &lt;/div&gt;
      ))}
    &lt;/div&gt;
  );
};

ReactDOM.render(
  &lt;App /&gt;,
  document.getElementById("root")
);</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;script src="https://unpkg.com/react@16/umd/react.production.min.js"&gt;&lt;/script&gt;
&lt;script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"&gt;&lt;/script&gt;

&lt;div id="root"&gt;&lt;/div&gt;</code></pre>
</div>
</div>
</p>

<p>I have seen <a href="https://github.com/facebook/react/issues/14072" rel="noreferrer">this</a> and hence <a href="https://github.com/facebook/react/issues/14490#issuecomment-454973512" rel="noreferrer">this</a>. But, I'm still confused about how to implement that suggestion for this simple case. </p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 168<br>
            <strong>Answer:</strong>
            <p><p>A ref is initially just <code>{ current: null }</code> object. <code>useRef</code> keeps the reference to this object between component renders. <code>current</code> value is primarily intended for component refs but can hold anything.</p>
<p>There should be an array of refs at some point. In case the array length may vary between renders, an array should scale accordingly:</p>
<pre class="lang-js prettyprint-override"><code>const arrLength = arr.length;
const [elRefs, setElRefs] = React.useState([]);

React.useEffect(() =&gt; {
  // add or remove refs
  setElRefs((elRefs) =&gt;
    Array(arrLength)
      .fill()
      .map((_, i) =&gt; elRefs[i] || createRef()),
  );
}, [arrLength]);

return (
  &lt;div&gt;
    {arr.map((el, i) =&gt; (
      &lt;div ref={elRefs[i]} style={...}&gt;
        ...
      &lt;/div&gt;
    ))}
  &lt;/div&gt;
);
</code></pre>
<p>This piece of code can be optimized by unwrapping <code>useEffect</code> and replacing <code>useState</code> with <code>useRef</code> but it should be noted that doing side effects in render function is generally considered a bad practice:</p>
<pre class="lang-js prettyprint-override"><code>const arrLength = arr.length;
const elRefs = React.useRef([]);

if (elRefs.current.length !== arrLength) {
  // add or remove refs
  elRefs.current = Array(arrLength)
    .fill()
    .map((_, i) =&gt; elRefs.current[i] || createRef());
}

return (
  &lt;div&gt;
    {arr.map((el, i) =&gt; (
      &lt;div ref={elRefs.current[i]} style={...}&gt;
        ...
      &lt;/div&gt;
    ))}
  &lt;/div&gt;
);
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>How to push element inside useState array React hook?
Is that as an old method in react state? Or something new?</p>

<p>E.g. <a href="https://stackoverflow.com/questions/41052598/reactjs-array-push-function-not-working-in-setstate">setState push example</a> ?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 809<br>
            <strong>Answer:</strong>
            <p><p>When you use <a href="https://reactjs.org/docs/hooks-reference.html#usestate" rel="noreferrer"><code>useState</code></a>, you can get an update method for the state item:</p>
<pre><code>const [theArray, setTheArray] = useState(initialArray);
</code></pre>
<p>then, when you want to add a new element, you use that function and pass in the new array or a function that will create the new array. Normally the latter, since state updates are asynchronous and sometimes batched:</p>
<pre><code>setTheArray(oldArray =&gt; [...oldArray, newElement]);
</code></pre>
<p>Sometimes you can get away without using that callback form, if you <strong>only</strong> update the array in handlers for certain specific user events like <code>click</code> (but not like <code>mousemove</code>):</p>
<pre><code>setTheArray([...theArray, newElement]);
</code></pre>
<p>The events for which React ensures that rendering is flushed are the &quot;discrete events&quot; listed <a href="https://github.com/facebook/react/blob/master/packages/react-dom/src/events/plugins/SimpleEventPlugin.js" rel="noreferrer">here</a>.</p>
<p>Live Example (passing a callback into <code>setTheArray</code>):</p>
<p><div class="snippet" data-lang="js" data-hide="true" data-console="false" data-babel="true">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const {useState, useCallback} = React;
function Example() {
    const [theArray, setTheArray] = useState([]);
    const addEntryClick = () =&gt; {
        setTheArray(oldArray =&gt; [...oldArray, `Entry ${oldArray.length}`]);
    };
    return [
        &lt;input type="button" onClick={addEntryClick} value="Add" /&gt;,
        &lt;div&gt;{theArray.map(entry =&gt;
          &lt;div&gt;{entry}&lt;/div&gt;
        )}
        &lt;/div&gt;
    ];
}

ReactDOM.render(
    &lt;Example /&gt;,
    document.getElementById("root")
);</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;div id="root"&gt;&lt;/div&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/react/16.8.1/umd/react.production.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.8.1/umd/react-dom.production.min.js"&gt;&lt;/script&gt;</code></pre>
</div>
</div>
</p>
<p>Because the only update to <code>theArray</code> in there is the one in a <code>click</code> event (one of the &quot;discrete&quot; events), I could get away with a direct update in <code>addEntry</code>:</p>
<p><div class="snippet" data-lang="js" data-hide="true" data-console="false" data-babel="true">
<div class="snippet-code snippet-currently-hidden">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const {useState, useCallback} = React;
function Example() {
    const [theArray, setTheArray] = useState([]);
    const addEntryClick = () =&gt; {
        setTheArray([...theArray, `Entry ${theArray.length}`]);
    };
    return [
        &lt;input type="button" onClick={addEntryClick} value="Add" /&gt;,
        &lt;div&gt;{theArray.map(entry =&gt;
          &lt;div&gt;{entry}&lt;/div&gt;
        )}
        &lt;/div&gt;
    ];
}

ReactDOM.render(
    &lt;Example /&gt;,
    document.getElementById("root")
);</code></pre>
<pre class="snippet-code-html lang-html prettyprint-override"><code>&lt;div id="root"&gt;&lt;/div&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/react/16.8.1/umd/react.production.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.8.1/umd/react-dom.production.min.js"&gt;&lt;/script&gt;</code></pre>
</div>
</div>
</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I am working on investigation of one front-end application of medium complexity. At this moment it is written in pure javascript, it has a lot of different event-based messages connecting few main parts of this application.</p>

<p>We decided that we need to implement some kind of state container for this application in scope of further refactoring. Previously I had some experience with redux and ngrx store (which actually follows the same principles).</p>

<p><a href="https://redux.js.org/" rel="noreferrer">Redux</a> is an option for us, but one of the developers proposed using a state-machine based library, in particular the <a href="https://xstate.js.org/docs/" rel="noreferrer">xstate library</a>.</p>

<p>I've never worked with xstate, so I found it interesting and started reading documentation and looking at different examples. Looked promising and powerful, but at some point I understood that I don't see any significant difference between it and redux. </p>

<p>I spent hours trying to find an answer, or any other information comparing xstate and redux. I didn't find any clear information, except some articles like <a href="http://krasimirtsonev.com/blog/article/getting-from-redux-to-state-machine-with-stent" rel="noreferrer">"get from redux to a state machine"</a>, or links to libraries focused on using redux and xstate <strong>together</strong> (quite weird).</p>

<p>If someone can describe the difference or tell me when developers should choose xstate - you are welcome to.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 392<br>
            <strong>Answer:</strong>
            <p><p>I created XState, but I'm not going to tell you whether to use one over the other; that depends on your team. Instead, I'll try to highlight some key differences.</p>
<div class="s-table-container">
<table class="s-table">
<thead>
<tr>
<th>Redux</th>
<th>XState</th>
</tr>
</thead>
<tbody>
<tr>
<td>essentially a state container where events (called <em>actions</em> in Redux) are sent to a reducer which update state</td>
<td>also a state container, but separates finite state (e.g., <code>&quot;loading&quot;</code>, <code>&quot;success&quot;</code>) from &quot;infinite state&quot;, or context (e.g., <code>items: [...]</code>)</td>
</tr>
<tr>
<td>does not dictate how you define your reducers - they are plain functions that return the next state given the current state and event (action)</td>
<td>a &quot;reducer with rules&quot; - you define legal transitions between finite states due to events, and also which actions should be executed in a transition (or on entry/exit from a state)</td>
</tr>
<tr>
<td>does <em>not</em> have a built-in way to handle side-effects; there are many community options, like redux-thunk, redux-saga, etc.</td>
<td>makes actions (side-effects) declarative and explicit - they are part of the <code>State</code> object that is returned on each transition (current state + event)</td>
</tr>
<tr>
<td>currently has no way to visualize transitions between states, since it does not discern between finite and infinite state</td>
<td>has a visualizer: <a href="https://statecharts.github.io/xstate-viz" rel="noreferrer">https://statecharts.github.io/xstate-viz</a> which is feasible due to the declarative nature</td>
</tr>
<tr>
<td>the implicit logic/behavior represented in reducers can't be serialized declaratively (e.g., in JSON)</td>
<td>machine definitions, which represent logic/behavior, can be serialized to JSON, and read from JSON; this makes behavior very portable and configurable by external tools</td>
</tr>
<tr>
<td>not strictly a state machine</td>
<td>adheres strictly to the W3C SCXML specification: <a href="https://www.w3.org/TR/scxml/" rel="noreferrer">https://www.w3.org/TR/scxml/</a></td>
</tr>
<tr>
<td>relies on the developer to manually prevent impossible states</td>
<td>uses statecharts to naturally define boundaries for handling events, which prevents impossible states and can be statically analyzed</td>
</tr>
<tr>
<td>encourages the use of a single, &quot;global&quot; atomic store</td>
<td>encourages the use of an Actor-model-like approach, where there can be many hierarchical statechart/&quot;service&quot; instances that communicate with each other</td>
</tr>
</tbody>
</table>
</div>
<p>I will add more key differences to the docs this week.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, state-machine, redux, xstate
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I have a function that takes a tuple of different lengths as an argument:</p>
<pre><code>from typing import Tuple


def process_tuple(t: Tuple[str]):
    # Do nasty tuple stuff

process_tuple((&quot;a&quot;,))
process_tuple((&quot;a&quot;, &quot;b&quot;))
process_tuple((&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))

</code></pre>
<p>When I annotate function like mentioned above, I get these error messages</p>
<pre><code>fool.py:9: error: Argument 1 to &quot;process_tuple&quot; has incompatible type &quot;Tuple[str, str]&quot;; expected &quot;Tuple[str]&quot;
fool.py:10: error: Argument 1 to &quot;process_tuple&quot; has incompatible type &quot;Tuple[str, str, str]&quot;; expected &quot;Tuple[str]&quot;
</code></pre>
<p><code>process_tuple</code> really works with tuples and I use them as immutable lists of variable length. I haven't found any consensus on this topic on the internet, so I wonder how should I annotate this kind of input.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 283<br>
            <strong>Answer:</strong>
            <p><p>We can annotate variable-length homogeneous tuples using the <code>...</code> literal (aka <code>Ellipsis</code>) like this:</p>
<pre class="lang-py prettyprint-override"><code>def process_tuple(t: Tuple[str, ...]):
    ...
</code></pre>
<p>or for <strong>Python3.9+</strong></p>
<pre class="lang-py prettyprint-override"><code>def process_tuple(t: tuple[str, ...]):
    ...
</code></pre>
<p>After that, the errors should go away.</p>
<p>From the <a href="https://docs.python.org/3/library/typing.html#typing.Tuple" rel="noreferrer">docs</a>:</p>
<blockquote>
<p>To specify a variable-length tuple of homogeneous type, use literal
ellipsis, e.g. <code>Tuple[int, ...]</code>. A plain <code>Tuple</code> is equivalent to
<code>Tuple[Any, ...]</code>, and in turn to <code>tuple</code>.</p>
</blockquote>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, mypy, python-typing
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>I was going through the hooks documentation when I stumbled upon <a href="https://reactjs.org/docs/hooks-reference.html#useref" rel="noreferrer"><code>useRef</code></a>.</p>

<p>Looking at their example‚Ä¶</p>

<pre><code>function TextInputWithFocusButton() {
  const inputEl = useRef(null);
  const onButtonClick = () =&gt; {
    // `current` points to the mounted text input element
    inputEl.current.focus();
  };
  return (
    &lt;&gt;
      &lt;input ref={inputEl} type="text" /&gt;
      &lt;button onClick={onButtonClick}&gt;Focus the input&lt;/button&gt;
    &lt;/&gt;
  );
}
</code></pre>

<p>‚Ä¶it seems like <code>useRef</code> can be replaced with <code>createRef</code>.</p>

<pre><code>function TextInputWithFocusButton() {
  const inputRef = createRef(); // what's the diff?
  const onButtonClick = () =&gt; {
    // `current` points to the mounted text input element
    inputRef.current.focus();
  };
  return (
    &lt;&gt;
      &lt;input ref={inputRef} type="text" /&gt;
      &lt;button onClick={onButtonClick}&gt;Focus the input&lt;/button&gt;
    &lt;/&gt;
  );
}
</code></pre>

<p>Why do I need a hook for refs? Why does <code>useRef</code> exist?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 311<br>
            <strong>Answer:</strong>
            <p><p>The difference is that <code>createRef</code> will always create a new ref. In a class-based component, you would typically put the ref in an instance property during construction (e.g. <code>this.input = createRef()</code>). You don't have this option in a function component. <code>useRef</code> takes care of returning the same ref each time as on the initial rendering.</p>

<p>Here's an example app demonstrating the difference in the behavior of these two functions:</p>

<pre><code>import React, { useRef, createRef, useState } from "react";
import ReactDOM from "react-dom";

function App() {
  const [renderIndex, setRenderIndex] = useState(1);
  const refFromUseRef = useRef();
  const refFromCreateRef = createRef();
  if (!refFromUseRef.current) {
    refFromUseRef.current = renderIndex;
  }
  if (!refFromCreateRef.current) {
    refFromCreateRef.current = renderIndex;
  }
  return (
    &lt;div className="App"&gt;
      Current render index: {renderIndex}
      &lt;br /&gt;
      First render index remembered within refFromUseRef.current:
      {refFromUseRef.current}
      &lt;br /&gt;
      First render index unsuccessfully remembered within
      refFromCreateRef.current:
      {refFromCreateRef.current}
      &lt;br /&gt;
      &lt;button onClick={() =&gt; setRenderIndex(prev =&gt; prev + 1)}&gt;
        Cause re-render
      &lt;/button&gt;
    &lt;/div&gt;
  );
}

const rootElement = document.getElementById("root");
ReactDOM.render(&lt;App /&gt;, rootElement);
</code></pre>

<p><a href="https://codesandbox.io/s/1rvwnj71x3" rel="noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="Edit 1rvwnj71x3"></a></p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Mar-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>I am using functional component with hooks. I need to update state in parent from a child. I am using a prop function in Parent. 
All works fine except my prop function is getting the previous state and not the current state. My prop function gets executed before <strong>useState</strong> hook setting current state.
How can I can I wait for my call back function to be executed after useState call. I am looking for something like <strong>setState(state,callback)</strong> from class based components.</p>

<p>Here is the code snippet:</p>

<pre><code>function Parent() {
  const [Name, setName] = useState("");
  getChildChange = getChildChange.bind(this);
  function getChildChange(value) {
    setName(value);
  }

  return &lt;div&gt; {Name} :
    &lt;Child getChildChange={getChildChange} &gt;&lt;/Child&gt;
  &lt;/div&gt;
}

function Child(props) {
  const [Name, setName] = useState("");
  handleChange = handleChange.bind(this);

  function handleChange(ele) {
    setName(ele.target.value);
    props.getChildChange(collectState());
  }

  function collectState() {
    return Name;
  }

  return (&lt;div&gt;
    &lt;input onChange={handleChange} value={Name}&gt;&lt;/input&gt;
  &lt;/div&gt;);
} 
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 176<br>
            <strong>Answer:</strong>
            <p><p>You can use useEffect/useLayoutEffect to achieve this:</p>
<pre><code>const SomeComponent = () =&gt; {
  const [count, setCount] = React.useState(0)

  React.useEffect(() =&gt; {
    if (count &gt; 1) {
      document.title = 'Threshold of over 1 reached.';
    } else {
      document.title = 'No threshold reached.';
    }
  }, [count]);

  return (
    &lt;div&gt;
      &lt;p&gt;{count}&lt;/p&gt;

      &lt;button type=&quot;button&quot; onClick={() =&gt; setCount(count + 1)}&gt;
        Increase
      &lt;/button&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p>If you want to prevent the callback from running on <a href="https://www.robinwieruch.de/react-useeffect-only-on-update/" rel="noreferrer">first render</a>, adjust the previous version:</p>
<pre><code>const SomeComponent = () =&gt; {
  const [count, setCount] = React.useState(0)

  const didMount = React.useRef(false);

  React.useEffect(() =&gt; {
    if (!didMount.current) {
      didMount.current = true;
      return;
    }

    if (count &gt; 1) {
      document.title = 'Threshold of over 1 reached.';
    } else {
      document.title = 'No threshold reached.';
    }
  }, [count]);

  return (
    &lt;div&gt;
      &lt;p&gt;{count}&lt;/p&gt;

      &lt;button type=&quot;button&quot; onClick={() =&gt; setCount(count + 1)}&gt;
        Increase
      &lt;/button&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p>More about it over <a href="https://www.robinwieruch.de/react-usestate-callback" rel="noreferrer">here</a>.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I want to toggle running only one test, so that I don't have to wait for my other tests to finish to see the result of the one test I'm interested in.</p>
<p>Currently, I comment out my other tests but this is really annoying.</p>
<p>Is there a way to toggle only running one test in <code>Cypress</code>?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 420<br>
            <strong>Answer:</strong>
            <p><h3>to run only one file</h3>
<pre class="lang-sh prettyprint-override"><code>cypress run --spec path/to/file.spec.js
</code></pre>
<p>or using glob patterns:</p>
<pre class="lang-sh prettyprint-override"><code>cypress run --spec 'path/to/files/*.spec.js'
</code></pre>
<blockquote>
<p>Note: you need to <strong>wrap your glob patterns in single quotes</strong> to avoid shell expansion!</p>
</blockquote>
<h3>to run only one test in a file</h3>
<p>You can use a <code>.only</code> as described in <a href="https://docs.cypress.io/guides/core-concepts/writing-and-organizing-tests.html#Excluding-and-Including-Tests" rel="noreferrer">the Cypress docs</a></p>
<pre class="lang-js prettyprint-override"><code>it.only('only run this one', () =&gt; {
  // similarly use it.skip(...) to skip a test
})

it('not this one', () =&gt; {
})
</code></pre>
<p>Also, you can do the same with <code>describe</code> and <code>context</code> blocks</p>
<h3>edit:</h3>
<p>there's also a nice <code>VSCode</code> extension to make adding/removing <code>.only</code>'s easier with keyboard shortcuts. It's called Test Utils (install with <code>ext install chrisbreiding.test-utils</code>). It works with js, coffee, and typescript:</p>
<p><a href="https://i.sstatic.net/2cKuQ.png" rel="noreferrer"><img src="https://i.sstatic.net/2cKuQ.png" alt="enter image description here" /></a></p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, automated-tests, e2e-testing, cypress
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>In my <strong><a href="https://nextjs.org/" rel="noreferrer">Next.js</a></strong> app I can't seem to access <code>window</code>:</p>
<blockquote>
<p>Unhandled Rejection (ReferenceError): window is not defined</p>
</blockquote>
<pre><code>componentWillMount() {
    console.log('window.innerHeight', window.innerHeight);
}
</code></pre>
<p><a href="https://i.sstatic.net/m5ZoN.png" rel="noreferrer"><img src="https://i.sstatic.net/m5ZoN.png" alt="Enter image description here" /></a></p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 102<br>
            <strong>Answer:</strong>
            <p><p>Move the code from <code>componentWillMount()</code> to <a href="https://reactjs.org/docs/react-component.html#componentdidmount" rel="noreferrer"><code>componentDidMount()</code></a>:</p>
<pre><code>componentDidMount() {
  console.log('window.innerHeight', window.innerHeight);
}
</code></pre>
<p>In Next.js, <code>componentDidMount()</code> is executed only on the client where <code>window</code> and other browser specific APIs will be available. From the <a href="https://github.com/zeit/next.js/wiki/FAQ#i-use-a-library-which-throws-window-is-undefined" rel="noreferrer">Next.js wiki</a>:</p>
<blockquote>
<p>Next.js is universal, which means it executes code first server-side,
then client-side. The window object is only present client-side, so if
you absolutely need to have access to it in some React component, you
should put that code in componentDidMount. This lifecycle method will
only be executed on the client. You may also want to check if there
isn't some alternative universal library which may suit your needs.</p>
</blockquote>
<p>Along the same lines, <code>componentWillMount()</code> will be <a href="https://reactjs.org/docs/react-component.html#unsafe_componentwillmount" rel="noreferrer">deprecated</a> in v17 of React, so it effectively will be potentially unsafe to use in the very near future.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, next.js
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I've been running a script on jupyter notebooks for about 26 hour; I haven't really been using my computer for anything else, but it needs to run this program that will take ~30 hours to complete. At about 21 hours in, it stopped saving and my terminal had this:</p>

<pre><code>403 PUT /api/contents/[file.ipynb] (::1): '_xsrf' argument missing from POST
</code></pre>

<p>where [file.ipynb] is the location of my jupyter notebook. It also says:</p>

<pre><code>'_xsrf' argument missing from post
</code></pre>

<p>in the top right part of the notebook again. The program is still running and I don't want to restart jupyter notebook and have to run the program again, as I have a deadline, is there anything else I can do?</p>

<p>I'm using google chrome, but I don't have the LastPass extension or any '%' characters in my code, as another post suggested.</p>

<p>Thanks for any help!</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 761<br>
            <strong>Answer:</strong>
            <p><p>The easiest way I found is this:</p>

<p><a href="https://github.com/nteract/hydrogen/issues/922#issuecomment-405456346" rel="noreferrer">https://github.com/nteract/hydrogen/issues/922#issuecomment-405456346</a></p>

<p>Just open another (non-running, existing) notebook on the same kernel, and the issue is magically gone; you can again save the notebooks that were previously showing the <code>_xsrf</code> error.</p>

<p>If you have already closed the Jupyter home page, you can find a link to it on the terminal from which Jupyter was started.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, google-chrome, anaconda, jupyter-notebook
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>When I am executing the command <code>sess = tf.Session()</code> in Tensorflow 2.0 environment, I am getting an error message as below:</p>
<pre><code>Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
AttributeError: module 'tensorflow' has no attribute 'Session'
</code></pre>
<blockquote>
<p>System Information:</p>
</blockquote>
<ul>
<li>OS Platform and Distribution: Windows 10</li>
<li>Python Version: 3.7.1</li>
<li>Tensorflow Version: 2.0.0-alpha0 (installed with pip)</li>
</ul>
<blockquote>
<p>Steps to reproduce:</p>
<p>Installation:</p>
</blockquote>
<ol>
<li>pip install --upgrade pip</li>
<li><strong>pip install tensorflow==2.0.0-alpha0</strong></li>
<li>pip install keras</li>
<li>pip install numpy==1.16.2</li>
</ol>
<blockquote>
<p>Execution:</p>
</blockquote>
<ol>
<li>Execute command: import tensorflow as tf</li>
<li>Execute command: sess = tf.Session()</li>
</ol>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 404<br>
            <strong>Answer:</strong>
            <p><p>According to <code>TF 1:1 Symbols Map</code>, in TF 2.0 you should use <code>tf.compat.v1.Session()</code> instead of <code>tf.Session()</code></p>

<p><a href="https://docs.google.com/spreadsheets/d/1FLFJLzg7WNP6JHODX5q8BDgptKafq_slHpnHVbJIteQ/edit#gid=0" rel="noreferrer">https://docs.google.com/spreadsheets/d/1FLFJLzg7WNP6JHODX5q8BDgptKafq_slHpnHVbJIteQ/edit#gid=0</a></p>

<p>To get TF 1.x like behaviour in TF 2.0 one can run </p>

<pre><code>import tensorflow.compat.v1 as tf
tf.disable_v2_behavior()
</code></pre>

<p>but then one cannot benefit of many improvements made in TF 2.0. For more details please refer to the migration guide 
<a href="https://www.tensorflow.org/guide/migrate" rel="noreferrer">https://www.tensorflow.org/guide/migrate</a></p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, keras, tensorflow, tensorflow2.0
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Apr-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>I am following a Udemy course on how to register events with hooks, the instructor gave the below code:</p>

<pre class="lang-js prettyprint-override"><code>  const [userText, setUserText] = useState('');

  const handleUserKeyPress = event =&gt; {
    const { key, keyCode } = event;

    if (keyCode === 32 || (keyCode &gt;= 65 &amp;&amp; keyCode &lt;= 90)) {
      setUserText(`${userText}${key}`);
    }
  };

  useEffect(() =&gt; {
    window.addEventListener('keydown', handleUserKeyPress);

    return () =&gt; {
      window.removeEventListener('keydown', handleUserKeyPress);
    };
  });

  return (
    &lt;div&gt;
      &lt;h1&gt;Feel free to type!&lt;/h1&gt;
      &lt;blockquote&gt;{userText}&lt;/blockquote&gt;
    &lt;/div&gt;
  );
</code></pre>

<p>Now it works great but I'm not convinced that this is the right way. The reason is, if I understand correctly, on each and every re-render, events will keep registering and deregistering every time and I simply don't think it is the right way to go about it.</p>

<p>So I made a slight modification to the <code>useEffect</code> hooks to below</p>

<pre class="lang-js prettyprint-override"><code>useEffect(() =&gt; {
  window.addEventListener('keydown', handleUserKeyPress);

  return () =&gt; {
    window.removeEventListener('keydown', handleUserKeyPress);
  };
}, []);
</code></pre>

<p>By having an empty array as the second argument, letting the component to only run the effect once, imitating <code>componentDidMount</code>. And when I try out the result, it's weird that on every key I type, instead of appending, it's overwritten instead. </p>

<p>I was expecting <strong>setUserText(<code>${userText}${key}</code>);</strong> to have new typed key append to current state and set as a new state but instead, it's forgetting the old state and rewriting with the new state.</p>

<p>Was it really the correct way that we should register and deregister event on every re-render?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 183<br>
            <strong>Answer:</strong>
            <p><p>The best way to go about such scenarios is to see what you are doing in the event handler.</p>
<p>If you are simply setting <code>state</code> using previous <code>state</code>, it's best to use the callback pattern and register the event listeners only on <em>initial</em> mount.</p>
<p>If you do not use the <a href="https://reactjs.org/docs/hooks-reference.html#usecallback" rel="noreferrer">callback pattern</a>, the listeners reference along with its lexical scope is being used by the event listener but a new function is created with updated closure on each render; hence in the handler you will not be able to access the updated state</p>
<pre><code>const [userText, setUserText] = useState(&quot;&quot;);
const handleUserKeyPress = useCallback(event =&gt; {
    const { key, keyCode } = event;
    if(keyCode === 32 || (keyCode &gt;= 65 &amp;&amp; keyCode &lt;= 90)){
        setUserText(prevUserText =&gt; `${prevUserText}${key}`);
    }
}, []);

useEffect(() =&gt; {
    window.addEventListener(&quot;keydown&quot;, handleUserKeyPress);
    return () =&gt; {
        window.removeEventListener(&quot;keydown&quot;, handleUserKeyPress);
    };
}, [handleUserKeyPress]);

  return (
      &lt;div&gt;
          &lt;h1&gt;Feel free to type!&lt;/h1&gt;
          &lt;blockquote&gt;{userText}&lt;/blockquote&gt;
      &lt;/div&gt;
  );
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-native, react-hooks
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I have a component that looks like this (very simplified version):</p>

<pre><code>const component = (props: PropTypes) =&gt; {

    const [allResultsVisible, setAllResultsVisible] = useState(false);

    const renderResults = () =&gt; {
        return (
            &lt;section&gt;
                &lt;p onClick={ setAllResultsVisible(!allResultsVisible) }&gt;
                    More results v
                &lt;/p&gt;
                {
                    allResultsVisible &amp;&amp;
                        &lt;section className="entity-block--hidden-results"&gt;
                            ...
                        &lt;/section&gt;
                }
            &lt;/section&gt;
        );
    };

    return &lt;div&gt;{ renderResults() }&lt;/div&gt;;
}
</code></pre>

<p>When I load the page this component is used on, I get this error: <code>Uncaught Invariant Violation: Rendered more hooks than during the previous render.</code> I tried to find an explanation of this error, but my searching returned no results. </p>

<p>When I modify the component slightly:</p>

<pre><code>const component = (props: PropTypes) =&gt; {

    const [allResultsVisible, setAllResultsVisible] = useState(false);

    const handleToggle = () =&gt; {
        setAllResultsVisible(!allResultsVisible);
    }

    const renderResults = () =&gt; {
        return (
            &lt;section&gt;
                &lt;p onClick={ handleToggle }&gt;
                    More results v
                &lt;/p&gt;
                {
                    allResultsVisible &amp;&amp;
                        &lt;section className="entity-block--hidden-results"&gt;
                            ...
                        &lt;/section&gt;
                }
            &lt;/section&gt;
        );
    };

    return &lt;div&gt;{ renderResults() }&lt;/div&gt;;
}
</code></pre>

<p>I no longer get that error. Is it because I included the <code>setState</code> function within the jsx that is returned by <code>renderResults</code>? It would be great to have an explanation of why the fix works.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 64<br>
            <strong>Answer:</strong>
            <p><p>The fix works because the first code sample (the erroring one) invokes a function inside <code>onClick</code>, while the second (the working one) passes a function to <code>onClick</code>. The difference is those all-important parentheses, which in JavaScript mean 'invoke this code'.</p>

<p>Think of it this way: in the first code sample, every time <code>component</code> is rendered, <code>renderResults</code> is invoked. Every time that happens, <code>setAllResultsVisible(!allResultsVisible)</code>, rather than waiting for a click, is called. Since React performs the render on its own schedule, there's no telling how many times that will happen.</p>

<p>From the React docs:</p>

<blockquote>
  <p>With JSX you pass a function as the event handler, rather than a string.</p>
</blockquote>

<p><a href="https://reactjs.org/docs/handling-events.html" rel="noreferrer">React Handling Events Docs</a></p>

<p>Note: I wasn't able to get this exact error message when running the first code sample in a sandbox. My error referred to an infinite loop. Maybe a more recent version of React produces the error described?</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I have one project on <a href="https://gitlab.com" rel="noreferrer">Gitlab</a> and I worked with it for the last few days!</p>

<p>Now i want <strong><code>pull</code></strong> project on my home PC but show me below error : </p>

<pre><code>Invocation failed Unexpected Response from Server:  Unauthorized
        java.lang.RuntimeException: Invocation failed Unexpected Response from Server:  Unauthorized
        at org.jetbrains.git4idea.nativessh.GitNativeSshAskPassXmlRpcClient.handleInput(GitNativeSshAskPassXmlRpcClient.java:34)
        at org.jetbrains.git4idea.nativessh.GitNativeSshAskPassApp.main(GitNativeSshAskPassApp.java:30)
        Caused by: java.io.IOException: Unexpected Response from Server:  Unauthorized
        at org.apache.xmlrpc.LiteXmlRpcTransport.sendRequest(LiteXmlRpcTransport.java:231)
        at org.apache.xmlrpc.LiteXmlRpcTransport.sendXmlRpc(LiteXmlRpcTransport.java:90)
        at org.apache.xmlrpc.XmlRpcClientWorker.execute(XmlRpcClientWorker.java:72)
        at org.apache.xmlrpc.XmlRpcClient.execute(XmlRpcClient.java:194)
        at org.apache.xmlrpc.XmlRpcClient.execute(XmlRpcClient.java:185)
        at org.apache.xmlrpc.XmlRpcClient.execute(XmlRpcClient.java:178)
</code></pre>

<p>My android studio version is <strong>3.4</strong> !</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 66<br>
            <strong>Answer:</strong>
            <p><p>Managed to fix it like this:</p>

<p>AndroidStudio -> Preferences -> Git -> SSH Executable and changed from <code>Native</code> to <code>Built-in</code> and it started working.</p>

<p>Edit: this is for Android Studio 3.4, for 3.6 Volodymyr has an answer below.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, git, android, gitlab, android-studio
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I have to create a function which takes a string, and it should return <code>true</code> or <code>false</code> based on whether the input consists of a repeated character sequence. The length of the given string is always greater than <code>1</code> and the character sequence must have at least one repetition.</p>

<pre><code>"aa" // true(entirely contains two strings "a")
"aaa" //true(entirely contains three string "a")
"abcabcabc" //true(entirely containas three strings "abc")

"aba" //false(At least there should be two same substrings and nothing more)
"ababa" //false("ab" exists twice but "a" is extra so false)
</code></pre>

<p>I have created the below function:</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>function check(str){
  if(!(str.length &amp;&amp; str.length - 1)) return false;
  let temp = '';
  for(let i = 0;i&lt;=str.length/2;i++){
    temp += str[i]
    //console.log(str.replace(new RegExp(temp,"g"),''))
    if(!str.replace(new RegExp(temp,"g"),'')) return true;
  }
  return false;
}

console.log(check('aa')) //true
console.log(check('aaa')) //true
console.log(check('abcabcabc')) //true
console.log(check('aba')) //false
console.log(check('ababa')) //false</code></pre>
</div>
</div>
</p>

<p>Checking of this is part of the real problem. I can't afford a non-efficient solution like this. First of all, it's looping through half of the string.</p>

<p>The second problem is that it is using <code>replace()</code> in each loop which makes it slow. Is there a better solution regarding performance?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 190<br>
            <strong>Answer:</strong>
            <p><p>There‚Äôs a nifty little theorem about strings like these.</p>
<blockquote>
<p>A string consists of the same pattern repeated multiple times if and only if the string is a nontrivial rotation of itself.</p>
</blockquote>
<p>Here, a rotation means deleting some number of characters from the front of the string and moving them to the back. For example, the string <code>hello</code> could be rotated to form any of these strings:</p>
<pre><code>hello (the trivial rotation)
elloh 
llohe 
lohel 
ohell 
</code></pre>
<p>To see why this works, first, assume that a string consists of k repeated copies of a string w. Then deleting the first copy of the repeated pattern (w) from the front of the string and tacking it onto the back will give back the same string. The reverse direction is a bit trickier to prove, but the idea is that if you rotate a string and get back what you started with, you can apply that rotation repeatedly to tile the string with multiple copies of the same pattern (that pattern being the string you needed to move to the end to do the rotation).</p>
<p>Now the question is how to check whether this is the case. For that, there‚Äôs another beautiful theorem we can use:</p>
<blockquote>
<p>If x and y are strings of the same length, then x is a rotation of y if and only if x is a substring of yy.</p>
</blockquote>
<p>As an example, we can see that <code>lohel</code> is a rotation of <code>hello</code> as follows:</p>
<pre><code>hellohello
   ^^^^^
</code></pre>
<p>In our case, we know that every string x will always be a substring of xx (it‚Äôll appear twice, once at each copy of x). So basically we just need to check if our string x is a substring of xx without allowing it to match at the first or halfway character. Here‚Äôs a one-liner for that:</p>
<pre><code>function check(str) {
    return (str + str).indexOf(str, 1) !== str.length;
}
</code></pre>
<p>Assuming <code>indexOf</code> is implemented using a fast string matching algorithm, this will run in time O(n), where n is the length of the input string.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, string, algorithm
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>I'm trying to implement the binary classification example using the IMDb dataset in <strong>Google Colab</strong>. I have implemented this model before. But when I tried to do it again after a few days, it returned a <code>value error: 'Object arrays cannot be loaded when allow_pickle=False'</code> for the load_data() function.</p>
<p>I have already tried solving this, referring to an existing answer for a similar problem: <a href="https://stackoverflow.com/questions/55824625/how-to-fix-object-arrays-cannot-be-loaded-when-allow-pickle-false-in-the-sketc?answertab=votes#tab-top">How to fix &#39;Object arrays cannot be loaded when allow_pickle=False&#39; in the sketch_rnn algorithm</a>.
But it turns out that just adding an allow_pickle argument isn't sufficient.</p>
<p>My code:</p>
<pre><code>from keras.datasets import imdb
(train_data, train_labels), (test_data, test_labels) = imdb.load_data(num_words=10000)
</code></pre>
<p>The error:</p>
<pre><code>ValueError                                Traceback (most recent call last)
&lt;ipython-input-1-2ab3902db485&gt; in &lt;module&gt;()
      1 from keras.datasets import imdb
----&gt; 2 (train_data, train_labels), (test_data, test_labels) = imdb.load_data(num_words=10000)

2 frames
/usr/local/lib/python3.6/dist-packages/keras/datasets/imdb.py in load_data(path, num_words, skip_top, maxlen, seed, start_char, oov_char, index_from, **kwargs)
     57                     file_hash='599dadb1135973df5b59232a0e9a887c')
     58     with np.load(path) as f:
---&gt; 59         x_train, labels_train = f['x_train'], f['y_train']
     60         x_test, labels_test = f['x_test'], f['y_test']
     61 

/usr/local/lib/python3.6/dist-packages/numpy/lib/npyio.py in __getitem__(self, key)
    260                 return format.read_array(bytes,
    261                                          allow_pickle=self.allow_pickle,
--&gt; 262                                          pickle_kwargs=self.pickle_kwargs)
    263             else:
    264                 return self.zip.read(key)

/usr/local/lib/python3.6/dist-packages/numpy/lib/format.py in read_array(fp, allow_pickle, pickle_kwargs)
    690         # The array contained Python objects. We need to unpickle the data.
    691         if not allow_pickle:
--&gt; 692             raise ValueError(&quot;Object arrays cannot be loaded when &quot;
    693                              &quot;allow_pickle=False&quot;)
    694         if pickle_kwargs is None:

ValueError: Object arrays cannot be loaded when allow_pickle=False
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 159<br>
            <strong>Answer:</strong>
            <p><p>Here's a trick to force <code>imdb.load_data</code> to allow pickle by, in your notebook, replacing this line:</p>

<pre class="lang-py prettyprint-override"><code>(train_data, train_labels), (test_data, test_labels) = imdb.load_data(num_words=10000)
</code></pre>

<p>by this:</p>

<pre class="lang-py prettyprint-override"><code>import numpy as np
# save np.load
np_load_old = np.load

# modify the default parameters of np.load
np.load = lambda *a,**k: np_load_old(*a, allow_pickle=True, **k)

# call load_data with allow_pickle implicitly set to true
(train_data, train_labels), (test_data, test_labels) = imdb.load_data(num_words=10000)

# restore np.load for future normal usage
np.load = np_load_old
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, numpy, keras
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: May-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>Are there any benefits in using <code>useMemo</code> (e.g. for an intensive function call) instead of using a combination of <code>useEffect</code> and <code>useState</code>?</p>
<p>Here are two custom hooks that work exactly the same on first sight, besides <code>useMemo</code>'s return value being <code>null</code> on the first render:</p>
<p><a href="https://codesandbox.io/s/nkxolxwzkj" rel="noreferrer"><img src="https://codesandbox.io/static/img/play-codesandbox.svg" alt="See on CodeSandbox" /></a></p>
<h3>useEffect &amp; useState</h3>
<pre class="lang-tsx prettyprint-override"><code>import { expensiveCalculation } from &quot;foo&quot;;

function useCalculate(someNumber: number): number | null {
  const [result, setResult] = useState&lt;number | null&gt;(null);

  useEffect(() =&gt; {
    setResult(expensiveCalculation(someNumber));
  }, [someNumber]);

  return result;
}
</code></pre>
<h3>useMemo</h3>
<pre class="lang-tsx prettyprint-override"><code>import { expensiveCalculation } from &quot;foo&quot;;

function useCalculateWithMemo(someNumber: number): number {
    return useMemo(() =&gt; {
        return expensiveCalculation(someNumber);
    }, [someNumber]);
};
</code></pre>
<p>Both calculate the result each time their parameter <code>someNumber</code> changes, where is the memoization of <code>useMemo</code> kicking in?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 227<br>
            <strong>Answer:</strong>
            <p><p>The <code>useEffect</code> and <code>setState</code> will cause extra renders on every change: the first render will &quot;lag behind&quot; with stale data and then it'll immediately queue up an additional render with the new data.</p>
<hr />
<p>Suppose we have:</p>
<pre><code>// Maybe I'm running this on a literal potato
function expensiveCalculation(x) { return x + 1; };
</code></pre>
<p>Lets suppose <code>x</code> is initially 0:</p>
<ul>
<li>The <code>useMemo</code> version immediately renders <code>1</code>.</li>
<li>The <code>useEffect</code> version renders <code>null</code>, then after the component renders the effect runs, changes the state, and queues up a new render with <code>1</code>.</li>
</ul>
<p>Then if we change <code>x</code> to 2:</p>
<ul>
<li>The <code>useMemo</code> runs and <code>3</code> is rendered.</li>
<li>The <code>useEffect</code> version runs, and renders <code>1</code> again, then the effect triggers and the component reruns with the correct value of <code>3</code>.</li>
</ul>
<p>In terms of how often <code>expensiveCalculation</code> runs, the two have identical behavior, but the <code>useEffect</code> version is causing twice as much rendering which is bad for performance for other reasons.</p>
<p>Plus, the <code>useMemo</code> version is just cleaner and more readable, IMO.  It doesn't introduce unnecessary mutable state and has fewer moving parts.</p>
<p>So you're better off just using <code>useMemo</code> here.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, typescript, reactjs, react-hooks
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>Getting unknown error at Line 1 in <code>pom.xml</code> in Eclipse IDE.
It was working fine till yesterday, but all of a sudden after updating my project from master and after fixing merge conflicts getting "Unknown error" in pom.xml.
Except me, none of my teammates are facing this issue. I also changed the workspace, deleted cache but still no luck. </p>

<p>I am using the h2 database for this project, in spite of inserting values in data.sql, it is not picking up any values and inserting into h2 DB tables. Before this issue, it was working fine. I feel its due to the issue in pom.xml, I am not sure though. Please help</p>

<p>I deleted the existing project and took the latest code from master. After that deleted .m2 folder under users including the repository folder.  I did update project and enabled Forced update of snapshots/releases, maven clean and maven build. But nothing helps.</p>

<p>pom.xml</p>

<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.abc.roster&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-roster-app&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;name&gt;spring-boot-roster-app&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot Roster&lt;/description&gt;

    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.2.0.BUILD-SNAPSHOT&lt;/version&gt;
        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;

    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
        &lt;!-- &lt;start-class&gt;com.infosys.roster.SpringBootRosterAppApplication&lt;/start-class&gt; --&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;!--encryption lib --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jasypt&lt;/groupId&gt;
            &lt;artifactId&gt;jasypt&lt;/artifactId&gt;
            &lt;version&gt;1.9.2&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.jasypt&lt;/groupId&gt;
            &lt;artifactId&gt;jasypt-springsecurity3&lt;/artifactId&gt;
            &lt;version&gt;1.9.0&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.h2database&lt;/groupId&gt;
            &lt;artifactId&gt;h2&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;

        &lt;/dependency&gt;


&lt;!--        &lt;dependency&gt; --&gt;
&lt;!--         &lt;groupId&gt;org.hibernate&lt;/groupId&gt; --&gt;
&lt;!--         &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt; --&gt;
&lt;!--         &lt;version&gt;5.2.10.Final&lt;/version&gt; --&gt;
&lt;!--   &lt;/dependency&gt; --&gt;

        &lt;!-- &lt;dependency&gt; --&gt;
        &lt;!-- &lt;groupId&gt;io.springfox&lt;/groupId&gt; --&gt;
        &lt;!-- &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt; --&gt;
        &lt;!-- &lt;version&gt;2.7.0&lt;/version&gt; --&gt;
        &lt;!-- &lt;scope&gt;compile&lt;/scope&gt; --&gt;
        &lt;!-- &lt;/dependency&gt; --&gt;


        &lt;!-- &lt;dependency&gt; --&gt;
        &lt;!-- &lt;groupId&gt;io.springfox&lt;/groupId&gt; --&gt;
        &lt;!-- &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt; --&gt;
        &lt;!-- &lt;version&gt;2.7.0&lt;/version&gt; --&gt;
        &lt;!-- &lt;scope&gt;compile&lt;/scope&gt; --&gt;
        &lt;!-- &lt;/dependency&gt; --&gt;

        &lt;!-- &lt;dependency&gt; --&gt;
        &lt;!-- &lt;groupId&gt;io.springfox&lt;/groupId&gt; --&gt;
        &lt;!-- &lt;artifactId&gt;springfox-data-rest&lt;/artifactId&gt; --&gt;
        &lt;!-- &lt;version&gt;2.7.0&lt;/version&gt; --&gt;
        &lt;!-- &lt;/dependency&gt; --&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    &lt;repositories&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-snapshots&lt;/id&gt;
            &lt;name&gt;Spring Snapshots&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;true&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/repository&gt;
        &lt;repository&gt;
            &lt;id&gt;spring-milestones&lt;/id&gt;
            &lt;name&gt;Spring Milestones&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
        &lt;/repository&gt;
    &lt;/repositories&gt;
    &lt;pluginRepositories&gt;
        &lt;pluginRepository&gt;
            &lt;id&gt;spring-snapshots&lt;/id&gt;
            &lt;name&gt;Spring Snapshots&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;
            &lt;snapshots&gt;
                &lt;enabled&gt;true&lt;/enabled&gt;
            &lt;/snapshots&gt;
        &lt;/pluginRepository&gt;
        &lt;pluginRepository&gt;
            &lt;id&gt;spring-milestones&lt;/id&gt;
            &lt;name&gt;Spring Milestones&lt;/name&gt;
            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;
        &lt;/pluginRepository&gt;
    &lt;/pluginRepositories&gt;

&lt;/project&gt; 
</code></pre>

<p>application.properties</p>

<pre><code>server.port=
spring.h2.console.path=/h2
spring.h2.console.enabled=true

spring.datasource.url=


spring.datasource.username=
spring.datasource.password=
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.platform=h2
spring.datasource.initialization-mode=always

spring.jpa.hibernate.ddl-auto=update
spring.datasource.continue-on-error=true

spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=false

spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
</code></pre>

<p>Should remove unknown error in pom.xml and also I must be able to populate values in H2 db.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 186<br>
            <strong>Answer:</strong>
            <p><p><strong>answer according to current status</strong></p>

<p><a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=547340#c9" rel="noreferrer">This issue</a> got fixed:</p>

<blockquote>
  <p>Please install the m2e connector for mavenarchiver plugin 0.17.3 from <a href="https://download.eclipse.org/m2e-wtp/releases/1.4/" rel="noreferrer">https://download.eclipse.org/m2e-wtp/releases/1.4/</a></p>
</blockquote>

<hr>

<p><strong>obsolete answer</strong></p>

<p>A less profound change than a downgrade from Spring Boot <code>2.1.5.RELEASE</code> to <code>2.1.4.RELEASE</code> would be downgrading only <a href="https://bugs.eclipse.org/bugs/show_bug.cgi?id=547340" rel="noreferrer">the affected Maven JAR Plugin</a> from <code>3.1.2</code> to <code>3.1.1</code> as long as this bug exists:</p>

<pre><code>&lt;properties&gt;
    &lt;!-- ... --&gt;
    &lt;maven-jar-plugin.version&gt;3.1.1&lt;/maven-jar-plugin.version&gt;
&lt;/properties&gt;
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, pom.xml, maven, spring-boot
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I am working on an Android Studio project with several activities. I am currently trying to read the output from a Java Servlet on localhost but it seems to be crashing due to a socket permission.</p>

<p>I've made a new project, used the exact same code and worked perfectly. So I dont understand why is not willing to work on my project. </p>

<pre><code>public class LoginActivity extends AppCompatActivity {


String apiUrl = "http://10.0.2.2:8080/ProyectService/Servlet?action=login";
EditText username;
EditText password;
AlertDialog dialog;
Usuario session;

@Override
public void onCreate(Bundle savedInstanceState) {
    // Inicializacion de ventana
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);
    getSupportActionBar().hide();

    // Inicializacion de componentes
    username = findViewById(R.id.username);
    password = findViewById(R.id.password);

    // Inicializacion de funcionalidad de botones
    Button button= (Button) findViewById(R.id.login);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            UserLoginTask mAuthTask = new UserLoginTask();
            mAuthTask.execute();
        }
    });

    password = findViewById(R.id.password);
    createAlertDialog("Usuario o Contrase√±a Incorrectos");
    }

    private void createAlertDialog(String message){
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage(message)
            .setTitle("Error");
    dialog = builder.create();
    }



    // ASYNCRONUS NETWORK PROCESS

    public class UserLoginTask extends AsyncTask&lt;String, String, String&gt; {

    @Override
    protected void onPreExecute() {
    }


    @Override
    protected String doInBackground(String... params) {

        // implement API in background and store the response in current variable
        String current = "";
        try {
            URL url;
            HttpURLConnection urlConnection = null;
            try {
                url = new URL(apiUrl);
                System.out.println(apiUrl);
                urlConnection = (HttpURLConnection) url
                        .openConnection();

                InputStream in = urlConnection.getInputStream();

                InputStreamReader isw = new InputStreamReader(in);

                int data = isw.read();
                while (data != -1) {
                    current += (char) data;
                    data = isw.read();
                    //System.out.print(current);

                }
                System.out.print(current);
                // return the data to onPostExecute method
                return current;

            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                if (urlConnection != null) {
                    urlConnection.disconnect();
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
            return "Exception: " + e.getMessage();
        }
        return current;
        }
    }

    protected void onPostExecute(String success) {
        Log.i(success, "");
       //attemptLogin();
    }
}
</code></pre>

<p>I Expect it to read the data but it crashes at this line: </p>

<pre><code>InputStream in = urlConnection.getInputStream();
</code></pre>

<p>This is the error output:</p>

<pre><code>java.net.SocketException: socket failed: EPERM (Operation not permitted)
at java.net.Socket.createImpl(Socket.java:492)
at java.net.Socket.getImpl(Socket.java:552)
at java.net.Socket.setSoTimeout(Socket.java:1180)
at com.android.okhttp.internal.io.RealConnection.connectSocket(RealConnection.java:143)
at com.android.okhttp.internal.io.RealConnection.connect(RealConnection.java:116)
at com.android.okhttp.internal.http.StreamAllocation.findConnection(StreamAllocation.java:186)
at com.android.okhttp.internal.http.StreamAllocation.findHealthyConnection(StreamAllocation.java:128)
at com.android.okhttp.internal.http.StreamAllocation.newStream(StreamAllocation.java:97)
at com.android.okhttp.internal.http.HttpEngine.connect(HttpEngine.java:289)
at com.android.okhttp.internal.http.HttpEngine.sendRequest(HttpEngine.java:232)
at com.android.okhttp.internal.huc.HttpURLConnectionImpl.execute(HttpURLConnectionImpl.java:465)
at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:411)
at com.android.okhttp.internal.huc.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:248)
at com.example.controller.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:114)
at com.example.controller.LoginActivity$UserLoginTask.doInBackground(LoginActivity.java:93)
at android.os.AsyncTask$3.call(AsyncTask.java:378)
at java.util.concurrent.FutureTask.run(FutureTask.java:266)
at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:289)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)
at java.lang.Thread.run(Thread.java:919)
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 817<br>
            <strong>Answer:</strong>
            <p><p>Your app needs additional permissions and/or to be reinstalled.</p>
<p>Add additional permissions to <code>AndroidManifest.xml</code> within the <code>&lt;manifest&gt;</code> section:</p>
<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
</code></pre>
<p>To reinstall, uninstall the app from the emulator or physical connected device and then run it again.  (If adding permissions, make sure to reinstall <em>afterwards</em>.)</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, android
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I've initialized a state that is an array, and when I update it my component does not re-render. Here is a minimal proof-of-concept:</p>
<pre><code>function App() {
  const [numbers, setNumbers] = React.useState([0, 1, 2, 3]);
  console.log(&quot;rendering...&quot;);
  return (
    &lt;div className=&quot;App&quot;&gt;
      {numbers.map(number =&gt; (
        &lt;p&gt;{number}&lt;/p&gt;
      ))}
      &lt;input
        type=&quot;text&quot;
        value={numbers[0].toString()}
        onChange={newText =&gt; {
          let old = numbers;
          old[0] = 1;
          setNumbers(old);
        }}
      /&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p>Based on this code, it seems that the input should contain the number 0 to start, and any time it is changed, the state should change too. After entering &quot;02&quot; in the input, the App component does not re-render. However, if I add a setTimeout in the onChange function which executes after 5 seconds, it shows that numbers has indeed been updated.</p>
<p>Any thoughts on why the component doesn't update?</p>
<p>Here is a <a href="https://codesandbox.io/s/jovial-meitner-v2f0l" rel="noreferrer">CodeSandbox</a> with the proof of concept.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 561<br>
            <strong>Answer:</strong>
            <p><p>You're calling <code>setNumbers</code> and passing it the array it already has. You've changed one of its values but it's still the same array, and I suspect React doesn't see any reason to re-render because state hasn't changed; the new array is the old array.</p>

<p>One easy way to avoid this is by spreading the array into a new array:</p>

<pre><code>setNumbers([...old])
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>The hash of infinity in Python has digits matching <a href="https://en.wikipedia.org/wiki/Pi" rel="noreferrer">pi</a>:</p>

<pre><code>&gt;&gt;&gt; inf = float('inf')
&gt;&gt;&gt; hash(inf)
314159
&gt;&gt;&gt; int(math.pi*1e5)
314159
</code></pre>

<p>Is that just a coincidence or is it intentional?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 50<br>
            <strong>Answer:</strong>
            <p><p><code>_PyHASH_INF</code> is <a href="https://github.com/python/cpython/blob/35d5068928ab5485e5f28b60b1e33062bc2c46cc/Include/pyhash.h#L31" rel="nofollow noreferrer">defined as a constant</a> equal to <code>314159</code>.</p>
<p>I can't find any discussion about this, or comments giving a reason.  I think it was chosen more or less arbitrarily.  I imagine that as long as they don't use the same meaningful value for other hashes, it shouldn't matter.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, math, floating-point, hash, pi
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Jun-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>Here is my code for a tooltip that toggles the CSS property <code>display: block</code> on MouseOver and on Mouse Out <code>display: none</code>.</p>
<pre><code> it('should show and hide the message using onMouseOver and onMouseOut events respectively', () =&gt; {
    const { queryByTestId, queryByText } = render(
      &lt;Tooltip id=&quot;test&quot; message=&quot;test&quot; /&gt;,
    )
    fireEvent.mouseOver(queryByTestId('tooltip'))
    expect(queryByText('test')).toBeInTheDocument()
    fireEvent.mouseOut(queryByTestId('tooltip'))
    expect(queryByText('test')).not.toBeInTheDocument()
    cleanup()
  })
</code></pre>
<p>I keep getting the error  TypeError: expect(...).toBeInTheDocument is not a function</p>
<p>Has anyone got any ideas why this is happening? My other tests to render and snapshot the component all work as expected. As do the queryByText and queryByTestId.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 464<br>
            <strong>Answer:</strong>
            <p><p><code>toBeInTheDocument</code> is not part of RTL. You need to install <a href="https://github.com/testing-library/jest-dom/" rel="noreferrer">jest-dom</a> to enable it.</p>
<p>And then import it in your test files by:</p>
<pre class="lang-tsx prettyprint-override"><code>import '@testing-library/jest-dom'
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, unit-testing, reactjs, jestjs, react-testing-library
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I am trying to plot a simple graph using pyplot, e.g.:</p>
<pre><code>import matplotlib.pyplot as plt
plt.plot([1,2,3],[5,7,4])
plt.show()
</code></pre>
<p>but the figure does not appear and I get the following message:</p>
<pre><code>UserWarning: Matplotlib is currently using agg, which is a non-GUI backend, so cannot show the figure.
</code></pre>
<p>I found and tried some advice to re-configure the &quot;backend&quot; mentioned in that warning, like so:</p>
<pre><code>import matplotlib
matplotlib.use('TkAgg')
import matplotlib.pyplot as plt
</code></pre>
<p>but this gives me an error message:</p>
<pre><code>ModuleNotFoundError: No module named 'tkinter'
</code></pre>
<p>I assumed that I had to install this module separately, but <code>pip install tkinter</code> does not work:</p>
<pre><code>Collecting tkinter
  Could not find a version that satisfies the requirement tkinter (from versions: )
No matching distribution found for tkinter
</code></pre>
<p>How can I make Matplotlib display the graph?</p>
<hr />
<p><sub><strong>See also</strong>: <a href="https://stackoverflow.com/questions/76105218">Why does tkinter (or turtle) seem to be missing or broken? Shouldn&#39;t it be part of the standard library?</a> . This question is not a duplicate, because the answers discuss other backends besides the Tkinter one.</sub></p>
<p><sub>Also see <a href="https://stackoverflow.com/questions/37604289">_tkinter.TclError: no display name and no $DISPLAY environment variable</a> for issues with attempts to use Matplotlib remotely.</sub></p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 605<br>
            <strong>Answer:</strong>
            <p><h3>Solution 1: is to install the GUI backend <code>tk</code></h3>
<p>I found a solution to my problem (thanks to the help of <a href="https://stackoverflow.com/users/4124317/importanceofbeingernest">ImportanceOfBeingErnest</a>).</p>
<p>All I had to do was to install <code>tkinter</code> through the Linux bash terminal using the following command:</p>
<pre><code>sudo apt-get install python3-tk
</code></pre>
<p>instead of installing it with <code>pip</code> or directly in the virtual environment in Pycharm.</p>
<h3>Solution 2: install any of the <code>matplotlib</code> supported GUI backends</h3>
<ul>
<li>solution 1 works fine because you get a GUI backend... in this case the <code>TkAgg</code></li>
<li>however you can also fix the issue by installing any of the matplolib GUI backends like <code>Qt5Agg</code>, <code>GTKAgg</code>, <code>Qt4Agg</code>, etc
<ul>
<li>for example <code>pip install pyqt5</code> will fix the issue also</li>
</ul>
</li>
</ul>
<p>NOTE:</p>
<ul>
<li>usually this error appears when you pip install matplotlib and you are trying to display a plot in a GUI window and you do not have a python module for GUI display.</li>
<li>The authors of <code>matplotlib</code> made the pypi software deps not depend on any GUI backend because some people <strong>need</strong> <code>matplotlib</code> without any GUI backend.</li>
</ul>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, matplotlib, pycharm
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I have <code>miniconda3</code> installed and since I would like to have an environment with python version 3.3.0, I create it via</p>
<pre><code>conda create -n &quot;myenv&quot; python=3.3.0
</code></pre>
<p>However when I activate the environment via</p>
<pre><code>conda activate myenv
</code></pre>
<p>python has version 2.7.15 and path</p>
<pre><code>/usr/bin/python
</code></pre>
<p>and ipython has python version 3.6.8 and path</p>
<pre><code>/home/myname/.local/bin/ipython
</code></pre>
<p>I can access the correct python with <code>python3</code> which is at</p>
<pre><code>/home/myname/miniconda3/envs/myenv/bin/python3
</code></pre>
<p>however, <code>ipython3</code> has python version 3.6.8 again.</p>
<pre><code>conda install python=3.3.0
</code></pre>
<p>left the situation unchanged.</p>
<p>A solution would be to open IPython via</p>
<pre><code>python3 -m IPython
</code></pre>
<p>however, while this works fine for <code>python</code> here I get the error message</p>
<pre><code>/home/myname/miniconda3/envs/myenv/bin/python3: No module named IPython
</code></pre>
<p>Is it possible to access with the commands <code>python</code> and <code>ipython</code> both python version 3.3.0 in that specific environment, i.e. not by setting an alias in the <code>.bashrc</code>?</p>
<p>EDIT:</p>
<p>Turns out that this problem does not occur if you select version 3.3 instead of 3.3.0 together with @ilmarinen's answer</p>
<pre><code>conda create -n &quot;myenv&quot; python=3.3 ipython
</code></pre>
<p>everything works fine and <code>python</code> as well as <code>ipython</code> result to version python <code>3.3.5</code>.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 267<br>
            <strong>Answer:</strong>
            <p><p>You need to install ipython as well into your given environment</p>

<pre><code>conda create -n "myenv" python=3.3.0 ipython
</code></pre>

<p>The conda environments are prepended to your PATH variable, so when you are trying to run the executable "ipython", Linux will not find "ipython" in your activated environment (since it doesn't exist there), but it will continue searching for it, and eventually find it wherever you have it installed.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, conda, miniconda
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I have some vanilla javascript code that takes a string input, splits the string into characters, and then matches those characters to a key on an object.</p>
<pre class="lang-js prettyprint-override"><code>DNATranscriber = {
    &quot;G&quot;: &quot;C&quot;,
    &quot;C&quot;: &quot;G&quot;,
    &quot;T&quot;: &quot;A&quot;,
    &quot;A&quot;: &quot;U&quot;
}
function toRna(sequence){
    const sequenceArray = [...sequence];
    const transcriptionArray = sequenceArray.map(character =&gt;{
        return this.DNATranscriber[character];
    });

    return transcriptionArray.join(&quot;&quot;);
}

console.log(toRna(&quot;ACGTGGTCTTAA&quot;)); //Returns UGCACCAGAAUU
</code></pre>
<p>This works as expected. I'd now like to convert this to typescript.</p>
<pre class="lang-js prettyprint-override"><code>class Transcriptor {
    DNATranscriber = {
       G: &quot;C&quot;,
       C: &quot;G&quot;,
       T: &quot;A&quot;,
       A: &quot;U&quot;
    }
    toRna(sequence: string) {
        const sequenceArray = [...sequence];
        const transcriptionArray = sequenceArray.map(character =&gt;{
            return this.DNATranscriber[character];
        });
    }
}

export default Transcriptor
</code></pre>
<p>But I'm getting the following error.</p>
<blockquote>
<p>Element implicitly has an 'any' type because expression of type 'string' &gt;can't be used to index type '{ &quot;A&quot;: string; }'.
No index signature with a parameter of type 'string' was found on type &gt;'{ &quot;A&quot;: string; }'.ts(7053)</p>
</blockquote>
<p>I thought that the issue was that I needed my object key to be a string. But converting them to strings didn't work.</p>
<pre class="lang-js prettyprint-override"><code>DNATranscriber = {
    &quot;G&quot;: &quot;C&quot;,
    &quot;C&quot;: &quot;G&quot;,
    &quot;T&quot;: &quot;A&quot;,
    &quot;A&quot;: &quot;U&quot;
}
</code></pre>
<p>I'm quite confused by this. It says that no index signature with a type of string exists on my object. But I'm sure that it does. What am I doing wrong?</p>
<p>Edit - I solved this by giving the DNATranscriber object a type of any.</p>
<pre class="lang-js prettyprint-override"><code>DNATranscriber: any = {
    &quot;G&quot;: &quot;C&quot;,
    &quot;C&quot;: &quot;G&quot;,
    &quot;T&quot;: &quot;A&quot;,
    &quot;A&quot;: &quot;U&quot;
}
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 127<br>
            <strong>Answer:</strong>
            <p><p>You can fix the errors by validating your input, which is something you should do regardless of course.</p>
<p>The following typechecks correctly, via type guarding validations</p>
<pre><code>const DNATranscriber = {
    G: 'C',
    C: 'G',
    T: 'A',
    A: 'U'
};

export default class Transcriptor {
    toRna(dna: string) {
        const codons = [...dna];
        if (!isValidSequence(codons)) {
            throw Error('invalid sequence');
        }
        const transcribedRNA = codons.map(codon =&gt; DNATranscriber[codon]);
        return transcribedRNA;
    }
}

function isValidSequence(values: string[]): values is Array&lt;keyof typeof DNATranscriber&gt; {
    return values.every(isValidCodon);
}
function isValidCodon(value: string): value is keyof typeof DNATranscriber {
    return value in DNATranscriber;
}
</code></pre>
<p><a href="https://www.typescriptlang.org/play/?#code/MYewdgzgLgBAIgOQIIBUBOBDSw0EsBGApmjALwwDeAUDLTAOIBcMA5AMIsA0NdbzL9Lj1op%20SIXRhJ%20AVRZUAvgG4qVQgA8ADiDSwAJoQBmGAK4AbWMDMYIEGOiwQcuTVB2VhMNwCUwGABR6fszQeGAA5gCUHpKSoJCWIHrgduQA2gB0WUEYALoqsXS4hjD%20AIS4EABqGGa4egDKhACOJoRgwIT%20oMmQkdHUhYVQABZoIADuMACiaONo-iy4YAButfUwEC1tHYQskQVDCp5xKbBQmNh4RHreyGQwPSkZALYYmt1J4GQAfPDIDiuBGIaSeYFyBxOdDQhCgJjQYC8lyc10It2Qh1ox2OVEMJg6UFw30qNTqjW27U6-jWZjaEBCF2W4TSEOYNLpMEqUjmGAAngAeADWhF5IBKUF5mkIYv%20qGRziIaD%20g2hsPhiPZhAgGUIK2IvP8JPWejYXzAkOOeIJRMRRrJpt61NqbQZYSibOdhE5dmFovFkulJUQcscCuIMVVcIRME1nMRwcBKOBaBUCiAA" rel="noreferrer">Playground Link</a></p>
<p>It is worth mentioning that you seem to be under the misapprehention that converting JavaScript to TypeScript involves using classes.</p>
<p>In the following, more idiomatic version, we leverage TypeScript to improve clarity and gain stronger typing of base pair mappings without changing the implementation. We use a <code>function</code>, just like the original, because it makes sense. This is important! Converting JavaScript to TypeScript has nothing to do with classes, it has to do with static types.</p>
<pre><code>const DNATranscriber = {
    G: 'C',
    C: 'G',
    T: 'A',
    A: 'U'
};

export default function toRna(dna: string) {
    const codons = [...dna];
    if (!isValidSequence(codons)) {
        throw Error('invalid sequence');
    }
    const transcribedRNA = codons.map(codon =&gt; DNATranscriber[codon]);
    return transcribedRNA;
}

function isValidSequence(values: string[]): values is Array&lt;keyof typeof DNATranscriber&gt; {
    return values.every(isValidCodon);
}
function isValidCodon(value: string): value is keyof typeof DNATranscriber {
    return value in DNATranscriber;
}
</code></pre>
<p><a href="https://www.typescriptlang.org/play/?#code/MYewdgzgLgBAIgOQIIBUBOBDSw0EsBGApmjALwwDeAUDLTAOIBcMA5AMIsA0NdbzL9Lj1op%20SIXRhJ%20AVRZUAvgG4qVQgA8ADiDSwAJoQBmGAK4AbWIZNhgUXOBhQQAJTAYAFHrfNoeMAHMASkphGFBIWFA9cAgyGABtADpkrwwAXRVJXEMYdwBCXAgANQwzXD0AZUIARxNCG0J3KJjA4OpJSSgACzQQAHcYAFE0XrR3FlwwADdS8pgIGrqGlkDMugVQ8OhHTGw8Ij1nZDjmyESAWwxNJpBosDIAPnhkdCwIHAJieNO01dC0QhQExoe5QXbvfaEQ7IFQbKhWGx2ByFEplSqLerARozMx1CA%20MGTfzxX7MHF4mCFKQjDAATwAPABrQi0kA5KC0zSENnPVDgj5ENBPdp0AFAkEwcmECCJQhTYi09wo2Z6Ni3cB-DYI2z2e7KtFqu7uKUEvxBMmlOqU2LM1nszncnKIPlvAXEEKSMXA%205Syn3Z2vPafNCwoA" rel="noreferrer">Playground Link</a></p>
<p><strong>Update</strong>:</p>
<p>Since TypeScript 3.7, we can write this more expressively, formalizing the correspondence between input validation and its type implication using <em>assertion signatures</em>.</p>
<pre><code>const DNATranscriber = {
    G: 'C',
    C: 'G',
    T: 'A',
    A: 'U'
} as const;

type DNACodon = keyof typeof DNATranscriber;
type RNACodon = typeof DNATranscriber[DNACodon];

export default function toRna(dna: string): RNACodon[] {
    const codons = [...dna];
    validateSequence(codons);
    const transcribedRNA = codons.map(codon =&gt; DNATranscriber[codon]);
    return transcribedRNA;
}

function validateSequence(values: string[]): asserts values is DNACodon[] {
    if (!values.every(isValidCodon)) {
        throw Error('invalid sequence');    
    }
}
function isValidCodon(value: string): value is DNACodon {
    return value in DNATranscriber;
}
</code></pre>
<p><a href="https://www.typescriptlang.org/play/?#code/MYewdgzgLgBAIgOQIIBUBOBDSw0EsBGApmjALwwDeAUDLTAOIBcMA5AMIsA0NdbzL9Lj1op%20SIXRhJ%20AVRZUAvjAwQYoSFADcVKlACeAB0LxkbEABNwZGAGtCekADMY%20o05OpM2PETTbXxgBKphZW5AHuiJ5YEDgExADaUWaWYAC62lSEAB4GIGiw5oSOGACuADawjqVgwFC4VlAggWAYABTmrczQeGAA5gCUzMFIKeAJaZTCauDQM6mq5AkAdKudGBnTAG4Y5bjmGFCEAMqEAI6lhLWEbaALA9qS6nNQXrE%20hOYj1nezywC2GAMt1CYDIAD4POgYnFfAlfukHtM0IQoKU0GDXjCPl9kNoFDpqrV6lYdnsDkdThcrsAbmTLhBuq9cP0JkNlBAIMQoKp6YRVLhVMlQRMppJcM42gBCPkQZaELbEPRtQUANV2%20zGYAGAzFkjoUAAFmgQAB3GAAUTQJrQbRYLLJ%20xgXOp1xYD0k0wJBKJdQaYLVGvMWrafKZvUGzD5MEFHi1etoKLRGJg0ZZULesOI%20KAA" rel="noreferrer">Playground Link</a></p>
<p>You can read more about <em>assertion signatures</em> in the <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html" rel="noreferrer">TypeScript 3.7 release notes</a>.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, typescript
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>I want to show some records in a table using React but I got this error:</p>
<blockquote>
<p>Invalid hook call. Hooks can only be called inside of the body of a
function component. This could happen for one of the following
reasons:</p>
<ol>
<li>You might have mismatching versions of React and the renderer (such as React DOM)</li>
<li>You might be breaking the Rules of Hooks</li>
<li>You might have more than one copy of React in the same app See for tips about how to debug and
fix this problem.</li>
</ol>
</blockquote>
<pre class="lang-js prettyprint-override"><code>import React, { Component } from 'react';
import { makeStyles } from '@material-ui/core/styles';
import Table from '@material-ui/core/Table';
import TableBody from '@material-ui/core/TableBody';
import TableCell from '@material-ui/core/TableCell';
import TableHead from '@material-ui/core/TableHead';
import TableRow from '@material-ui/core/TableRow';
import Paper from '@material-ui/core/Paper';

const useStyles = makeStyles(theme =&gt; ({
  root: {
    width: '100%',
    marginTop: theme.spacing(3),
    overflowX: 'auto'
  },
  table: {
    minWidth: 650
  }
}));

class allowance extends Component {
  constructor() {
    super();
    this.state = {
      allowances: []
    };

  }

  componentWillMount() {
    fetch('http://127.0.0.1:8000/allowances')
      .then(data =&gt; {
        return data.json();
      })
      .then(data =&gt; {
        this.setState({
          allowances: data
        });
        console.log('allowance state', this.state.allowances);
      });
  }

  render() {
    const classes = useStyles();
    return (&lt;Paper className={classes.root}&gt;
        &lt;Table className={classes.table}&gt;
          &lt;TableHead&gt;
            &lt;TableRow&gt;
              &lt;TableCell&gt;Allow ID&lt;/TableCell&gt;
              &lt;TableCell align=&quot;right&quot;&gt;Description&lt;/TableCell&gt;
              &lt;TableCell align=&quot;right&quot;&gt;Allow Amount&lt;/TableCell&gt;
              &lt;TableCell align=&quot;right&quot;&gt;AllowType&lt;/TableCell&gt;
            &lt;/TableRow&gt;
          &lt;/TableHead&gt;
          &lt;TableBody&gt; {
            this.state.allowances.map(row =&gt; (&lt;TableRow key={row.id}&gt;
                &lt;TableCell component=&quot;th&quot; scope=&quot;row&quot;&gt;{row.AllowID}&lt;/TableCell&gt;
                &lt;TableCell align=&quot;right&quot;&gt;{row.AllowDesc}&lt;/TableCell&gt;
                &lt;TableCell align=&quot;right&quot;&gt;{row.AllowAmt}&lt;/TableCell&gt;
                &lt;TableCell align=&quot;right&quot;&gt;{row.AllowType}&lt;/TableCell&gt;
              &lt;/TableRow&gt;
            ))
          }
          &lt;/TableBody&gt;
        &lt;/Table&gt;
      &lt;/Paper&gt;
    );
  }

}

export default allowance;
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 114<br>
            <strong>Answer:</strong>
            <p><p>You can only call hooks from React functions. Read more <a href="https://reactjs.org/docs/hooks-rules.html#only-call-hooks-from-react-functions" rel="nofollow noreferrer">here</a>.</p>
<p>Just convert the <code>Allowance</code> class component to a functional component.</p>
<p><a href="https://codesandbox.io/s/amazing-poitras-k2fuf" rel="nofollow noreferrer">Working CodeSandbox demo</a>.</p>
<pre class="lang-js prettyprint-override"><code>const Allowance = () =&gt; {
  const [allowances, setAllowances] = useState([]);

  useEffect(() =&gt; {
    fetch('http://127.0.0.1:8000/allowances')
      .then(data =&gt; {
        return data.json();
      })
      .then(data =&gt; {
        setAllowances(data);
      })
      .catch(err =&gt; {
        console.log(123123);
      });
  }, []);

  const classes = useStyles();
  return (&lt;Paper className={classes.root}&gt;
      &lt;Table className={classes.table}&gt;
        &lt;TableHead&gt;
          &lt;TableRow&gt;
            &lt;TableCell&gt; Allow ID &lt;/TableCell&gt;
            &lt;TableCell align=&quot;right&quot;&gt; Description &lt;/TableCell&gt;
            &lt;TableCell align=&quot;right&quot;&gt; Allow Amount &lt;/TableCell&gt;
            &lt;TableCell align=&quot;right&quot;&gt; AllowType &lt;/TableCell&gt;
          &lt;/TableRow&gt;
        &lt;/TableHead&gt;
        &lt;TableBody&gt;{
          allowances.map(row =&gt; (&lt;TableRow key={row.id}&gt;
              &lt;TableCell component=&quot;th&quot; scope=&quot;row&quot;&gt;{row.AllowID}&lt;/TableCell&gt;
              &lt;TableCell align=&quot;right&quot;&gt; {row.AllowDesc}&lt;/TableCell&gt;
              &lt;TableCell align=&quot;right&quot;&gt; {row.AllowAmt}&lt;/TableCell&gt;
              &lt;TableCell align=&quot;right&quot;&gt;{row.AllowType}&lt;/TableCell&gt;
            &lt;/TableRow&gt;
          ))
        }
        &lt;/TableBody&gt;
      &lt;/Table&gt;
    &lt;/Paper&gt;
  );
};

export default Allowance;
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, material-ui, react-hooks
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Jul-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>I am reading through a python script that takes an input of XML files and outputs an XML file. However, I do not understand the printing syntax. Can someone please explain what <code>f</code> in <code>print(f&quot;...&quot;)</code> does?</p>
<pre class="lang-py prettyprint-override"><code>args = parser.parser_args()
    
print(f&quot;Input directory: {args.input_directory}&quot;)
print(f&quot;Output directory: {args.output_directory}&quot;)
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 142<br>
            <strong>Answer:</strong>
            <p><p>The <code>f</code> means <a href="https://docs.python.org/3.6/reference/lexical_analysis.html#formatted-string-literals" rel="noreferrer">Formatted string literals</a>  and it's new in <code>Python 3.6</code>.</p>
<hr />
<blockquote>
<p>A <em>formatted string literal</em> or <em>f-string</em> is a string literal that is
prefixed with <code>f</code> or <code>F</code>. These strings may contain replacement
fields, which are expressions delimited by curly braces <code>{}</code>. While
other string literals always have a constant value, formatted strings
are really expressions evaluated at run time.</p>
</blockquote>
<hr />
<p>Some examples of formatted string literals:</p>
<pre><code>&gt;&gt;&gt; name = &quot;Fred&quot;
&gt;&gt;&gt; f&quot;He said his name is {name}.&quot;
&quot;He said his name is Fred.&quot;

&gt;&gt;&gt; name = &quot;Fred&quot;
&gt;&gt;&gt; f&quot;He said his name is {name!r}.&quot;
&quot;He said his name is Fred.&quot;

&gt;&gt;&gt; f&quot;He said his name is {repr(name)}.&quot; # repr() is equivalent to !r
&quot;He said his name is Fred.&quot;

&gt;&gt;&gt; width = 10
&gt;&gt;&gt; precision = 4
&gt;&gt;&gt; value = decimal.Decimal(&quot;12.34567&quot;)
&gt;&gt;&gt; f&quot;result: {value:{width}.{precision}}&quot; # nested fields
result: 12.35

&gt;&gt;&gt; today = datetime(year=2023, month=1, day=27)
&gt;&gt;&gt; f&quot;{today:%B %d, %Y}&quot; # using date format specifier
January 27, 2023

&gt;&gt;&gt; number = 1024
&gt;&gt;&gt; f&quot;{number:#0x}&quot; # using integer format specifier
0x400
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, printing, f-string
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>Oke, I upgraded Angular from 6 to 8. But I stil get errors.</p>
<p>I found on internet a solution that for a lot of users helped. But in this case it doesn't helped me.</p>
<p>So my package.json file looks like this:</p>
<pre class="lang-json prettyprint-override"><code>{
  &quot;name&quot;: &quot;vital10-frontend&quot;,
  &quot;version&quot;: &quot;0.55.0&quot;,
  &quot;license&quot;: &quot;Unlicensed&quot;,
  &quot;scripts&quot;: {
    &quot;ng&quot;: &quot;ng&quot;,
    &quot;start&quot;: &quot;ng serve&quot;,
    &quot;hmr&quot;: &quot;ng serve --configuration hmr&quot;,
    &quot;build&quot;: &quot;ng build&quot;,
    &quot;build:prod&quot;: &quot;npm run sass:prod &amp;&amp; npm run vit10prod&quot;,
    &quot;build:acc&quot;: &quot;npm run sass:prod &amp;&amp; npm run vit10acc&quot;,
    &quot;build:test&quot;: &quot;npm run sass:prod &amp;&amp; npm run vit10test&quot;,
    &quot;build:dev&quot;: &quot;npm run sass:prod &amp;&amp; npm run vit10dev&quot;,
    &quot;test&quot;: &quot;ng test&quot;,
    &quot;test:cover&quot;: &quot;ng test --code-coverage&quot;,
    &quot;lint&quot;: &quot;ng lint&quot;,
    &quot;e2e&quot;: &quot;ng e2e&quot;,
    &quot;local&quot;: &quot;ng serve -c local&quot;,
    &quot;analyze-bundle&quot;: &quot;webpack-bundle-analyzer dist/stats.json&quot;,
    &quot;postinstall&quot;: &quot;node patch-webpack.js&quot;,
    &quot;sass:watch&quot;: &quot;sass --watch sass:src\\assets&quot;,
    &quot;sass:prod&quot;: &quot;sass --update -f --style compressed --sourcemap=none sass:src\\assets&quot;,
    &quot;vit10dev&quot;: &quot;ng build --prod -c vit10dev&quot;,
    &quot;vit10test&quot;: &quot;ng build --prod -c vit10test&quot;,
    &quot;vit10acc&quot;: &quot;ng build --prod -c vit10acc&quot;,
    &quot;vit10prod&quot;: &quot;ng build --prod -c production&quot;
  },
  &quot;private&quot;: true,
  &quot;dependencies&quot;: {
    &quot;@angular/animations&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/cdk&quot;: &quot;^7.3.7&quot;,
    &quot;@angular/common&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/compiler&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/core&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/forms&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/http&quot;: &quot;^7.2.15&quot;,
    &quot;@angular/platform-browser&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/platform-browser-dynamic&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/platform-server&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/router&quot;: &quot;^8.1.2&quot;,
    &quot;@types/chart.js&quot;: &quot;^2.7.54&quot;,
    &quot;buffer&quot;: &quot;^5.2.1&quot;,
    &quot;chart.js&quot;: &quot;^2.7.2&quot;,
    &quot;core-js&quot;: &quot;^2.5.7&quot;,
    &quot;events&quot;: &quot;^3.0.0&quot;,
    &quot;fs&quot;: &quot;0.0.1-security&quot;,
    &quot;jasmine&quot;: &quot;^3.1.0&quot;,
    &quot;ng2-charts&quot;: &quot;^1.6.0&quot;,
    &quot;ng2-dragula&quot;: &quot;^2.1.1&quot;,
    &quot;ng2-pdf-viewer&quot;: &quot;^5.0.1&quot;,
    &quot;node-sass&quot;: &quot;^4.11.0&quot;,
    &quot;oidc-client&quot;: &quot;^1.5.1&quot;,
    &quot;path&quot;: &quot;^0.12.7&quot;,
    &quot;pdfjs-dist&quot;: &quot;^2.0.489&quot;,
    &quot;rxjs&quot;: &quot;^6.5.2&quot;,
    &quot;rxjs-compat&quot;: &quot;^6.5.2&quot;,
    &quot;stream&quot;: &quot;0.0.2&quot;,
    &quot;timers&quot;: &quot;^0.1.1&quot;,
    &quot;web-animations-js&quot;: &quot;^2.3.1&quot;,
    &quot;zone.js&quot;: &quot;^0.9.1&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;@angular-devkit/build-angular&quot;: &quot;^0.801.2&quot;,
    &quot;@angular/cli&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/compiler-cli&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/language-service&quot;: &quot;^8.1.2&quot;,
    &quot;@angularclass/hmr&quot;: &quot;^2.1.3&quot;,
    &quot;@compodoc/compodoc&quot;: &quot;^1.1.10&quot;,
    &quot;@types/jasmine&quot;: &quot;^3.3.14&quot;,
    &quot;@types/node&quot;: &quot;^12.6.8&quot;,
    &quot;chai&quot;: &quot;^4.1.2&quot;,
    &quot;codelyzer&quot;: &quot;^5.1.0&quot;,
    &quot;convert-csv-to-json&quot;: &quot;0.0.13&quot;,
    &quot;cucumber&quot;: &quot;^4.2.1&quot;,
    &quot;cucumber-html-reporter&quot;: &quot;^5.0.0&quot;,
    &quot;cucumber-junit&quot;: &quot;^1.7.1&quot;,
    &quot;express-static&quot;: &quot;^1.2.5&quot;,
    &quot;jasmine-core&quot;: &quot;^3.4.0&quot;,
    &quot;jasmine-reporters&quot;: &quot;^2.3.1&quot;,
    &quot;jasmine-spec-reporter&quot;: &quot;^4.2.1&quot;,
    &quot;karma&quot;: &quot;^4.2.0&quot;,
    &quot;karma-chrome-launcher&quot;: &quot;^3.0.0&quot;,
    &quot;karma-cli&quot;: &quot;^2.0.0&quot;,
    &quot;karma-coverage-istanbul-reporter&quot;: &quot;^1.2.1&quot;,
    &quot;karma-html-reporter&quot;: &quot;^0.2.7&quot;,
    &quot;karma-jasmine&quot;: &quot;^2.0.1&quot;,
    &quot;karma-jasmine-html-reporter&quot;: &quot;^1.4.2&quot;,
    &quot;karma-junit-reporter&quot;: &quot;^1.2.0&quot;,
    &quot;karma-teamcity-reporter&quot;: &quot;^1.1.0&quot;,
    &quot;moment&quot;: &quot;^2.22.1&quot;,
    &quot;prettier&quot;: &quot;1.13.4&quot;,
    &quot;protractor&quot;: &quot;^5.4.2&quot;,
    &quot;protractor-beautiful-reporter&quot;: &quot;^1.2.1&quot;,
    &quot;protractor-cucumber-framework&quot;: &quot;^5.0.0&quot;,
    &quot;puppeteer&quot;: &quot;^1.14.0&quot;,
    &quot;request&quot;: &quot;^2.87.0&quot;,
    &quot;request-promise-native&quot;: &quot;^1.0.5&quot;,
    &quot;ts-node&quot;: &quot;^3.3.0&quot;,
    &quot;tslint&quot;: &quot;^5.18.0&quot;,
    &quot;tslint-angular&quot;: &quot;^1.1.2&quot;,
    &quot;typescript&quot;: &quot;3.4.5&quot;,
    &quot;webpack-bundle-analyzer&quot;: &quot;^3.3.2&quot;,
    &quot;xlsx&quot;: &quot;^0.12.13&quot;
  },
  &quot;browser&quot;: {
    &quot;fs&quot;: false,
    &quot;path&quot;: false,
    &quot;os&quot;: false,
    &quot;crypto&quot;: false,
    &quot;stream&quot;: false,
    &quot;http&quot;: false,
    &quot;tls&quot;: false,
    &quot;zlib&quot;: false,
    &quot;https&quot;: false,
    &quot;net&quot;: false
  }
}
</code></pre>
<p>And my b <code>tsconfig.json</code> file looks like this:</p>
<pre><code>{
  &quot;compileOnSave&quot;: false,
  &quot;compilerOptions&quot;: {
    &quot;outDir&quot;: &quot;./dist/out-tsc&quot;,
    &quot;baseUrl&quot;: &quot;src&quot;,
    &quot;sourceMap&quot;: true,
    &quot;declaration&quot;: false,
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;emitDecoratorMetadata&quot;: true,
    &quot;experimentalDecorators&quot;: true,
    &quot;target&quot;: &quot;es5&quot;,
    &quot;typeRoots&quot;: [
      &quot;node_modules/@types&quot;
    ],
    &quot;lib&quot;: [
      &quot;es2016&quot;,
      &quot;dom&quot;
    ]
  },
   &quot;angularCompilerOptions&quot;: {
     &quot;enableIvy&quot;: false
   }
}
</code></pre>
<p>But I still get these errors:</p>
<pre><code>ERROR in ./node_modules/resolve/lib/async.js
Module not found: Error: Can't resolve 'fs' in 'C:\Source\nien\vital10-frontend\node_modules\resolve\lib'
ERROR in ./node_modules/resolve/lib/sync.js
Module not found: Error: Can't resolve 'fs' in 'C:\Source\nien\vital10-frontend\node_modules\resolve\lib'
ERROR in ./node_modules/resolve/lib/node-modules-paths.js
Module not found: Error: Can't resolve 'fs' in 'C:\Source\nien\vital10-frontend\node_modules\resolve\lib'
ERROR in ./node_modules/tslint/lib/utils.js
Module not found: Error: Can't resolve 'fs' in 'C:\Source\nien\vital10-frontend\node_modules\tslint\lib'
</code></pre>
<p>I found a possible solution, that you have to put some configuration in one of the node_modules. But I think that is not a good solution. Because if you remove all the imports and then install again the imports your configurations are gone.</p>
<p>Thank you</p>
<p>Oke, I removed the</p>
<pre><code> &quot;fs&quot;: &quot;0.0.1-security&quot;,
</code></pre>
<p>I deleted all the packes(node_modules) and did a npm install.</p>
<p>But now I get this:</p>
<pre><code>(node:13880) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGINT listeners added. Use emitter.setMaxListeners() to increase limit
Binary found at C:\Source\nien\vital10-frontend\node_modules\node-sass\vendor\win32-x64-64\binding.node
Testing binary
Binary is fine

&gt; vital10-frontend@0.55.0 postinstall C:\Source\nien\vital10-frontend
&gt; node patch-webpack.js

internal/modules/cjs/loader.js:638
    throw err;
    ^

Error: Cannot find module 'C:\Source\nien\vital10-frontend\patch-webpack.js'
    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)
    at Function.Module._load (internal/modules/cjs/loader.js:562:25)
    at Function.Module.runMain (internal/modules/cjs/loader.js:829:12)
    at startup (internal/bootstrap/node.js:283:19)
    at bootstrapNodeJSCore (internal/bootstrap/node.js:622:3)
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! vital10-frontend@0.55.0 postinstall: `node patch-webpack.js`
npm ERR! Exit status 1
npm ERR!
npm ERR! Failed at the vital10-frontend@0.55.0 postinstall script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.

npm ERR! A complete log of this run can be found in:
npm ERR!     C:\Users\nien\AppData\Roaming\npm-cache\_logs\2019-07-23T10_25_46_184Z-debug.log
PS C:\Source\nien\vital10-frontend&gt;
</code></pre>
<p>and my package.json file looks like this now:</p>
<pre><code>{
  &quot;name&quot;: &quot;vital10-frontend&quot;,
  &quot;version&quot;: &quot;0.55.0&quot;,
  &quot;license&quot;: &quot;Unlicensed&quot;,
  &quot;scripts&quot;: {
    &quot;ng&quot;: &quot;ng&quot;,
    &quot;start&quot;: &quot;ng serve&quot;,
    &quot;hmr&quot;: &quot;ng serve --configuration hmr&quot;,
    &quot;build&quot;: &quot;ng build&quot;,
    &quot;build:prod&quot;: &quot;npm run sass:prod &amp;&amp; npm run vit10prod&quot;,
    &quot;build:acc&quot;: &quot;npm run sass:prod &amp;&amp; npm run vit10acc&quot;,
    &quot;build:test&quot;: &quot;npm run sass:prod &amp;&amp; npm run vit10test&quot;,
    &quot;build:dev&quot;: &quot;npm run sass:prod &amp;&amp; npm run vit10dev&quot;,
    &quot;test&quot;: &quot;ng test&quot;,
    &quot;test:cover&quot;: &quot;ng test --code-coverage&quot;,
    &quot;lint&quot;: &quot;ng lint&quot;,
    &quot;e2e&quot;: &quot;ng e2e&quot;,
    &quot;local&quot;: &quot;ng serve -c local&quot;,
    &quot;analyze-bundle&quot;: &quot;webpack-bundle-analyzer dist/stats.json&quot;,
    &quot;postinstall&quot;: &quot;node patch-webpack.js&quot;,
    &quot;sass:watch&quot;: &quot;sass --watch sass:src\\assets&quot;,
    &quot;sass:prod&quot;: &quot;sass --update -f --style compressed --sourcemap=none sass:src\\assets&quot;,
    &quot;vit10dev&quot;: &quot;ng build --prod -c vit10dev&quot;,
    &quot;vit10test&quot;: &quot;ng build --prod -c vit10test&quot;,
    &quot;vit10acc&quot;: &quot;ng build --prod -c vit10acc&quot;,
    &quot;vit10prod&quot;: &quot;ng build --prod -c production&quot;
  },
  &quot;private&quot;: true,
  &quot;dependencies&quot;: {
    &quot;@angular/animations&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/cdk&quot;: &quot;^7.3.7&quot;,
    &quot;@angular/common&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/compiler&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/core&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/forms&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/http&quot;: &quot;^7.2.15&quot;,
    &quot;@angular/platform-browser&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/platform-browser-dynamic&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/platform-server&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/router&quot;: &quot;^8.1.2&quot;,
    &quot;@types/chart.js&quot;: &quot;^2.7.54&quot;,
    &quot;buffer&quot;: &quot;^5.2.1&quot;,
    &quot;chart.js&quot;: &quot;^2.7.2&quot;,
    &quot;core-js&quot;: &quot;^2.5.7&quot;,
    &quot;events&quot;: &quot;^3.0.0&quot;,
    &quot;jasmine&quot;: &quot;^3.1.0&quot;,
    &quot;ng2-charts&quot;: &quot;^1.6.0&quot;,
    &quot;ng2-dragula&quot;: &quot;^2.1.1&quot;,
    &quot;ng2-pdf-viewer&quot;: &quot;^5.0.1&quot;,
    &quot;node-sass&quot;: &quot;^4.11.0&quot;,
    &quot;oidc-client&quot;: &quot;^1.5.1&quot;,
    &quot;path&quot;: &quot;^0.12.7&quot;,
    &quot;pdfjs-dist&quot;: &quot;^2.0.489&quot;,
    &quot;rxjs&quot;: &quot;^6.5.2&quot;,
    &quot;rxjs-compat&quot;: &quot;^6.5.2&quot;,
    &quot;stream&quot;: &quot;0.0.2&quot;,
    &quot;timers&quot;: &quot;^0.1.1&quot;,
    &quot;web-animations-js&quot;: &quot;^2.3.1&quot;,
    &quot;zone.js&quot;: &quot;^0.9.1&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;@angular-devkit/build-angular&quot;: &quot;^0.801.2&quot;,
    &quot;@angular/cli&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/compiler-cli&quot;: &quot;^8.1.2&quot;,
    &quot;@angular/language-service&quot;: &quot;^8.1.2&quot;,
    &quot;@angularclass/hmr&quot;: &quot;^2.1.3&quot;,
    &quot;@compodoc/compodoc&quot;: &quot;^1.1.10&quot;,
    &quot;@types/jasmine&quot;: &quot;^3.3.14&quot;,
    &quot;@types/node&quot;: &quot;^12.6.8&quot;,
    &quot;chai&quot;: &quot;^4.1.2&quot;,
    &quot;codelyzer&quot;: &quot;^5.1.0&quot;,
    &quot;convert-csv-to-json&quot;: &quot;0.0.13&quot;,
    &quot;cucumber&quot;: &quot;^4.2.1&quot;,
    &quot;cucumber-html-reporter&quot;: &quot;^5.0.0&quot;,
    &quot;cucumber-junit&quot;: &quot;^1.7.1&quot;,
    &quot;express-static&quot;: &quot;^1.2.5&quot;,
    &quot;jasmine-core&quot;: &quot;^3.4.0&quot;,
    &quot;jasmine-reporters&quot;: &quot;^2.3.1&quot;,
    &quot;jasmine-spec-reporter&quot;: &quot;^4.2.1&quot;,
    &quot;karma&quot;: &quot;^4.2.0&quot;,
    &quot;karma-chrome-launcher&quot;: &quot;^3.0.0&quot;,
    &quot;karma-cli&quot;: &quot;^2.0.0&quot;,
    &quot;karma-coverage-istanbul-reporter&quot;: &quot;^1.2.1&quot;,
    &quot;karma-html-reporter&quot;: &quot;^0.2.7&quot;,
    &quot;karma-jasmine&quot;: &quot;^2.0.1&quot;,
    &quot;karma-jasmine-html-reporter&quot;: &quot;^1.4.2&quot;,
    &quot;karma-junit-reporter&quot;: &quot;^1.2.0&quot;,
    &quot;karma-teamcity-reporter&quot;: &quot;^1.1.0&quot;,
    &quot;moment&quot;: &quot;^2.22.1&quot;,
    &quot;prettier&quot;: &quot;1.13.4&quot;,
    &quot;protractor&quot;: &quot;^5.4.2&quot;,
    &quot;protractor-beautiful-reporter&quot;: &quot;^1.2.1&quot;,
    &quot;protractor-cucumber-framework&quot;: &quot;^5.0.0&quot;,
    &quot;puppeteer&quot;: &quot;^1.14.0&quot;,
    &quot;request&quot;: &quot;^2.87.0&quot;,
    &quot;request-promise-native&quot;: &quot;^1.0.5&quot;,
    &quot;ts-node&quot;: &quot;^3.3.0&quot;,
    &quot;tslint&quot;: &quot;^5.18.0&quot;,
    &quot;tslint-angular&quot;: &quot;^1.1.2&quot;,
    &quot;typescript&quot;: &quot;3.4.5&quot;,
    &quot;webpack-bundle-analyzer&quot;: &quot;^3.3.2&quot;,
    &quot;xlsx&quot;: &quot;^0.12.13&quot;
  },
  &quot;browser&quot;: {
    &quot;fs&quot;: false,
    &quot;path&quot;: false,
    &quot;os&quot;: false,
    &quot;crypto&quot;: false,
    &quot;stream&quot;: false,
    &quot;http&quot;: false,
    &quot;tls&quot;: false,
    &quot;zlib&quot;: false,
    &quot;https&quot;: false,
    &quot;net&quot;: false
  }
}
</code></pre>
<p>Still get this errrors:</p>
<pre><code>(node:15956) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 SIGINT listeners added. Use emitter.setMaxListeners() to increase limit
internal/modules/cjs/loader.js:638
    throw err;
    ^

Error: Cannot find module 'C:\Source\nien\vital10-frontend\patch-webpack.js'
    at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)
    at Function.Module._load (internal/modules/cjs/loader.js:562:25)
    at Function.Module.runMain (internal/modules/cjs/loader.js:829:12)
    at startup (internal/bootstrap/node.js:283:19)
    at bootstrapNodeJSCore (internal/bootstrap/node.js:622:3)
npm ERR! code ELIFECYCLE
npm ERR! errno 1
npm ERR! vital10-frontend@0.55.0 postinstall: `node patch-webpack.js`
npm ERR! Exit status 1
npm ERR!
npm ERR! Failed at the vital10-frontend@0.55.0 postinstall script.
npm ERR! This is probably not a problem with npm. There is likely additional logging output above.

npm ERR! A complete log of this run can be found in:
npm ERR!     C:\Users\nien\AppData\Roaming\npm-cache\_logs\2019-07-23T10_59_04_891Z-debug.log
PS C:\Source\nien\vital10-frontend&gt;
</code></pre>
<p>i Still get this three errros:</p>
<pre><code>ERROR in ./node_modules/resolve/lib/async.js
Module not found: Error: Can't resolve 'fs' in 'C:\Source\nien\vital10-frontend\node_modules\resolve\lib'
ERROR in ./node_modules/resolve/lib/sync.js
Module not found: Error: Can't resolve 'fs' in 'C:\Source\nien\vital10-frontend\node_modules\resolve\lib'
ERROR in ./node_modules/tslint/lib/utils.js
Module not found: Error: Can't resolve 'fs' in 'C:\Source\nien\vital10-frontend\node_modules\tslint\lib'
i ÔΩ¢wdmÔΩ£: Failed to compile.
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 229<br>
            <strong>Answer:</strong>
            <p><p>The error is because of <code>angular-cli</code> does not support modules in node like &quot;fs&quot; and &quot;path&quot;. (<a href="https://github.com/angular/angular-cli/issues/10681" rel="noreferrer">Issue</a>)</p>
<p>Add the following to the root of the &quot;package.json&quot; file.</p>
<pre class="lang-js prettyprint-override"><code>&quot;browser&quot;: {
  &quot;fs&quot;: false,
  &quot;path&quot;: false,
  &quot;os&quot;: false
}
</code></pre>
<blockquote>
<p>Angular apps such as the ones Angular CLI creates are browser apps. fs
isn't available on the browser, it's only available on node apps.</p>
</blockquote>
<ul>
<li><a href="https://github.com/angular/angular-cli/issues/8272#issuecomment-341428996" rel="noreferrer">https://github.com/angular/angular-cli/issues/8272#issuecomment-341428996</a></li>
</ul>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, angular
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>Seems as though an update on Windows 10 overnight broke Python. Just trying to run <code>python --version</code> returned a "Permission Denied" error.  None of the three updates; KB4507453, KB4506991, or KB4509096 look like they'd be the culprit but the timing of the issue is suspicious. Rather than messing with rolling back, I'm hoping there's a simpler fix that I'm missing.</p>

<p>The permissions on python are "-rwxr-xr-x" and I haven't changed anything besides letting the Windows update reboot machine after installing last night's patches.</p>

<p>According to the System Information, I'm running 10.0.18362</p>

<p>Should also note that this is happening whether I (try) to execute Python from git-bash using "run as administrator" or not, and if I try using PowerShell, it just opens the Windows store as if the app isn't installed so I'm thinking it can't see the contents of my <code>/c/Users/david/AppData/Local/Microsoft/WindowsApps/</code> folder for some reason.</p>

<p>I've also tried to reinstall Python 3.7.4, but that didn't help either. Is there something else I should be looking at?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 343<br>
            <strong>Answer:</strong>
            <p><p>As far as I can tell, this was caused by a conflict with the version of Python 3.7 that was recently added into the Windows Store. It looks like this added two "stubs" called python.exe and python3.exe into the <code>%USERPROFILE%\AppData\Local\Microsoft\WindowsApps</code> folder, and in my case, this was inserted <strong>before</strong> my existing Python executable's entry in the <code>PATH</code>.</p>

<p>Moving this entry below the correct Python folder (partially) corrected the issue.</p>

<p>The second part of correcting it is to type <code>manage app execution aliases</code> into the Windows search prompt and disable the store versions of Python altogether.</p>

<p><a href="https://i.sstatic.net/9A0OC.png" rel="noreferrer"><img src="https://i.sstatic.net/9A0OC.png" alt="manage app execution aliases"></a></p>

<p>It's possible that you'll only need to do the second part, but on my system I made both changes and everything is back to normal now.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, file-permissions, python-3.x, git-bash, windows-store-apps
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>When plotting heatmaps with seaborn (and correlation matrices with matplotlib) the first and the last row is cut in halve.
This happens also when I run this minimal code example which I found online.</p>

<pre class="lang-py prettyprint-override"><code>import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

data = pd.read_csv('https://raw.githubusercontent.com/resbaz/r-novice-gapminder-files/master/data/gapminder-FiveYearData.csv')
plt.figure(figsize=(10,5))
sns.heatmap(data.corr())
plt.show()
</code></pre>

<p><img src="https://i.sstatic.net/Km4x6.png" alt="And get this result (I am not allowed to embed images yet)">
The labels at the y axis are on the correct spot, but the rows aren't completely there.</p>

<p>A few days ago, it work as intended. Since then, I installed texlive-xetex so I removed it again but it didn't solve my problem.</p>

<p>Any ideas what I could be missing?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 122<br>
            <strong>Answer:</strong>
            <p><p>Unfortunately <strong>matplotlib 3.1.1 <a href="https://github.com/matplotlib/matplotlib/issues/14675" rel="noreferrer">broke seaborn heatmaps</a></strong>; and in general inverted axes with fixed ticks.<br>
This is fixed in the current development version; you may hence</p>

<ul>
<li>revert to matplotlib 3.1.0</li>
<li>use matplotlib 3.1.2 or higher</li>
<li>set the heatmap limits manually (<code>ax.set_ylim(bottom, top) # set the ylim to bottom, top</code>) </li>
</ul>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, matplotlib, heatmap, seaborn
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><pre><code>const a = {
 b: {
  c: 'Hi!'
 }
};

const { b: { c } } = a;
</code></pre>

<p>Is it possible rename <code>b</code> in this case? I want get <code>c</code> and also rename <code>b</code>.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 265<br>
            <strong>Answer:</strong>
            <p><p>You could destructure with a renaming and take the same property for destructuring.</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const a = { b: { c: 'Hi!' } };
const { b: formerB, b: { c } } = a;

console.log(formerB)
console.log(c);</code></pre>
</div>
</div>
</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, rename, object, destructuring, ecmascript-6
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Aug-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>I am trying to use <code>Context</code> and <code>Reducers</code> via React's hooks, and running into problems with the order of the hooks not being constant. My understanding was that as long as the order of the <code>useHook(‚Ä¶)</code> remained the same, it was fine to invoke the returned state/update function/reducer in any sort of control flow. Otherwise, I'm invoking the hooks at the very beginning of the FunctionComponents. </p>

<p>Is it that I'm generating <code>Days</code> in a loop? Or missing something else?</p>

<pre><code>Warning: React has detected a change in the order of Hooks
called by Container. This will lead to bugs and errors if not fixed. For
more information, read the Rules of Hooks:
https://reactjs.org/docs/hooks-rules.html

   Previous render            Next render
   ------------------------------------------------------
1. useContext                 useContext
2. undefined                  useRef
   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</code></pre>

<p>The full version of <code>Container</code> is below. An excerpt from <code>Day</code> is below, and has a ref from <code>react-dnd</code>'s <code>useDrop</code>. </p>

<pre class="lang-js prettyprint-override"><code>export const Container: FunctionComponent&lt;Props&gt; = () =&gt; {
  let events = useContext(State.StateContext)
  //let events: Array&lt;Event.Event&gt; = [] &lt;- with this, no warning

  const getDaysEvents = (day: Event.Time, events: Array&lt;Event.Event&gt;) =&gt; {
    return events.map(e =&gt; {
      const isTodays = e.startTime.hasSame(day, "day")
      return isTodays &amp;&amp; Event.Event({ dayHeight, event: e })
    })
  }

  let days = []
  for (let i = 0; i &lt; 7; i++) {
    const day = DateTime.today().plus({ days: i })
    days.push(
      &lt;Day key={day.toISO()} height={dayHeight} date={day}&gt;
        {getDaysEvents(day, events)}
      &lt;/Day&gt;
    )
  }
  return &lt;div className="Container"&gt;{days}&lt;/div&gt;
}
</code></pre>

<p>An excerpt from <code>Day</code> (<code>Event</code> similarly uses a <code>useDrag</code> hook, also called at the top level just like here).</p>

<pre class="lang-js prettyprint-override"><code>const Day: FunctionComponent&lt;DayProps&gt; = ({ date, height, children }) =&gt; {
  const dispatch = useContext(State.DispatchContext)
  const [{ isOver, offset }, dropRef] = useDrop({
    // ‚Ä¶uses the dispatch function within‚Ä¶
    // ‚Ä¶
  })
  // ‚Ä¶
}
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 61<br>
            <strong>Answer:</strong>
            <p><p>Writing my comment as an answer:</p>
<p>The problem is that you're calling <code>Event.Event()</code> directly, even though it is a react component. That causes react to treat the hook calls inside the function as part of <code>Container</code>, even though you meant for them to be part of Event.</p>
<p>The solution is to use JSX:</p>
<p><code>return isTodays &amp;&amp; &lt;Event.Event dayHeight={dayHeight} event={e} /&gt;</code></p>
<p>Why this works is clearer when you replace the JSX with the resulting JS code:</p>
<p><code>return isTodays &amp;&amp; React.createElement(Event.Event, { dayHeight, event: e })</code></p>
<p>See <a href="https://reactjs.org/docs/react-api.html#createelement" rel="noreferrer">https://reactjs.org/docs/react-api.html#createelement</a>. You never want to call the function components directly, how react works is that you always hand a reference the component to react and let it call the function at the correct time.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, typescript, reactjs
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I have started working on an existing project based on Node.js. I was just trying to understand the flow of execution, where I encountered with some <code>*.mjs</code> files. I have searched the web where I found that these are module based JS-files.</p>
<p>I want to know how is it different from <code>*.js</code> files (how does it benefit)?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 830<br>
            <strong>Answer:</strong>
            <p><p>It indicates an ES6 module file.</p>
<hr />
<p>Node.js's original module system is <a href="https://nodejs.org/docs/latest/api/modules.html" rel="noreferrer">CommonJs</a> (which uses <code>require</code> and <code>module.exports</code>).</p>
<p>Since Node.js was created, the <a href="https://nodejs.org/docs/latest/api/esm.html" rel="noreferrer">ECMAScript module system</a> (which uses <code>import</code> and <code>export</code>) has become standard and Node.js has added support for it.</p>
<p>Node.js will treat <code>.cjs</code> files as CommonJS modules and <code>.mjs</code> files as ECMAScript modules. It will treat <code>.js</code> files as whatever the default module system for the project is (which is CommonJS unless <em>package.json</em> says <code>&quot;type&quot;: &quot;module&quot;,</code>).</p>
<p>See also: <a href="https://nodejs.org/docs/latest/api/esm.html#esm_differences_between_es_modules_and_commonjs" rel="noreferrer">Differences between ES6 module system and CommonJs</a></p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, node.js, mjs
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I have the following React component that generates an HTML Table from an array of objects. The columns that should be displayed are defined through the <code>tableColumns</code> property.</p>

<p>When looping through <code>items</code> and displaying the correct columns I have to use the <code>key</code> property from the <code>tableColumn</code> object (<code>{item[column.key]}</code>) but typescript is generating the following error:</p>

<blockquote>
  <p>Element implicitly has an 'any' type because expression of type 'string' can't be used to index type '{}'.
    No index signature with a parameter of type 'string' was found on type '{}'.</p>
</blockquote>

<p>What could I do to fix this? I'm lost</p>

<p>How I call the component:</p>

<pre><code>&lt;TableGridView
  items={[
    {
      id: 1,
      name: 'John Doe',
      email: 'john@doe.de'
    },
    {
      id: 2,
      name: 'Lorem ipsum',
      email: 'lorem@ipsum.com',
    }
  ]}
  tableColumns={[
    {
      key: 'id',
      label: 'ID',
    },
    {
      key: 'name',
      label: 'Name',
    }
  ]}
/&gt;
</code></pre>

<p>My Component:</p>

<pre><code>export type TableColumn = {
  key: string,
  label: string,
};

export type TableGridViewProps = {
  items: object[],
  tableColumns: TableColumn[]
};

const TableGridView: React.FC&lt;TableGridViewProps&gt; = ({ tableColumns, items }) =&gt; {
  return (
    &lt;table&gt;
      &lt;tbody&gt;
        {items.map(item =&gt; {
          return (
            &lt;tr&gt;
              {tableColumns.map((column, index) =&gt; {
                return (
                  &lt;td
                    key={column.key}
                    className="lorem ipsum"
                  &gt;
                    {item[column.key]} // error thrown here
                  &lt;/td&gt;
                );
              })}
            &lt;/tr&gt;
          );
        })}
      &lt;/tbody&gt;
    &lt;/table&gt;
  );
}
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 152<br>
            <strong>Answer:</strong>
            <p><pre><code>  items: object[],
</code></pre>
<p>While technically it is a JavaScript object, the type can be better. For Typescript to correctly help you identify mistakes when accessing objects properties, you need to tell it the exact shape of the object. If you type it as <code>object</code>, typescript cannot help you with that. Instead you could tell it the exact properties and datatypes the object has:</p>
<pre><code>  let assistance: { safe: string } = { safe: 1 /* typescript can now tell this is wrong */ };
  assistance.unknown; // typescript can tell this wont really work too
</code></pre>
<p>Now in the case that the object can contain any sort of key / value pair, you can at least tell typescript what type the values (and the keys) have, by using an object index type:</p>
<pre><code> items: {
   [key: string]: number | string,
  }[]
</code></pre>
<p>That would be the accurate type in the case given.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, typescript, reactjs
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I was practicing some JavaScript when one of my friends came across this JavaScript code:</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>document.write(('b' + 'a' + + 'a' + 'a').toLowerCase());</code></pre>
</div>
</div>
</p>

<p>The above code answers <code>"banana"</code>!
Can anyone explain why?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 629<br>
            <strong>Answer:</strong>
            <p><p><code>+'a'</code> resolves to <code>NaN</code> (&quot;Not a Number&quot;) because it coerces a string to a number, while the character <code>a</code> cannot be parsed as a number.
<div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>document.write(+'a');</code></pre>
</div>
</div>

To lowercase it becomes <code>nan</code>.</p>
<p>Adding <code>NaN</code> to <code>&quot;ba&quot;</code> turns <code>NaN</code> into the string <code>&quot;NaN&quot;</code> due to type conversion, gives <code>baNaN</code>.
And then there is an <code>a</code> behind, giving <code>baNaNa</code>.</p>
<p>The space between <code>+ +</code> is to make the first one string concatenation and the second one a unary plus (i.e. &quot;positive&quot;) operator.
You have the same result if you use <code>'ba'+(+'a')+'a'</code>, resolved as <code>'ba'+NaN+'a'</code>, which is equivalent to <code>'ba'+'NaN'+'a'</code> due to type juggling.</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>document.write('ba'+(+'a')+'a');</code></pre>
</div>
</div>
</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, type-conversion
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>I'm facing an issue with allocating huge arrays in numpy on Ubuntu 18 while not facing the same issue on MacOS.</p>

<p>I am trying to allocate memory for a numpy array with shape <code>(156816, 36, 53806)</code>
with </p>

<pre><code>np.zeros((156816, 36, 53806), dtype='uint8')
</code></pre>

<p>and while I'm getting an error on Ubuntu OS</p>

<pre><code>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; np.zeros((156816, 36, 53806), dtype='uint8')
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
numpy.core._exceptions.MemoryError: Unable to allocate array with shape (156816, 36, 53806) and data type uint8
</code></pre>

<p>I'm not getting it on MacOS:</p>

<pre><code>&gt;&gt;&gt; import numpy as np 
&gt;&gt;&gt; np.zeros((156816, 36, 53806), dtype='uint8')
array([[[0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        ...,
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0]],

       [[0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        ...,
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0]],

       [[0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        ...,
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0]],

       ...,

       [[0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        ...,
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0]],

       [[0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        ...,
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0]],

       [[0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        ...,
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0],
        [0, 0, 0, ..., 0, 0, 0]]], dtype=uint8)
</code></pre>

<p>I've read somewhere that <code>np.zeros</code> shouldn't be really allocating the whole memory needed for the array, but only for the non-zero elements. Even though the Ubuntu machine has 64gb of memory, while my MacBook Pro has only 16gb.</p>

<p>versions:</p>

<pre><code>Ubuntu
os -&gt; ubuntu mate 18
python -&gt; 3.6.8
numpy -&gt; 1.17.0

mac
os -&gt; 10.14.6
python -&gt; 3.6.4
numpy -&gt; 1.17.0
</code></pre>

<p>PS: also failed on Google Colab</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 204<br>
            <strong>Answer:</strong>
            <p><p>This is likely due to your system's <a href="https://www.kernel.org/doc/Documentation/vm/overcommit-accounting" rel="noreferrer">overcommit handling</a> mode.</p>
<p>In the default mode, <code>0</code>,</p>
<blockquote>
<p>Heuristic overcommit handling. Obvious overcommits of address space are refused. Used for a typical system. It ensures a seriously wild allocation fails while allowing overcommit to reduce swap usage. The root is allowed to allocate slightly more memory in this mode. This is the default.</p>
</blockquote>
<p>The exact heuristic used is not well explained here, but this is discussed more on  <a href="https://stackoverflow.com/questions/38688824/linux-over-commit-heuristic">Linux over commit heuristic</a> and <a href="http://engineering.pivotal.io/post/virtual_memory_settings_in_linux_-_the_problem_with_overcommit/" rel="noreferrer">on this page</a>.</p>
<p>You can check your current overcommit mode by running</p>
<pre><code>$ cat /proc/sys/vm/overcommit_memory
0
</code></pre>
<p>In this case, you're allocating</p>
<pre><code>&gt;&gt;&gt; 156816 * 36 * 53806 / 1024.0**3
282.8939827680588
</code></pre>
<p>~282 GB and the kernel is saying well obviously there's no way I'm going to be able to commit that many physical pages to this, and it refuses the allocation.</p>
<p>If (as root) you run:</p>
<pre><code>$ echo 1 &gt; /proc/sys/vm/overcommit_memory
</code></pre>
<p>This will enable the &quot;always overcommit&quot; mode, and you'll find that indeed the system will allow you to make the allocation no matter how large it is (within 64-bit memory addressing at least).</p>
<p>I tested this myself on a machine with 32 GB of RAM.  With overcommit mode <code>0</code> I also got a <code>MemoryError</code>, but after changing it back to <code>1</code> it works:</p>
<pre><code>&gt;&gt;&gt; import numpy as np
&gt;&gt;&gt; a = np.zeros((156816, 36, 53806), dtype='uint8')
&gt;&gt;&gt; a.nbytes
303755101056
</code></pre>
<p>You can then go ahead and write to any location within the array, and the system will only allocate physical pages when you explicitly write to that page.  So you can use this, with care, for sparse arrays.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, numpy
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Sep-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>I am currently migrating a React application to TypeScript. So far, this works pretty well, but I have a problem with the return types of my <code>render</code> functions, specifically in my functional components.</p>
<p>I have always used <code>JSX.Element</code> as the return type, now this doesn't work any more if a component decides to <em>not</em> render anything, i.e. returns <code>null</code>, since <code>null</code> is not a valid value for <code>JSX.Element</code>. This was the beginning of my journey. I searched the web and found that you should use <code>ReactNode</code> instead, which includes <code>null</code> and a few other things that can happen.</p>
<p>However, when creating a functional component, TypeScript complains about the <code>ReactNode</code> type. Again, after some searching I found, that for functional components you should use <code>ReactElement</code> instead. However, if I do so, the compatibility issue is gone, but now TypeScript again complains about <code>null</code> not being a valid value.</p>
<p>To cut a long story short, I have three questions:</p>
<ol>
<li>What is the difference between <code>JSX.Element</code>, <code>ReactNode</code>, and <code>ReactElement</code>?</li>
<li>Why do the <code>render</code> methods of class components return <code>ReactNode</code> but functional components return <code>ReactElement</code>?</li>
<li>How do I solve this with respect to <code>null</code>?</li>
</ol>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 875<br>
            <strong>Answer:</strong>
            <p><blockquote>
<p>What is the difference between <code>JSX.Element</code>, <code>ReactNode</code>, and <code>ReactElement</code>?</p>
</blockquote>
<p>A <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/9f855c408dac3c7b3bf0ed9d78242ce073c7aaf1/types/react/index.d.ts#L327" rel="noreferrer"><code>ReactElement</code></a> is an object with <code>type</code>, <code>props</code>, and <code>key</code> properties:</p>
<pre class="lang-js prettyprint-override"><code>interface ReactElement&lt;
  P = any,
  T extends
    | string
    | JSXElementConstructor&lt;any&gt; = string
    | JSXElementConstructor&lt;any&gt;,
&gt; {
  type: T;
  props: P;
  key: string | null;
}
</code></pre>
<p>A <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/9f855c408dac3c7b3bf0ed9d78242ce073c7aaf1/types/react/index.d.ts#L4260" rel="noreferrer"><code>JSX.Element</code></a> is a <code>ReactElement&lt;any, any&gt;</code>. It exists as various libraries can implement <code>JSX</code> in their own way:</p>
<pre class="lang-js prettyprint-override"><code>declare global {
  // ‚Ä¶
  namespace JSX {
    // ‚Ä¶
    interface Element extends React.ReactElement&lt;any, any&gt; {}
    // ‚Ä¶
  }
  // ‚Ä¶
}
</code></pre>
<p>A <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/9f855c408dac3c7b3bf0ed9d78242ce073c7aaf1/types/react/index.d.ts#L377" rel="noreferrer"><code>ReactPortal</code></a> is a <code>ReactElement</code> with a <code>children</code> property:</p>
<pre class="lang-js prettyprint-override"><code>interface ReactPortal extends ReactElement {
  children: ReactNode;
}
</code></pre>
<p>A <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/9f855c408dac3c7b3bf0ed9d78242ce073c7aaf1/types/react/index.d.ts#L478" rel="noreferrer"><code>ReactNode</code></a> is a <code>ReactElement</code>, <code>string</code>, <code>number</code>, <code>Iterable&lt;ReactNode&gt;</code>, <code>ReactPortal</code>, <code>boolean</code>, <code>null</code>, or <code>undefined</code>:</p>
<pre class="lang-js prettyprint-override"><code>type ReactNode =
  | ReactElement
  | string
  | number
  | Iterable&lt;ReactNode&gt;
  | ReactPortal
  | boolean
  | null
  | undefined;
</code></pre>
<p>Example:</p>
<pre class="lang-html prettyprint-override"><code>&lt;div&gt; // &lt;- ReactElement
  &lt;Component&gt; // &lt;- ReactElement
    {condition &amp;&amp; 'text'} // &lt;- ReactNode
  &lt;/Component&gt;
&lt;/div&gt;
</code></pre>
<blockquote>
<p>Why do the render methods of class components return ReactNode, but function components return ReactElement?</p>
</blockquote>
<p>This is due to <a href="https://stackoverflow.com/a/59840095/5260024">historical reasons</a>.</p>
<p>A <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/9f855c408dac3c7b3bf0ed9d78242ce073c7aaf1/types/react/v17/index.d.ts#L491" rel="noreferrer"><code>Component.render</code></a> returns a <code>ReactNode</code>:</p>
<pre class="lang-js prettyprint-override"><code>class Component&lt;P, S&gt; {
  // ‚Ä¶
  render(): ReactNode;
  // ‚Ä¶
}
</code></pre>
<p>A <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/9f855c408dac3c7b3bf0ed9d78242ce073c7aaf1/types/react/v17/index.d.ts#L543" rel="noreferrer"><code>FunctionComponent</code></a> returns a <code>ReactElement&lt;any, any&gt; | null</code>:</p>
<pre class="lang-js prettyprint-override"><code>interface FunctionComponent&lt;P = {}&gt; {
  (props: PropsWithChildren&lt;P&gt;, context?: any): ReactElement&lt;any, any&gt; | null;
  propTypes?: WeakValidationMap&lt;P&gt; | undefined;
  contextTypes?: ValidationMap&lt;any&gt; | undefined;
  defaultProps?: Partial&lt;P&gt; | undefined;
  displayName?: string | undefined;
}
</code></pre>
<blockquote>
<p>How do I solve this with respect to null?</p>
</blockquote>
<p>Type it as <code>ReactElement | null</code> just as React does. Or let TypeScript infer the type.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, typescript, reactjs
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I am using Mongoose with my Node.js app and this is my configuration: </p>

<pre><code>mongoose.connect(process.env.MONGO_URI, {
   useNewUrlParser: true,
   useUnifiedTopology: true,
   useCreateIndex: true,
   useFindAndModify: false
}).then(()=&gt;{
    console.log(`connection to database established`)
}).catch(err=&gt;{
    console.log(`db error ${err.message}`);
    process.exit(-1)
})
</code></pre>

<p>but in the console it still gives me the warning:</p>

<blockquote>
  <p>DeprecationWarning: current Server Discovery and Monitoring engine is deprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true } to the MongoClient constructor.</p>
</blockquote>

<p>What is the problem? I was not using <code>useUnifiedTopology</code> before but now it shows up in the console. I added it to the config but it still gives me this warning, why? I do not even use <code>MongoClient</code>.</p>

<h2>Edit</h2>

<p>As Felipe Plets answered there was a problem in Mongoose and they fixed this bug in later versions. So you can solve problem by updating mongoose version.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 273<br>
            <strong>Answer:</strong>
            <p><p><strong>Update</strong></p>

<p>Mongoose 5.7.1 was release and seems to fix the issue, so setting up the <code>useUnifiedTopology</code> option work as expected. </p>

<pre class="lang-js prettyprint-override"><code>mongoose.connect(mongoConnectionString, {useNewUrlParser: true, useUnifiedTopology: true});
</code></pre>

<p><strong>Original answer</strong></p>

<p>I was facing the same issue and decided to deep dive on Mongoose code: <a href="https://github.com/Automattic/mongoose/search?q=useUnifiedTopology&amp;unscoped_q=useUnifiedTopology" rel="noreferrer">https://github.com/Automattic/mongoose/search?q=useUnifiedTopology&amp;unscoped_q=useUnifiedTopology</a></p>

<p>Seems to be an option added on version 5.7 of Mongoose and not well documented yet. I could not even find it mentioned in the library history <a href="https://github.com/Automattic/mongoose/blob/master/History.md" rel="noreferrer">https://github.com/Automattic/mongoose/blob/master/History.md</a></p>

<p>According to a comment in the code: </p>

<blockquote>
  <ul>
  <li>@param {Boolean} [options.useUnifiedTopology=false] False by default. Set to <code>true</code> to opt in to the MongoDB driver's replica set and sharded cluster monitoring engine.</li>
  </ul>
</blockquote>

<p>There is also an issue on the project GitHub about this error: <a href="https://github.com/Automattic/mongoose/issues/8156" rel="noreferrer">https://github.com/Automattic/mongoose/issues/8156</a></p>

<p>In my case I don't use Mongoose in a replica set or sharded cluster and though the option should be false. But if false it complains the setting should be true. Once is true it still don't work, probably because my database does not run on a replica set or sharded cluster. </p>

<p>I've downgraded to 5.6.13 and my project is back working fine. So the only option I see for now is to downgrade it and wait for the fix to update for a newer version.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, mongoose, mongodb, node.js, typescript
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I have started to learn Angular but I note that powershell in Windows gives me an error whenever I make an angular command like:</p>

<pre><code>ng new new-app
</code></pre>

<p>or</p>

<pre><code>ng serve
</code></pre>

<p>this is the error what I got:</p>

<pre><code>ng : File C:\Users\&lt; username &gt;\AppData\Roaming\npm\ng.ps1 cannot be loaded because 
running scripts is disabled on this system. For more information, see 
about_Execution_Policies at https:/go.microsoft.com/fwlink/?LinkID=135170.
At line:1 char:1
+ ng serve
+ ~~
    + CategoryInfo          : SecurityError: (:) [], PSSecurityException
    + FullyQualifiedErrorId : UnauthorizedAccess
</code></pre>

<p>P.S. I try these commands in cmd and it works.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 905<br>
            <strong>Answer:</strong>
            <p><p>Remove <code>ng.ps1</code> from the directory <code>C:\Users\%username%\AppData\Roaming\npm\</code> then try clearing the npm cache at <code>C:\Users\%username%\AppData\Roaming\npm-cache\</code> </p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, powershell, angular-cli, angular
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I'm just beginning to use React for a project, and am really struggling with incorporating async/await functionality into one of my components. </p>

<p>I have an asynchronous function called <code>fetchKey</code> that goes and gets an access key from an API I am serving via AWS API Gateway:</p>

<pre><code>const fetchKey = async authProps =&gt; {
  try {
    const headers = {
      Authorization: authProps.idToken // using Cognito authorizer
    };

    const response = await axios.post(
      "https://MY_ENDPOINT.execute-api.us-east-1.amazonaws.com/v1/",
      API_GATEWAY_POST_PAYLOAD_TEMPLATE,
      {
        headers: headers
      }
    );
      return response.data.access_token;

  } catch (e) {
    console.log(`Axios request failed! : ${e}`);
    return e;
  }
};
</code></pre>

<p>I am using React's Material UI theme, and waned to make use of one of its Dashboard templates. Unfortunately, the Dashboard template uses a functional stateless component:</p>

<pre><code>const Dashboard = props =&gt; {
  const classes = useStyles();

  const token = fetchKey(props.auth);
  console.log(token);

  return (
  ... rest of the functional component's code
</code></pre>

<p>The result of my <code>console.log(token)</code> is a Promise, which is expected, but the screenshot in my Google Chrome browser is somewhat contradictory - is it pending, or is it resolved?
<a href="https://i.sstatic.net/DVCD2.png" rel="noreferrer"><img src="https://i.sstatic.net/DVCD2.png" alt="enter image description here"></a></p>

<p>Second, if I try instead <code>token.then((data, error)=&gt; console.log(data, error))</code>, I get <code>undefined</code> for both variables. This seems to indicate to me that the function has not yet completed, and therefore has not resolved any values for <code>data</code> or <code>error</code>. Yet, if I try to place a </p>

<pre><code>const Dashboard = async props =&gt; {
  const classes = useStyles();

  const token = await fetchKey(props.auth);
</code></pre>

<p>React complains mightily:</p>

<pre><code>&gt; react-dom.development.js:57 Uncaught Invariant Violation: Objects are
&gt; not valid as a React child (found: [object Promise]). If you meant to
&gt; render a collection of children, use an array instead.
&gt;     in Dashboard (at App.js:89)
&gt;     in Route (at App.js:86)
&gt;     in Switch (at App.js:80)
&gt;     in div (at App.js:78)
&gt;     in Router (created by BrowserRouter)
&gt;     in BrowserRouter (at App.js:77)
&gt;     in div (at App.js:76)
&gt;     in ThemeProvider (at App.js:75)
</code></pre>

<p>Now, I'll be the first to state I don't have enough experience to understand what is going on with this error message. If this was a traditional React class component, I'd use the <code>this.setState</code> method to set some state, and then go on my merry way. However, I don't have that option in this functional component. </p>

<p>How do I incorporate async/await logic into my functional React component? </p>

<p><strong>Edit:</strong> So I will just say I'm an idiot. The actual response object that is returned is not <code>response.data.access_token</code>. It was <code>response.data.Item.access_token</code>. Doh! That's why the result was being returned as undefined, even though the actual promise was resolved.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 185<br>
            <strong>Answer:</strong>
            <p><p>You will have to make sure two things</p>
<ul>
<li><code>useEffect</code> is similar to <code>componentDidMount</code> and <code>componentDidUpdate</code>, so if you use <code>setState</code> here then you need to restrict the code execution at some point when used as <code>componentDidUpdate</code> as shown below:</li>
</ul>
<pre class="lang-js prettyprint-override"><code>function Dashboard() {
  const [token, setToken] = useState('');

  useEffect(() =&gt; {
    // React advises to declare the async function directly inside useEffect
    async function getToken() {
      const headers = {
        Authorization: authProps.idToken // using Cognito authorizer
      };
      const response = await axios.post(
        &quot;https://MY_ENDPOINT.execute-api.us-east-1.amazonaws.com/v1/&quot;,
        API_GATEWAY_POST_PAYLOAD_TEMPLATE,
        { headers }
      );
      const data = await response.json();
      setToken(data.access_token);
    };

    // You need to restrict it at some point
    // This is just dummy code and should be replaced by actual
    if (!token) {
        getToken();
    }
  }, []);

  return &lt;&gt;/*Rendering code*/&lt;/&gt;;
}
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, async-await, reactjs, material-ui, react-functional-component
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>We use a third party library (over which there is limited control) that takes a callback as argument to a function. What is the correct way to provide that callback with the latest state? In class components, this would be done through the use of <code>this</code>. In React hooks, due to the way state is encapsulated in the functions of <code>React.useState()</code>, if a callback <em>gets</em> the state through <code>React.useState()</code>, it will be stale (the value when the callback was setup). But if it <em>sets</em> the state, it will have access to the latest state through the passed argument. This means we can potentially get the latest state in such a callback with React hooks by <em>setting</em> the state to be the same as it was. This works, but is counter-intuitive.</p>
<p>With the following code, every time the callback accesses it, it's back at its default value. The console will keep printing <code>Count is: 0</code> no matter how many times I click.</p>
<pre><code>function Card(title) {
  const [count, setCount] = React.useState(0)
  const [callbackSetup, setCallbackSetup] = React.useState(false)
  
  function setupConsoleCallback(callback) {
    console.log(&quot;Setting up callback&quot;)
    setInterval(callback, 3000)
  }

  function clickHandler() {
    setCount(count+1);
    if (!callbackSetup) {
      setupConsoleCallback(() =&gt; {console.log(`Count is: ${count}`)})
      setCallbackSetup(true)
    }
  }
  
  
  return (&lt;div&gt;
      Active count {count} &lt;br/&gt;
      &lt;button onClick={clickHandler}&gt;Increment&lt;/button&gt;
    &lt;/div&gt;);
  
}

const el = document.querySelector(&quot;#root&quot;);
ReactDOM.render(&lt;Card title='Example Component' /&gt;, el);
</code></pre>
<p><a href="https://codepen.io/rodh/pen/zYORLvL" rel="noreferrer">CodePen</a></p>
<p>I've had no problem setting state within a callback, only in accessing the latest state.</p>
<p>If I was to take a guess, I'd think that any change of state creates a new instance of the Card function. And that the callback is referring to the old one. Based on the documentation at <a href="https://reactjs.org/docs/hooks-reference.html#functional-updates" rel="noreferrer">https://reactjs.org/docs/hooks-reference.html#functional-updates</a>, I had an idea to take the approach of calling setState in the callback, and passing a function to setState, to see if I could access the current state from within setState. Replacing</p>
<pre><code>setupConsoleCallback(() =&gt; {console.log(`Count is: ${count}`)})
</code></pre>
<p>with</p>
<pre><code>setupConsoleCallback(() =&gt; {setCount(prevCount =&gt; {console.log(`Count is: ${prevCount}`); return prevCount})})
</code></pre>
<p><a href="https://codepen.io/rodh/pen/OJLQwOW" rel="noreferrer">CodePen</a></p>
<p><em>Does</em> work. I need to call setState to access the previous state. Even though I have no intention of setting the state.</p>
<p>How can I access the latest state information from within a callback?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 297<br>
            <strong>Answer:</strong>
            <p><p>For your scenario (where you cannot keep creating new callbacks and passing them to your 3rd party library), you can use <code>useRef</code> to keep a mutable object with the current state.  Like so:</p>

<pre><code>function Card(title) {
  const [count, setCount] = React.useState(0)
  const [callbackSetup, setCallbackSetup] = React.useState(false)
  const stateRef = useRef();

  // make stateRef always have the current count
  // your "fixed" callbacks can refer to this object whenever
  // they need the current value.  Note: the callbacks will not
  // be reactive - they will not re-run the instant state changes,
  // but they *will* see the current value whenever they do run
  stateRef.current = count;

  function setupConsoleCallback(callback) {
    console.log("Setting up callback")
    setInterval(callback, 3000)
  }

  function clickHandler() {
    setCount(count+1);
    if (!callbackSetup) {
      setupConsoleCallback(() =&gt; {console.log(`Count is: ${stateRef.current}`)})
      setCallbackSetup(true)
    }
  }


  return (&lt;div&gt;
      Active count {count} &lt;br/&gt;
      &lt;button onClick={clickHandler}&gt;Increment&lt;/button&gt;
    &lt;/div&gt;);

}
</code></pre>

<p>Your callback can refer to the mutable object to "read" the current state.  It will capture the mutable object in its closure, and every render the mutable object will be updated with the current state value.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Oct-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>After upgrading to React Native 0.61, I get a lot of warnings like this:</p>
<pre><code>VirtualizedLists should never be nested inside plain ScrollViews with the same orientation - use another VirtualizedList-backed container instead.
</code></pre>
<p>What is the other <code>VirtualizedList-backed container</code> that I should use, and why is it now advised not to use it like that?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 172<br>
            <strong>Answer:</strong>
            <p><p>If someone's still looking for a suggestion to the problem that <a href="https://stackoverflow.com/questions/58243680/react-native-another-virtualizedlist-backed-container#comment102957299_58283632">Ponleu and</a> <a href="https://stackoverflow.com/questions/58243680/react-native-another-virtualizedlist-backed-container#comment103010471_58283632">David Schilling have described</a> here (regarding content that goes above the FlatList), then this is the approach I took:</p>
<pre><code>&lt;SafeAreaView style={{flex: 1}}&gt;
    &lt;FlatList
      data={data}
      ListHeaderComponent={ContentThatGoesAboveTheFlatList}
      ListFooterComponent={ContentThatGoesBelowTheFlatList} /&gt;
&lt;/SafeAreaView&gt;
</code></pre>
<p>You can read more about this in <em><a href="https://facebook.github.io/react-native/docs/flatlist#listheadercomponent" rel="noreferrer">ListHeaderComponent</a></em>.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-native
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I would like to ignore a specific multi-line code by <code>black</code> python formatter. Particularly, this is used for <code>np.array</code> or matrix construction which turned ugly when formatted. Below is the example.</p>

<pre><code>np.array(
    [
        [1, 0, 0, 0],
        [0, -1, 0, 0],
        [0, 0, 1, 0],
        [0, 0, 0, -1],
    ]
)
# Will be formatted to
np.array([[1, 0, 0, 0], [0, -1, 0, 0], [0, 0, 1, 0], [0, 0, 0, -1]])
</code></pre>

<p>I found <a href="https://github.com/psf/black/issues/451" rel="noreferrer">this</a> issue in <code>black</code> github, but that only works for inline command, which is not what I have here.</p>

<p>Is there anything I can do to achieve this for a multi-line code?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 467<br>
            <strong>Answer:</strong>
            <p><p>You can use <code>#fmt: on/off</code> (<a href="https://black.readthedocs.io/en/stable/usage_and_configuration/the_basics.html#ignoring-sections" rel="noreferrer">docs</a>) as explained in the issue linked. Here, it would look like:</p>
<pre class="lang-py prettyprint-override"><code># fmt: off
np.array(
    [
        [1, 0, 0, 0],
        [0, -1, 0, 0],
        [0, 0, 1, 0],
        [0, 0, 0, -1],
    ]
)
# fmt: on
</code></pre>
<p><code># fmt: off</code> disables formatting for all following lines until re-activated with <code># fmt: on</code>.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, code-formatting, python-black
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>It's been cited by many users as the reason for switching to Pytorch, but I've yet to find a justification/explanation for sacrificing the most important practical quality, speed, for eager execution.</p>
<p>Below is code benchmarking performance, TF1 vs. TF2 - with TF1 running anywhere from <strong>47% to 276% faster</strong>.</p>
<p>My question is: <em>what is it, at the graph or hardware level, that yields such a significant slowdown?</em></p>
<hr>
<p>Looking for a detailed answer - am already familiar with broad concepts. <a href="https://github.com/tensorflow/tensorflow/issues/33487" rel="noreferrer">Relevant Git</a></p>
<p><strong>Specs</strong>: CUDA 10.0.130, cuDNN 7.4.2, Python 3.7.4, Windows 10, GTX 1070</p>
<hr>
<p><strong>Benchmark results</strong>:</p>
<img src="https://i.sstatic.net/ayBCS.png" width="530">
<hr>
<p><strong>UPDATE</strong>: Disabling Eager Execution per below code does <em>not</em> help. The behavior, however, is inconsistent: sometimes running in graph mode helps considerably, other times it runs <em>slower</em> relative to Eager.</p>
<hr>
<p><strong>Benchmark code</strong>:</p>
<pre class="lang-py prettyprint-override"><code># use tensorflow.keras... to benchmark tf.keras; used GPU for all above benchmarks
from keras.layers import Input, Dense, LSTM, Bidirectional, Conv1D
from keras.layers import Flatten, Dropout
from keras.models import Model
from keras.optimizers import Adam
import keras.backend as K
import numpy as np
from time import time

batch_shape = (32, 400, 16)
X, y = make_data(batch_shape)

model_small = make_small_model(batch_shape)
model_small.train_on_batch(X, y)  # skip first iteration which builds graph
timeit(model_small.train_on_batch, 200, X, y)

K.clear_session()  # in my testing, kernel was restarted instead

model_medium = make_medium_model(batch_shape)
model_medium.train_on_batch(X, y)  # skip first iteration which builds graph
timeit(model_medium.train_on_batch, 10, X, y)
</code></pre>
<hr>
<p><strong>Functions used</strong>:</p>
<pre class="lang-py prettyprint-override"><code>def timeit(func, iterations, *args):
    t0 = time()
    for _ in range(iterations):
        func(*args)
    print(&quot;Time/iter: %.4f sec&quot; % ((time() - t0) / iterations))

def make_small_model(batch_shape):
    ipt   = Input(batch_shape=batch_shape)
    x     = Conv1D(128, 400, strides=4, padding='same')(ipt)
    x     = Flatten()(x)
    x     = Dropout(0.5)(x)
    x     = Dense(64, activation='relu')(x)
    out   = Dense(1,  activation='sigmoid')(x)
    model = Model(ipt, out)
    model.compile(Adam(lr=1e-4), 'binary_crossentropy')
    return model

def make_medium_model(batch_shape):
    ipt   = Input(batch_shape=batch_shape)
    x     = Bidirectional(LSTM(512, activation='relu', return_sequences=True))(ipt)
    x     = LSTM(512, activation='relu', return_sequences=True)(x)
    x     = Conv1D(128, 400, strides=4, padding='same')(x)
    x     = Flatten()(x)
    x     = Dense(256, activation='relu')(x)
    x     = Dropout(0.5)(x)
    x     = Dense(128, activation='relu')(x)
    x     = Dense(64,  activation='relu')(x)
    out   = Dense(1,   activation='sigmoid')(x)
    model = Model(ipt, out)
    model.compile(Adam(lr=1e-4), 'binary_crossentropy')
    return model
    
def make_data(batch_shape):
    return np.random.randn(*batch_shape), np.random.randint(0, 2, (batch_shape[0], 1))
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 129<br>
            <strong>Answer:</strong>
            <p><p><strong>UPDATE 8/<s>17</s>30/2020</strong>: TF 2.3 has finally done it: all cases run as fast, or notably faster, than any previous version.</p>
<p>Further, my previous update was unfair to TF; my GPU was to blame, has been overheating lately. If you see a rising stem plot of iteration times, it's a reliable symptom. Lastly, see a dev's note on <a href="https://github.com/tensorflow/tensorflow/issues/42429#issuecomment-676539007" rel="noreferrer">Eager vs Graph</a>.</p>
<p>This might be my last update on this answer. The true stats on <em>your</em> model's speed can only be found by you, on your device.</p>
<hr>
<p><strong>UPDATE 5/19/2020</strong>: TF 2.2, using same tests: only a minor improvement in Eager speed. Plots for Large-Large Numpy <code>train_on_batch</code> case below, x-axis is successive fit iterations; my GPU isn't near its full capacity, so doubt it's throttling, but iterations do get slower over time.</p>
<p><a href="https://i.sstatic.net/u74bU.png" rel="noreferrer"><img src="https://i.sstatic.net/u74bU.png" alt="enter image description here" /></a></p>
<p>Per above, Graph and Eager are <strong>1.56x</strong> and <strong>1.97x</strong> slower than their TF1 counterparts, respectively. Unsure I'll debug this further, as I'm considering switching to Pytorch per TensorFlow's poor support for custom / low-level functionality. I did, however, open an <a href="https://github.com/tensorflow/tensorflow/issues/39665" rel="noreferrer">Issue</a> to get devs' feedback.</p>
<hr>
<p><strong>UPDATE 2/18/2020</strong>: I've benched 2.1 and 2.1-nightly; the results are mixed. All but one configs (model &amp; data size) are as fast as or much faster than the best of TF2 &amp; TF1. The one that's slower, and slower dramatically, is Large-Large - esp. in Graph execution (<strong>1.6x to 2.5x slower</strong>).</p>
<p>Furthermore, there are <em>extreme</em> reproducibility differences between Graph and Eager for a large model I tested - one not explainable via randomness/compute-parallelism. I can't currently present reproducible code for these claims per time constraints, so instead I strongly recommend testing this for your own models.</p>
<p>Haven't opened a Git issue on these yet, but I did comment on the <a href="https://github.com/tensorflow/tensorflow/issues/33487" rel="noreferrer">original</a> - no response yet. I'll update the answer(s) once progress is made.</p>
<hr>
<p><strong>VERDICT</strong>: it <em>isn't</em>, IF you know what you're doing. But if you <em>don't</em>, it could cost you, lots - by a few GPU upgrades on average, and by multiple GPUs worst-case.</p>
<hr>
<p><strong>THIS ANSWER</strong>: aims to provide a high-level description of the issue, as well as guidelines for how to decide on the training configuration specific to your needs. For a detailed, low-level description, which includes all benchmarking results + code used, see my other answer.</p>
<p>I'll be updating my answer(s) w/ more info if I learn any - can bookmark / &quot;star&quot; this question for reference.</p>
<hr>
<p><strong>ISSUE SUMMARY</strong>: as <a href="https://github.com/tensorflow/tensorflow/issues/33487#issuecomment-548071133" rel="noreferrer">confirmed</a> by a TensorFlow developer, Q. Scott Zhu, TF2 focused development on Eager execution &amp; tight integration w/ Keras, which involved sweeping changes in TF source - including at graph-level. Benefits: greatly expanded processing, distribution, debug, and deployment capabilities. The cost of some of these, however, is speed.</p>
<p>The matter, however, is fairly more complex. It isn't just TF1 vs. TF2 - factors yielding significant differences in train speed include:</p>
<ol>
<li>TF2 vs. TF1</li>
<li>Eager vs. Graph mode</li>
<li><code>keras</code> vs. <code>tf.keras</code></li>
<li><code>numpy</code> vs. <code>tf.data.Dataset</code> vs. ...</li>
<li><code>train_on_batch()</code> vs. <code>fit()</code></li>
<li>GPU vs. CPU</li>
<li><code>model(x)</code> vs. <code>model.predict(x)</code> vs. ...</li>
</ol>
<p>Unfortunately, almost none of the above are independent of the other, and each can at least double execution time relative to another. Fortunately, you can determine what'll work best systematically, and with a few shortcuts - as I'll be showing.</p>
<hr>
<p><strong>WHAT SHOULD I DO?</strong> Currently, the only way is - experiment for your specific model, data, and hardware. No single configuration will always work best - but there <em>are</em> do's and don't's to simplify your search:</p>
<p><strong>&gt;&gt; DO:</strong></p>
<ul>
<li><code>train_on_batch()</code> + <code>numpy</code> + <code>tf.keras</code> + TF1 + Eager/Graph</li>
<li><code>train_on_batch()</code> + <code>numpy</code> + <code>tf.keras</code> + TF2 + Graph</li>
<li><code>fit()</code> + <code>numpy</code> + <code>tf.keras</code> + TF1/TF2 + Graph + large model &amp; data</li>
</ul>
<p><strong>&gt;&gt; DON'T:</strong></p>
<ul>
<li><p><code>fit()</code> + <code>numpy</code> + <code>keras</code> for small &amp; medium models and data</p>
</li>
<li><p><code>fit()</code> + <code>numpy</code> + <code>tf.keras</code> + TF1/TF2 + Eager</p>
</li>
<li><p><code>train_on_batch()</code> + <code>numpy</code> + <code>keras</code> + TF1 + Eager</p>
</li>
<li><p><strong>[Major]</strong> <code>tf.python.keras</code>; it can run 10-100x slower, and w/ plenty of bugs; <a href="https://stackoverflow.com/questions/58279628/what-is-the-difference-between-tf-keras-and-tf-python-keras/58279629#58279629">more info</a></p>
<ul>
<li>This includes <code>layers</code>, <code>models</code>, <code>optimizers</code>, &amp; related &quot;out-of-box&quot; usage imports; ops, utils, &amp; related 'private' imports are fine - but to be sure, check for alts, &amp; whether they're used in <code>tf.keras</code></li>
</ul>
</li>
</ul>
<p>Refer to code at bottom of my other answer for an example benchmarking setup. The list above is based mainly on the &quot;BENCHMARKS&quot; tables in the other answer.</p>
<hr>
<p><strong>LIMITATIONS</strong> of the above DO's &amp; DON'T's:</p>
<ul>
<li>This question's titled &quot;Why is TF2 much slower than TF1?&quot;, and while its body concerns training explicitly, the matter isn't limited to it; <em>inference</em>, too, is subject to major speed differences, <em>even</em> within the same TF version, import, data format, etc. - see <a href="https://stackoverflow.com/questions/58378374/why-does-keras-model-predict-slower-after-compile/58385156#58385156">this answer</a>.</li>
<li>RNNs are likely to notably change the data grid in the other answer, as they've been improved in TF2</li>
<li>Models primarily used <code>Conv1D</code> and <code>Dense</code> - no RNNs, sparse data/targets, 4/5D inputs, &amp; other configs</li>
<li>Input data limited to <code>numpy</code> and <code>tf.data.Dataset</code>, while many other formats exist; see other answer</li>
<li>GPU was used; results <em>will</em> differ on a CPU. In fact, when I asked the question, my CUDA wasn't properly configured, and some of the results were CPU-based.</li>
</ul>
<hr>
<p><strong>Why did TF2 sacrifice the most practical quality, speed, for eager execution?</strong> It hasn't, clearly - graph is still available. But if the question is &quot;why eager at all&quot;:</p>
<ul>
<li><strong>Superior debugging</strong>: you've likely come across multitudes of questions asking &quot;how do I get intermediate layer outputs&quot; or &quot;how do I inspect weights&quot;; with eager, it's (almost) as simple as <code>.__dict__</code>. Graph, in contrast, requires familiarity with special backend functions - greatly complicating the entire process of debugging &amp; introspection.</li>
<li><strong>Faster prototyping</strong>: per ideas similar to above; faster understanding = more time left for actual DL.</li>
</ul>
<hr>
<p><strong>HOW TO ENABLE/DISABLE EAGER?</strong></p>
<pre class="lang-py prettyprint-override"><code>tf.enable_eager_execution()  # TF1; must be done before any model/tensor creation
tf.compat.v1.disable_eager_execution() # TF2; above holds
</code></pre>
<p><em>Misleading</em> in TF2; see <a href="https://github.com/tensorflow/tensorflow/issues/42429#issuecomment-676539007" rel="noreferrer">here</a>.</p>
<hr>
<p><strong>ADDITIONAL INFO</strong>:</p>
<ul>
<li>Careful with <code>_on_batch()</code> methods in TF2; according to the TF dev, they still use a slower implementation, but <em>not intentionally</em> - i.e. it's to be fixed. See other answer for details.</li>
</ul>
<hr>
<p><strong>REQUESTS TO TENSORFLOW DEVS</strong>:</p>
<ol>
<li><s> Please fix <code>train_on_batch()</code>, and the performance aspect of calling <code>fit()</code> iteratively; custom train loops are important to many, especially to me. </s></li>
<li><s> Add documentation / docstring mention of these performance differences for users' knowledge.</s></li>
<li><s> Improve general execution speed to keep peeps from hopping to Pytorch.</s></li>
</ol>
<hr>
<p><strong>ACKNOWLEDGEMENTS</strong>: Thanks to</p>
<ul>
<li>Q. Scott Zhu, TensorFlow developer, for his <a href="https://github.com/tensorflow/tensorflow/issues/33487#issuecomment-548071133" rel="noreferrer">detailed clarification</a> on the matter.</li>
<li>P. Andrey for sharing <a href="https://github.com/tensorflow/tensorflow/issues/33487#issuecomment-543762187" rel="noreferrer">useful testing</a>, and discussion.</li>
</ul>
<hr>
<p><strong>UPDATES</strong>:</p>
<ul>
<li><p><em>11/14/19</em> - found a model (in my real application) that that runs slower on TF2 <em>for all* configurations</em> w/ Numpy input data. Differences ranged 13-19%, averaging 17%. Differences between <code>keras</code> and <code>tf.keras</code>, however, were more dramatic: <strong>18-40%</strong>, avg. 32% (both TF1 &amp; 2). (* - except Eager, for which TF2 OOM'd)</p>
</li>
<li><p><em>11/17/19</em> - devs updated <code>on_batch()</code> methods in a <a href="https://github.com/tensorflow/tensorflow/issues/33487#issuecomment-554123856" rel="noreferrer">recent commit</a>, stating to have improved speed - to be released in TF 2.1, or available now as <code>tf-nightly</code>. As I'm unable to get latter running, will delay benching until 2.1.</p>
</li>
<li><p><em>2/20/20</em> - prediction performance is also worth benching; in TF2, for example, CPU prediction times can involve <a href="https://stackoverflow.com/questions/60267911/keras-inconsistent-prediction-time">periodic spikes</a></p>
</li>
</ul>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, performance-testing, keras, tensorflow, tensorflow2.0
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I've got an <strong>ApolloServer</strong> project that's giving me trouble, so I thought I might update it and ran into issues when using the latest Babel. My &quot;index.js&quot; is:</p>
<pre><code>require('dotenv').config()
import {startServer} from './server'
startServer()
</code></pre>
<p>And when I run it I get the error</p>
<blockquote>
<p>SyntaxError: Cannot use import statement outside a module</p>
</blockquote>
<p>First I tried doing things to convince TPTB* that this was a module (with no success). So I changed the &quot;<strong>import</strong>&quot; to a &quot;<strong>require</strong>&quot; and this worked.</p>
<p>But now I have about two dozen &quot;<strong>imports</strong>&quot; in other files giving me the same error.</p>
<p>*I'm sure the root of my problem is that I'm not even sure what's complaining about the issue. I sort of assumed it was Babel 7 (since I'm coming from Babel 6 and I had to change the presets) but I'm not 100% sure.</p>
<p>Most of what I've found for solutions don't seem to apply to straight Node. Like this one here:</p>
<p><em><a href="https://stackoverflow.com/questions/47632562/es6-module-import-giving-uncaught-syntaxerror-unexpected-identifier/47633417#47633417">ES6 module Import giving &quot;Uncaught SyntaxError: Unexpected identifier&quot;</a></em></p>
<p>Says it was resolved by adding &quot;type=module&quot; but this would typically go in the HTML, of which I have none. I've also tried using my project's old presets:</p>
<pre class="lang-json prettyprint-override"><code>&quot;presets&quot;: [&quot;es2015&quot;, &quot;stage-2&quot;],
&quot;plugins&quot;: []
</code></pre>
<p>But that gets me another error: &quot;Error: Plugin/Preset files are not allowed to export objects, only functions.&quot;</p>
<p>Here are the dependencies I started with:</p>
<pre class="lang-json prettyprint-override"><code>&quot;dependencies&quot;: {
  &quot;@babel/polyfill&quot;: &quot;^7.6.0&quot;,
  &quot;apollo-link-error&quot;: &quot;^1.1.12&quot;,
  &quot;apollo-link-http&quot;: &quot;^1.5.16&quot;,
  &quot;apollo-server&quot;: &quot;^2.9.6&quot;,
  &quot;babel-preset-es2015&quot;: &quot;^6.24.1&quot;,
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 809<br>
            <strong>Answer:</strong>
            <p><p>Verify that you have the latest version of Node.js installed (or, at least 13.2.0+). Then do one of the following, as <a href="https://nodejs.org/api/esm.html#esm_package_json_type_field" rel="noreferrer">described in the documentation</a>:</p>
<p><strong>Option 1</strong></p>
<p>In the nearest parent <code>package.json</code> file, add the top-level <code>&quot;type&quot;</code> field with a value of <code>&quot;module&quot;</code>. This will ensure that all <code>.js</code> and <code>.mjs</code> files are interpreted as ES modules. You can interpret individual files as <a href="https://en.wikipedia.org/wiki/CommonJS" rel="noreferrer">CommonJS</a> by using the <code>.cjs</code> extension.</p>
<pre class="lang-json prettyprint-override"><code>// package.json
{
  &quot;type&quot;: &quot;module&quot;
}
</code></pre>
<p><strong>Option 2</strong></p>
<p>Explicitly name files with the <code>.mjs</code> extension. All other files, such as <code>.js</code> will be interpreted as CommonJS, which is the default if <code>type</code> is not defined in <code>package.json</code>.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, node.js, node-modules, package.json, npm-package
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>Since the last update, I'm having an error with cookies, related with SameSite attribute.</p>

<p>The cookies are from third party developers (Fontawesome, jQuery, Google Analytics, Google reCaptcha, Google Fonts, etc.)</p>

<p>The errors in the Chrome console are like this.</p>

<pre class="lang-none prettyprint-override"><code>A cookie associated with a cross-site resource at &lt;URL&gt; was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at &lt;URL&gt; and &lt;URL&gt;.
(index):1 A cookie associated with a cross-site resource at http://jquery.com/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.
(index):1 A cookie associated with a cross-site resource at http://fontawesome.com/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.
(index):1 A cookie associated with a cross-site resource at http://google.com/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.
(index):1 A cookie associated with a cross-site resource at https://google.com/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.
(index):1 A cookie associated with a cross-site resource at https://www.google.com/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.
(index):1 A cookie associated with a cross-site resource at http://www.google.com/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.
(index):1 A cookie associated with a cross-site resource at http://gstatic.com/ was set without the `SameSite` attribute. A future release of Chrome will only deliver cookies with cross-site requests if they are set with `SameSite=None` and `Secure`. You can review cookies in developer tools under Application&gt;Storage&gt;Cookies and see more details at https://www.chromestatus.com/feature/5088147346030592 and https://www.chromestatus.com/feature/5633521622188032.
</code></pre>

<p>Is there anything I need to do in my local machine or server or is just some feature they should implement in future releases of their libraries?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 185<br>
            <strong>Answer:</strong>
            <p><p>This console warning is not an error or an actual problem ‚Äî Chrome is just spreading the word about this new standard to increase developer adoption.</p>
<p>It has nothing to do with your code. It is something <strong>their web servers</strong> will have to support.</p>
<p>Release date for a fix is February 4, 2020 per:
<a href="https://www.chromium.org/updates/same-site" rel="nofollow noreferrer">https://www.chromium.org/updates/same-site</a></p>
<p><strong>February, 2020:</strong> Enforcement rollout for Chrome 80 Stable: The SameSite-by-default and SameSite=None-requires-Secure behaviors will begin rolling out to Chrome 80 Stable for an initial limited population starting the week of <strong>February 17, 2020</strong>, excluding the US President‚Äôs Day holiday on Monday. We will be closely monitoring and evaluating ecosystem impact from this initial limited phase through gradually increasing rollouts.</p>
<p>For the full Chrome release schedule, <a href="https://chromiumdash.appspot.com/schedule" rel="nofollow noreferrer">see here</a>.</p>
<p>I solved same problem by adding in response header</p>
<pre><code>response.setHeader(&quot;Set-Cookie&quot;, &quot;HttpOnly;Secure;SameSite=Strict&quot;);
</code></pre>
<p><code>SameSite</code> prevents the browser from sending the cookie along with cross-site requests. The main goal is mitigating the risk of cross-origin information leakage. It also provides some protection against cross-site request forgery attacks. Possible values for the flag are Lax or Strict.</p>
<p>SameSite cookies explained <a href="https://web.dev/samesite-cookies-explained/" rel="nofollow noreferrer">here</a></p>
<p>Please refer <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie" rel="nofollow noreferrer">this</a> before applying any option.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, cookies, google-chrome, samesite
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Nov-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>Google is deprecating Android AsyncTask API in Android 11 and suggesting to use <code>java.util.concurrent</code> instead. you can check out the commit <a href="https://android-review.googlesource.com/c/platform/frameworks/base/+/1156409" rel="noreferrer">here</a></p>
<pre><code> *
 * @deprecated Use the standard &lt;code&gt;java.util.concurrent&lt;/code&gt; or
 *   &lt;a href=&quot;https://developer.android.com/topic/libraries/architecture/coroutines&quot;&gt;
 *   Kotlin concurrency utilities&lt;/a&gt; instead.
 */
@Deprecated
public abstract class AsyncTask&lt;Params, Progress, Result&gt; {
</code></pre>
<p>If you‚Äôre maintaining an older codebase with asynchronous tasks in Android, you‚Äôre likely going to have to change it in future. My question is that what should be proper replacement of the code snippet shown below using <code>java.util.concurrent</code>. It is a static inner class of an Activity. I am looking for something that will work with <code>minSdkVersion 16</code></p>
<pre><code>private static class LongRunningTask extends AsyncTask&lt;String, Void, MyPojo&gt; {
        private static final String TAG = MyActivity.LongRunningTask.class.getSimpleName();
        private WeakReference&lt;MyActivity&gt; activityReference;

        LongRunningTask(MyActivity context) {
            activityReference = new WeakReference&lt;&gt;(context);
        }

        @Override
        protected MyPojo doInBackground(String... params) {
            // Some long running task
            
        }

        @Override
        protected void onPostExecute(MyPojo data) {

            MyActivity activity = activityReference.get();
            activity.progressBar.setVisibility(View.GONE);
            populateData(activity, data) ;
        }     


    }
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 128<br>
            <strong>Answer:</strong>
            <p><blockquote>
<pre><code>private WeakReference&lt;MyActivity&gt; activityReference;
</code></pre>
</blockquote>

<p>Good riddance that it's deprecated, <a href="https://proandroiddev.com/a-quick-story-about-async-callbacks-memory-leaks-weakreferences-and-misconceptions-78003b3d6b26" rel="noreferrer">because the <code>WeakReference&lt;Context&gt;</code> was always a hack, and not a proper solution</a>.</p>

<p>Now people will have the opportunity to sanitize their code.</p>

<hr>

<blockquote>
<pre><code>AsyncTask&lt;String, Void, MyPojo&gt; 
</code></pre>
</blockquote>

<p>Based on this code, <code>Progress</code> is actually not needed, and there is a <code>String</code> input + <code>MyPojo</code> output. </p>

<p>This is actually quite easy to accomplish without any use of AsyncTask.</p>

<pre><code>public class TaskRunner {
    private final Executor executor = Executors.newSingleThreadExecutor(); // change according to your requirements
    private final Handler handler = new Handler(Looper.getMainLooper());

    public interface Callback&lt;R&gt; {
        void onComplete(R result);
    }

    public &lt;R&gt; void executeAsync(Callable&lt;R&gt; callable, Callback&lt;R&gt; callback) {
        executor.execute(() -&gt; {
            final R result = callable.call();
            handler.post(() -&gt; {
                callback.onComplete(result);
            });
        });
    }
}
</code></pre>

<p>How to pass in the String? Like so:</p>

<pre><code>class LongRunningTask implements Callable&lt;MyPojo&gt; {
    private final String input;

    public LongRunningTask(String input) {
        this.input = input;
    }

    @Override
    public MyPojo call() {
        // Some long running task
        return myPojo;
    }
}
</code></pre>

<p>And</p>

<pre><code>// in ViewModel
taskRunner.executeAsync(new LongRunningTask(input), (data) -&gt; {
    // MyActivity activity = activityReference.get();
    // activity.progressBar.setVisibility(View.GONE);
    // populateData(activity, data) ;

    loadingLiveData.setValue(false);
    dataLiveData.setValue(data);
});

// in Activity
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main_activity);

    viewModel = ViewModelProviders.of(this).get(MyViewModel.class);
    viewModel.loadingLiveData.observe(this, (loading) -&gt; {
        if(loading) {
            progressBar.setVisibility(View.VISIBLE);
        } else {
            progressBar.setVisibility(View.GONE);
        }
    });

    viewModel.dataLiveData.observe(this, (data) -&gt; {
        populateData(data);
    }); 
}
</code></pre>

<hr>

<p>This example used a single-threaded pool which is good for DB writes (or serialized network requests), but if you want something for DB reads or multiple requests, you can consider the following Executor configuration:</p>

<pre><code>private static final Executor THREAD_POOL_EXECUTOR =
        new ThreadPoolExecutor(5, 128, 1,
                TimeUnit.SECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, android, android-asynctask, kotlin, kotlin-coroutines
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>Here's the code:</p>

<pre><code>const test = Array.from(document.getElementsByClassName('mat-form-field-infix'));
test.forEach((element) =&gt; {
    element.outerHTML = '&lt;div class="good-day-today" style="width: 0px;"&gt;&lt;/div&gt;'; // Please note that this line works fine!
    element.style.padding = '10px';
    element.style.borderTop = '0';
});
</code></pre>

<p>Error I get when compiled:</p>

<blockquote>
  <p>ERROR in src/app/<strong><em>/</em></strong>.component.ts(101,21): error TS2339: Property
  'style' does not exist on type 'Element'.
  src/app/<strong><em>/</em></strong>.component.ts(102,21): error TS2339: Property 'style'
  does not exist on type 'Element'.</p>
</blockquote>

<p>How can I fix it?</p>

<p>I tried to remove the <code>Array.from...</code> part, tried to use <code>for of</code> and <code>for in</code>, tried <code>as any</code>, but above is the way I have to do it.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 172<br>
            <strong>Answer:</strong>
            <p><p>You need a typecast:</p>

<pre><code>Array.from(document.getElementsByClassName('mat-form-field-infix') as HTMLCollectionOf&lt;HTMLElement&gt;)
</code></pre>

<p>That's because <code>getElementsByClassName</code> <a href="https://github.com/microsoft/TypeScript/blob/165b4bc10057e763429d44f9d4e4d70eade9a5e9/lib/lib.dom.d.ts#L4897" rel="noreferrer">only returns</a> <code>HTMLCollection&lt;Element&gt;</code>, and <code>Element</code> does not have a <code>style</code>property. The <code>HTMLElement</code> however <a href="https://github.com/microsoft/TypeScript/blob/165b4bc10057e763429d44f9d4e4d70eade9a5e9/lib/lib.dom.d.ts#L6693" rel="noreferrer">does implement it</a> via it's <code>ElementCSSInlineStyle</code> extended interface.</p>

<p>Note that this typecast is typesafe in the way that every <code>Element</code>is either a <code>HTMLElement</code> or an <code>SVGElement</code>, and I hope that your <a href="https://developer.mozilla.org/de/docs/Web/SVG/Element/svg" rel="noreferrer">SVG Elements</a> don't have a class.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, typescript
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>This:</p>
<pre><code>device = torch.device(&quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;)
model.to(device)

for data in dataloader:
    inputs, labels = data
    outputs = model(inputs)
</code></pre>
<p>Gives the error:</p>
<blockquote>
<p>RuntimeError: Input type (torch.FloatTensor) and weight type (torch.cuda.FloatTensor) should be the same</p>
</blockquote>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 315<br>
            <strong>Answer:</strong>
            <p><p>You get this error because your model is on the GPU, but your data is on the CPU. So, you need to send your input tensors to the GPU.</p>
<pre class="lang-py prettyprint-override"><code>inputs, labels = data                         # this is what you had
inputs, labels = inputs.cuda(), labels.cuda() # add this line
</code></pre>
<p>Or like this, to stay consistent with the rest of your code:</p>
<pre class="lang-py prettyprint-override"><code>device = torch.device(&quot;cuda:0&quot; if torch.cuda.is_available() else &quot;cpu&quot;)

inputs, labels = inputs.to(device), labels.to(device)
</code></pre>
<p>The <strong>same error</strong> will be raised if your input tensors are on the GPU but your model weights aren't. In this case, you need to send your model weights to the GPU.</p>
<pre><code>model = MyModel()

if torch.cuda.is_available():
    model.cuda()
</code></pre>
<p>See the documentation for <a href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor.cuda" rel="noreferrer"><code>cuda()</code></a>, and its opposite, <a href="https://pytorch.org/docs/stable/tensors.html#torch.Tensor.cpu" rel="noreferrer"><code>cpu()</code></a>.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, machine-learning, python-3.x, deep-learning, pytorch
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>Today when I tried to run simple code on Sublime Text 3, the following message appeared:</p>
<blockquote>
<p>Python was not found but can be installed from the Microsoft Store: <a href="https://go.microsoft.com/fwlink?linkID=2082640" rel="noreferrer">https://go.microsoft.com/fwlink?linkID=2082640</a></p>
</blockquote>
<p>And when I type Python in CMD, it opens the Windows Store for me to download Python 3.7. This problem started today for no good reason. I didn't change or download anything about Python and already tried reinstalling Python, and the Path environment variable is correct.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 765<br>
            <strong>Answer:</strong>
            <p><p>Use the Windows search bar to find &quot;Manage app execution aliases&quot;. There should be two aliases for Python. Unselect them, and this will allow the usual Python aliases &quot;python&quot; and &quot;python3&quot;. See the image below.</p>
<p><a href="https://i.sstatic.net/eDPFY.png" rel="noreferrer"><img src="https://i.sstatic.net/eDPFY.png" alt="Enter image description here" /></a></p>
<p>I think we have this problem when installing Python because in a new Windows installation the aliases are in the ON position as in image below. When turned on, Windows puts an empty or fake file named <em>python.exe</em> and <em>python3.exe</em> in the directory named %USERPROFILE%\AppData\Local\Microsoft\WindowsApps. This is the alias.</p>
<p><a href="https://i.sstatic.net/UCwkU.png" rel="noreferrer"><img src="https://i.sstatic.net/UCwkU.png" alt="Enter image description here" /></a></p>
<p>Then Microsoft put that directory at the top of the list in the &quot;Path&quot; environment variables.</p>
<p><a href="https://i.sstatic.net/iTeHL.png" rel="noreferrer"><img src="https://i.sstatic.net/iTeHL.png" alt="Enter image description here" /></a></p>
<p>When you enter &quot;python&quot; in cmd, it searches the directories listed in your &quot;Path&quot; environment variables page from top to bottom. So if you installed Python after a new Windows 10 install then get redirected to the Windows Store, it's because there are two python.exe's: The alias in the App Execution Alias page, and the real one wherever you installed Python. But cmd finds the App execution, alias python.exe, first because that directory is at the top of the Path.</p>
<p>I think the easiest solution is to just check the <em>python.exe</em> and <em>python3.exe</em> to OFF as I suggested before, which deletes the fake EXE file files.</p>
<p>The first time I ran into this problem, I manually deleted the <em>python.exe</em> and <em>python3.exe</em> files but when I restarted the files regenerated. That prompted me to search for the App Execution Aliases page and uncheck the box, which solved it for me, by not allowing the files to regenerate.</p>
<p>Based on <a href="https://devblogs.microsoft.com/python/python-in-the-windows-10-may-2019-update/" rel="noreferrer">this Microsoft Devblog</a>, they stated they created this system partially for new Python users, specifically kids learning Python in school that had trouble installing it, and focus on learning to code. I think Windows probably deletes those aliases if you install Python from the Windows App Store. We are noticing that they do not get deleted if you manually install from another source.</p>
<p>(Also, the empty/fake python.exe is not really empty. It says 0 KB in the screenshot, but entering &quot;start ms-windows-store:&quot; in cmd opens the Windows App Store, so it probably just has a line with that and a way to direct it to the Python page.)</p>
<p>One alternative, as Chipjust suggested, you can create a new alias for Python using something like DOSKEY as explained in this article for example:
<em><a href="https://winaero.com/how-to-set-aliases-for-the-command-prompt-in-windows/" rel="noreferrer">How to set aliases for the command prompt in Windows</a></em></p>
<p>Another alternative is to delete the user path environment variable that points to the alias files, %USERPROFILE%\AppData\Local\Microsoft\WindowsApps, but the App Execution Aliases handle more apps than just python, and deleting the path from environment variables breaks all the other apps that have execution aliases in that directory; which on my PC includes notepad, xbox game bar, spotify, monitoring software for my motherboard, paint, windows subsystem for android, to name a few. Also if you think about it, the average Windows user is unfamiliar editing environment variables and on school and business owned computers requires administrative access. So deleting the path to ...\WindowsApps, from the path environment variable, is not ideal.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, sublimetext3, windows-10
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>TypeScript 3.7 now supports the <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#optional-chaining" rel="noreferrer">optional chaining operator</a>. Hence, you can write code such as:</p>
<pre><code>const value = a?.b?.c;
</code></pre>
<p>I.e., you can use this operator to access properties of an object, where the object itself may be <code>null</code> or <code>undefined</code>. Now what I would like to do is basically the same, but the property names are dynamic:</p>
<pre><code>const value = a?[b]?.c;
</code></pre>
<p>However, there I get a syntax error:</p>
<blockquote>
<p>error TS1005: ':' expected.</p>
</blockquote>
<p>What am I doing wrong here? Is this even possible?</p>
<p>The <a href="https://github.com/tc39/proposal-optional-chaining#syntax" rel="noreferrer">proposal</a> seems to imply that this is not possible (but maybe I get the syntax examples wrong).</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 317<br>
            <strong>Answer:</strong>
            <p><p>When accessing a property using bracket notation and optional chaining, you need to use a dot in addition to the brackets:</p>
<pre><code>const value = a?.[b]?.c;
</code></pre>
<p>This is the syntax that was adopted by the <a href="https://github.com/tc39/proposal-optional-chaining" rel="noreferrer">TC39 proposal</a>, because otherwise it's hard for the parser to figure out if this <code>?</code> is part of a ternary expression or part of optional chaining.</p>
<p>The way I think about it: the symbol for optional chaining isn't <code>?</code>, it's <code>?.</code>. If you're doing optional chaining, you'll always be using both characters.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, typescript, optional-chaining
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Dec-19</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>I am generating a <code>dl</code> in React:</p>
<pre class="lang-js prettyprint-override"><code>&lt;dl&gt;
  {
    highlights.map(highlight =&gt; {
      const count = text.split(highlight).length - 1;

      return (
        &lt;&gt;
          &lt;dt key={`dt-${highlight.id}`}&gt;{highlight}&lt;/dt&gt;
          &lt;dd key={`dd-${highlight.id}`}&gt;{count}&lt;/dd&gt;
        &lt;/&gt;
      );
    })
  }
&lt;/dl&gt;
</code></pre>
<p>This gives me the warning:</p>
<blockquote>
<p>Warning: Each child in a list should have a unique &quot;key&quot; prop.</p>
</blockquote>
<p>This will remove the warning, but doesn't generate the HTML I want:</p>
<pre class="lang-js prettyprint-override"><code>&lt;dl&gt;
  {
    highlights.map(highlight =&gt; {
      const count = text.split(highlight).length - 1;

      return (
        &lt;div key={highlight.id}&gt;
          &lt;dt&gt;{highlight}&lt;/dt&gt;
          &lt;dd&gt;{count}&lt;/dd&gt;
        &lt;/div&gt;
      );
    })
  }
&lt;/dl&gt;
</code></pre>
<p>And I cannot add a <code>key</code> prop to a fragment (<code>&lt;&gt;   &lt;/&gt;</code>).</p>
<p>How can work around this?</p>
<hr />
<p>I am using React <code>16.12.0</code>.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 536<br>
            <strong>Answer:</strong>
            <p><p>To add a key to a fragment you need to use full Fragment syntax:</p>
<pre><code>&lt;React.Fragment key={your key}&gt;
...
&lt;/React.Fragment&gt;
</code></pre>
<p>See docs here <a href="https://reactjs.org/docs/fragments.html#keyed-fragments" rel="noreferrer">https://reactjs.org/docs/fragments.html#keyed-fragments</a></p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, jsx, reactjs
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I created a conda environment with Python version 3.8, but it doesn't support matplotlib... So I am looking for something like this to change the Python version: <code>conda env my_env update to python=3.6</code>. Is this possible or do I need to recreate the environment?</p>
<p>I have miniconda installed.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 302<br>
            <strong>Answer:</strong>
            <p><p>Activate the relevant environment, then install your target python version.</p>

<pre><code>conda activate my_env
conda install python=3.6
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, version, conda, virtual-environment
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I think it's a pretty common message for PyTorch users with low GPU memory:</p>
<pre><code>RuntimeError: CUDA out of memory. Tried to allocate X MiB (GPU X; X GiB total capacity; X GiB already allocated; X MiB free; X cached)
</code></pre>
<p>I tried to process an image by loading each layer to GPU and then loading it back:</p>
<pre class="lang-py prettyprint-override"><code>for m in self.children():
    m.cuda()
    x = m(x)
    m.cpu()
    torch.cuda.empty_cache()
</code></pre>
<p>But it doesn't seem to be very effective. I'm wondering is there any tips and tricks to train large deep learning models while using little GPU memory.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 130<br>
            <strong>Answer:</strong>
            <p><p>Although</p>
<pre><code>import torch
torch.cuda.empty_cache()
</code></pre>
<p>provides a good alternative for clearing the occupied cuda memory and we can also manually clear the not in use variables by using,</p>
<pre><code>import gc
del variables
gc.collect()
</code></pre>
<p>But still after using these commands, the error might appear again because pytorch doesn't actually clears the memory instead clears the reference to the memory occupied by the variables.
So reducing the batch_size after restarting the kernel and finding the optimum batch_size is the best possible option (but sometimes not a very feasible one).</p>
<p>Another way to get a deeper insight into the alloaction of memory in gpu is to use:</p>
<pre><code>torch.cuda.memory_summary(device=None, abbreviated=False)
</code></pre>
<p>wherein, both the arguments are optional. This gives a readable summary of memory allocation and allows you to figure the reason of CUDA running out of memory and restart the kernel to avoid the error from happening again (Just like I did in my case).</p>
<p>Passing the data iteratively might help but changing the size of layers of your network or breaking them down would also prove effective (as sometimes the model also occupies a significant memory for example, while doing transfer learning).</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, object-detection, low-memory, deep-learning, pytorch
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>When trying to use any <code>hg</code> Mercurial commands on the console, I keep getting this error. 
I installed Python using Homebrew and I am running Mac OS Catalina v. 10.15.1.</p>

<p>Any reference would be appreciated. Here is the error I'm getting:</p>

<pre><code>hg commit --amend
ERROR:root:code for hash md5 was not found.
Traceback (most recent call last):
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 147, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type md5
ERROR:root:code for hash sha1 was not found.
Traceback (most recent call last):
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 147, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha1
ERROR:root:code for hash sha224 was not found.
Traceback (most recent call last):
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 147, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha224
ERROR:root:code for hash sha256 was not found.
Traceback (most recent call last):
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 147, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha256
ERROR:root:code for hash sha384 was not found.
Traceback (most recent call last):
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 147, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha384
ERROR:root:code for hash sha512 was not found.
Traceback (most recent call last):
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 147, in &lt;module&gt;
    globals()[__func_name] = __get_hash(__func_name)
  File "/usr/local/Cellar/python@2/2.7.15_3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/hashlib.py", line 97, in __get_builtin_constructor
    raise ValueError('unsupported hash type ' + name)
ValueError: unsupported hash type sha512
Traceback (most recent call last):
  File "/usr/local/bin/hg", line 43, in &lt;module&gt;
    dispatch.run()
  File "/usr/local/Cellar/mercurial/4.9/lib/python2.7/site-packages/hgdemandimport/demandimportpy2.py", line 150, in __getattr__
    self._load()
  File "/usr/local/Cellar/mercurial/4.9/lib/python2.7/site-packages/hgdemandimport/demandimportpy2.py", line 94, in _load
    _origimport, head, globals, locals, None, level)
  File "/usr/local/Cellar/mercurial/4.9/lib/python2.7/site-packages/hgdemandimport/demandimportpy2.py", line 43, in _hgextimport
    return importfunc(name, globals, *args, **kwargs)
  File "/usr/local/Cellar/mercurial/4.9/lib/python2.7/site-packages/mercurial/dispatch.py", line 625, in &lt;module&gt;
    class lazyaliasentry(object):
  File "/usr/local/Cellar/mercurial/4.9/lib/python2.7/site-packages/mercurial/dispatch.py", line 636, in lazyaliasentry
    @util.propertycache
  File "/usr/local/Cellar/mercurial/4.9/lib/python2.7/site-packages/hgdemandimport/demandimportpy2.py", line 150, in __getattr__
    self._load()
  File "/usr/local/Cellar/mercurial/4.9/lib/python2.7/site-packages/hgdemandimport/demandimportpy2.py", line 94, in _load
    _origimport, head, globals, locals, None, level)
  File "/usr/local/Cellar/mercurial/4.9/lib/python2.7/site-packages/hgdemandimport/demandimportpy2.py", line 43, in _hgextimport
    return importfunc(name, globals, *args, **kwargs)
  File "/usr/local/Cellar/mercurial/4.9/lib/python2.7/site-packages/mercurial/util.py", line 180, in &lt;module&gt;
    'md5': hashlib.md5,
  File "/usr/local/Cellar/mercurial/4.9/lib/python2.7/site-packages/hgdemandimport/demandimportpy2.py", line 151, in __getattr__
    return getattr(self._module, attr)
AttributeError: 'module' object has no attribute 'md5'
</code></pre>

<p>I also tried following the instruction on this issue but none of the solutions seem to work </p>

<pre><code>brew link openssl --force
Warning: Refusing to link macOS-provided software: openssl@1.1
If you need to have openssl@1.1 first in your PATH run:
  echo 'export PATH="/usr/local/opt/openssl@1.1/bin:$PATH"' &gt;&gt; ~/.zshrc

For compilers to find openssl@1.1 you may need to set:
  export LDFLAGS="-L/usr/local/opt/openssl@1.1/lib"
  export CPPFLAGS="-I/usr/local/opt/openssl@1.1/include"

For pkg-config to find openssl@1.1 you may need to set:
  export PKG_CONFIG_PATH="/usr/local/opt/openssl@1.1/lib/pkgconfig"
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 713<br>
            <strong>Answer:</strong>
            <p><p>Running <code>brew reinstall python@2</code> didn't work for my existing Python 2.7 virtual environments. Inside them there were still <code>ERROR:root:code for hash sha1 was not found</code> errors.</p>

<p>I encountered this problem after I ran <code>brew upgrade openssl</code>. And here's the fix:</p>

<pre><code>$ ls /usr/local/Cellar/openssl
</code></pre>

<p>...which shows</p>

<pre><code>1.0.2t
</code></pre>

<p>According to the existing version, run:</p>

<pre><code>$ brew switch openssl 1.0.2t
</code></pre>

<p>...which shows</p>

<pre><code>Cleaning /usr/local/Cellar/openssl/1.0.2t
Opt link created for /usr/local/Cellar/openssl/1.0.2t
</code></pre>

<p>After that, run the following command in a Python 2.7 virtualenv:</p>

<pre><code>(my-venv) $ python -c "import hashlib;m=hashlib.md5();print(m.hexdigest())"
</code></pre>

<p>...which shows</p>

<pre><code>d41d8cd98f00b204e9800998ecf8427e
</code></pre>

<p>No more errors.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, macos, mercurial, homebrew, openssl
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>While <a href="https://vue-composition-api-rfc.netlify.com/api.html#watch" rel="noreferrer">Vue Composition API RFC Reference site</a> has many advanced use scenarios with the <code>watch</code> module, there are no examples of <strong>how to watch component props</strong>.</p>
<p>Neither is it mentioned in <a href="https://vue-composition-api-rfc.netlify.com/#api-introduction" rel="noreferrer">Vue Composition API RFC's main page</a> or <a href="https://github.com/vuejs/composition-api#watch-api" rel="noreferrer">vuejs/composition-api in Github</a>.</p>
<p>I've created a <a href="https://codesandbox.io/s/how-to-watch-props-with-vue-composition-api-ijno4" rel="noreferrer">Codesandbox</a> to elaborate on this issue.</p>
<pre class="lang-html prettyprint-override"><code>&lt;template&gt;
  &lt;div id=&quot;app&quot;&gt;
    &lt;img width=&quot;25%&quot; src=&quot;./assets/logo.png&quot;&gt;
    &lt;br&gt;
    &lt;p&gt;Prop watch demo with select input using v-model:&lt;/p&gt;
    &lt;PropWatchDemo :selected=&quot;testValue&quot;/&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { createComponent, onMounted, ref } from &quot;@vue/composition-api&quot;;
import PropWatchDemo from &quot;./components/PropWatchDemo.vue&quot;;

export default createComponent({
  name: &quot;App&quot;,
  components: {
    PropWatchDemo
  },
  setup: (props, context) =&gt; {
    const testValue = ref(&quot;initial&quot;);

    onMounted(() =&gt; {
      setTimeout(() =&gt; {
        console.log(&quot;Changing input prop value after 3s delay&quot;);
        testValue.value = &quot;changed&quot;;
        // This value change does not trigger watchers?
      }, 3000);
    });

    return {
      testValue
    };
  }
});
&lt;/script&gt;
</code></pre>
<pre class="lang-html prettyprint-override"><code>&lt;template&gt;
  &lt;select v-model=&quot;selected&quot;&gt;
    &lt;option value=&quot;null&quot;&gt;null value&lt;/option&gt;
    &lt;option value&gt;Empty value&lt;/option&gt;
  &lt;/select&gt;
&lt;/template&gt;

&lt;script&gt;
import { createComponent, watch } from &quot;@vue/composition-api&quot;;

export default createComponent({
  name: &quot;MyInput&quot;,
  props: {
    selected: {
      type: [String, Number],
      required: true
    }
  },
  setup(props) {
    console.log(&quot;Setup props:&quot;, props);

    watch((first, second) =&gt; {
      console.log(&quot;Watch function called with args:&quot;, first, second);
      // First arg function registerCleanup, second is undefined
    });

    // watch(props, (first, second) =&gt; {
    //   console.log(&quot;Watch props function called with args:&quot;, first, second);
    //   // Logs error:
    //   // Failed watching path: &quot;[object Object]&quot; Watcher only accepts simple
    //   // dot-delimited paths. For full control, use a function instead.
    // })

    watch(props.selected, (first, second) =&gt; {
      console.log(
        &quot;Watch props.selected function called with args:&quot;,
        first,
        second
      );
      // Both props are undefined so it's just a bare callback func to be run
    });

    return {};
  }
});
&lt;/script&gt;
</code></pre>
<p>Although my question and code example were initially with JavaScript, I'm using TypeScript. Tony Tom's first answer although working, led to a type error. Which was solved by Michal Lev√Ω's answer. So I've tagged this question with <code>typescript</code> afterward.</p>
<p>Here is my polished yet barebones version of the reactive wirings for this custom select component, on top of <code>&lt;b-form-select&gt;</code> from <code>bootstrap-vue</code> <em>(otherwise agnostic-implementation but this underlying component does emit @input and @change events both, based on whether the change was made programmatically or by user interaction)</em>.</p>
<pre class="lang-html prettyprint-override"><code>&lt;template&gt;
  &lt;b-form-select
    v-model=&quot;selected&quot;
    :options=&quot;{}&quot;
    @input=&quot;handleSelection('input', $event)&quot;
    @change=&quot;handleSelection('change', $event)&quot;
  /&gt;
&lt;/template&gt;

&lt;script lang=&quot;ts&quot;&gt;
import {
  createComponent, SetupContext, Ref, ref, watch, computed,
} from '@vue/composition-api';

interface Props {
  value?: string | number | boolean;
}

export default createComponent({
  name: 'CustomSelect',
  props: {
    value: {
      type: [String, Number, Boolean],
      required: false, // Accepts null and undefined as well
    },
  },
  setup(props: Props, context: SetupContext) {
    // Create a Ref from prop, as two-way binding is allowed only with sync -modifier,
    // with passing prop in parent and explicitly emitting update event on child:
    // Ref: https://v2.vuejs.org/v2/guide/components-custom-events.html#sync-Modifier
    // Ref: https://medium.com/@jithilmt/vue-js-2-two-way-data-binding-in-parent-and-child-components-1cd271c501ba
    const selected: Ref&lt;Props['value']&gt; = ref(props.value);

    const handleSelection = function emitUpdate(type: 'input' | 'change', value: Props['value']) {
      // For sync -modifier where 'value' is the prop name
      context.emit('update:value', value);
      // For @input and/or @change event propagation
      // @input emitted by the select component when value changed &lt;programmatically&gt;
      // @change AND @input both emitted on &lt;user interaction&gt;
      context.emit(type, value);
    };

    // Watch prop value change and assign to value 'selected' Ref
    watch(() =&gt; props.value, (newValue: Props['value']) =&gt; {
      selected.value = newValue;
    });

    return {
      selected,
      handleSelection,
    };
  },
});
&lt;/script&gt;
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 249<br>
            <strong>Answer:</strong>
            <p><p>If you take a look at <code>watch</code> typings <a href="https://vuejs.org/api/reactivity-core.html#watch" rel="noreferrer">here</a> it makes it clear the first argument of <code>watch</code> could be an <code>array</code>, <code>function</code> or <code>Ref&lt;T&gt;</code></p>
<p><code>props</code> passed to the <code>setup</code> function are a reactive object (likely by <a href="https://vuejs.org/api/reactivity-core.html#reactive" rel="noreferrer"><code>readonly(reactive())</code></a>, it's properties are getters. So what you are doing is passing the value of the getter as the 1st argument of <code>watch</code>, string &quot;initial&quot; in this case. Because Vue 2 <code>$watch</code> <a href="https://v2.vuejs.org/v2/api/#vm-watch" rel="noreferrer">API</a> is used under the hood (and same function <a href="https://vuejs.org/api/component-instance.html#watch" rel="noreferrer">exists</a> in Vue 3), you are effectively trying to watch non-existent property with name &quot;initial&quot; on your component instance.</p>
<p>Your callback was only called once. The reason it was called at least once is because the new <code>watch</code> API is behaving like the current <code>$watch</code> with the <code>immediate</code> option (<strong>UPDATE 03/03/2021</strong> - this was later changed and in release version of Vue 3, <code>watch</code> is lazy same way as it was in Vue 2)</p>
<p>So by accident you are doing the same thing Tony Tom suggested but with the wrong value. In both cases, it is not valid code when you are using TypeScript.</p>
<p>You can do this instead:</p>
<pre class="lang-js prettyprint-override"><code>watch(() =&gt; props.selected, (first, second) =&gt; {
      console.log(
        &quot;Watch props.selected function called with args:&quot;,
        first,
        second
      );
    });
</code></pre>
<p>Here the 1st function is executed immediately by Vue to collect dependencies (to know what should trigger the callback) and 2nd function is the callback itself.</p>
<p>Other way would be to convert props object using <code>toRefs</code> so it's properties would be of type <code>Ref&lt;T&gt;</code> and you can pass them as the first argument of <code>watch</code>.</p>
<p>However, most of the time watching props is not needed. Simply use <code>props.xxx</code> directly in your template (or <code>setup</code>) and let Vue do the rest.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, typescript, vue.js, vuejs3, vue-composition-api
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Jan-20</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>I am learning TypeScript and some bits are confusing to me. One bit is below:</p>
<pre class="lang-js prettyprint-override"><code>interface Props {
  name: string;
}

const PrintName: React.FC&lt;Props&gt; = (props) =&gt; {
  return (
    &lt;div&gt;
      &lt;p style={{ fontWeight: props.priority ? &quot;bold&quot; : &quot;normal&quot; }}&gt;
        {props.name}
      &lt;/p&gt;
    &lt;/div&gt;
  )
}

const PrintName2 = (props: Props) =&gt; {
  return (
    &lt;div&gt;
      &lt;p style={{ fontWeight: props.priority ? &quot;bold&quot; : &quot;normal&quot; }}&gt;
        {props.name}
      &lt;/p&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<p>For both functional components above, I see TypeScript generates the same JS code. The <code>PrintName2</code> component seems more streamlined to me as far as readability. I wonder what's the difference between the two definitions and if anyone is using second type of React component?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 204<br>
            <strong>Answer:</strong>
            <p><p>Thanks all for the answers. They are correct but I was looking for a more detailed version. I did some more research and found this on <a href="https://github.com/typescript-cheatsheets/react-typescript-cheatsheet#reacttypescript-cheatsheets" rel="noreferrer">React+TypeScript Cheatsheets</a> on GitHub.</p>
<p><strong>Function Components</strong> <br>
These can be written as normal functions that take a props argument and return a JSX element.</p>
<pre><code>type AppProps = { message: string }; /* could also use interface */

const App = ({ message }: AppProps) =&gt; &lt;div&gt;{message}&lt;/div&gt;;
</code></pre>
<p>What about <code>React.FC</code>/<code>React.FunctionComponent</code>?
You can also write components with <code>React.FunctionComponent</code> (or the shorthand <code>React.FC</code>):</p>
<pre><code>const App: React.FC&lt;{ message: string }&gt; = ({ message }) =&gt; (
  &lt;div&gt;{message}&lt;/div&gt;
);
</code></pre>
<p>Some differences from the &quot;normal function&quot; version:</p>
<p>It provides typechecking and autocomplete for static properties like <code>displayName</code>, <code>propTypes</code>, and <code>defaultProps</code> - However, there are currently known issues using <code>defaultProps</code> with <code>React.FunctionComponent</code>. See this <a href="https://github.com/typescript-cheatsheets/react#you-may-not-need-defaultprops" rel="noreferrer">issue</a> for details - scroll down to our <code>defaultProps</code> section for typing recommendations there.</p>
<p>It provides an implicit definition of children (see below) - however there are some issues with the implicit children type (e.g. DefinitelyTyped#33006), and it might be considered a better style to be explicit about components that consume children, anyway.</p>
<pre><code>const Title: React.FunctionComponent&lt;{ title: string }&gt; = ({
  children,
  title
}) =&gt; &lt;div title={title}&gt;{children}&lt;/div&gt;;
</code></pre>
<p>In the future, it may automatically mark props as readonly, though that's a moot point if the props object is destructured in the parameter list.</p>
<p><code>React.FunctionComponent</code> is explicit about the return type, while the normal function version is implicit (or else needs additional annotation).</p>
<blockquote>
<p>In most cases, it makes very little difference which syntax is used,
but the <code>React.FC</code> syntax is slightly more verbose without providing
clear advantage, so precedence was given to the &quot;normal function&quot;
syntax.</p>
</blockquote>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, typescript, reactjs, react-functional-component
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I need help. VSCode will NEVER find poetry virtualenv interpreter no matter what I try. </p>

<p>Installed poetry Python package manager using a standard <code>$ curl</code> method as explained <a href="https://python-poetry.org/docs/#installation" rel="noreferrer">in the official documentation</a>. </p>

<p>Started a project by <code>$ poetry new finance-essentials_37-64</code>, installed poetry environment with <code>$ poetry install</code>. </p>

<p>So now I can see that I indeed have a virtual environment by:</p>

<pre><code>Jaepil@Jaepil-PC MINGW64 /e/VSCodeProjects/finance_essentials_37-64 $ poetry env list 
&gt;&gt; finance-essentials-37-64-SCQrHB_N-py3.7 (Activated)
</code></pre>

<p>and this virtualenv is installed at: <code>C:\Users\Jaepil\AppData\Local\pypoetry\Cache\virtualenvs</code>, which has <code>finance-essentials-37-64-SCQrHB_N-py3.7</code> directory. </p>

<p>However, VSCode is unable to find this virtualenv in its 'select interpreter' command. I only see a bunch of Anaconda and Pipenv environments but not the poetry environment's interpreter that I've just made. </p>

<p>I also added <code>"python.venvPath": "~/.cache/pypoetry/virtualenvs",</code> to my <code>settings.json</code> as suggested in <a href="https://github.com/microsoft/vscode-python/issues/8372#issuecomment-556984062" rel="noreferrer">here</a>, but to no avail. 
Still doesn't work. </p>

<p>I also tried an absolute path, by adding <code>"python.venvPath": "C:\\Users\\Jaepil\\AppData\\Local\\pypoetry\\Cache\\virtualenvs",</code> to the same settings, but it also doesn't work. </p>

<p><a href="https://code.visualstudio.com/docs/python/settings-reference" rel="noreferrer">VSCode settings reference</a> states that it has <code>python.poetryPath</code> as a default but it doesn't seem to work either. Should I change the default value <code>"poetry"</code> in this case? </p>

<blockquote>
  <p>python.poetryPath </p>
  
  <p>"poetry"</p>
  
  <p>Specifies the location of the Poetry dependency manager executable, if
  installed. The default value "poetry" assumes the executable is in the
  current path. The Python extension uses this setting to install
  packages when Poetry is available and there's a poetry.lock file in
  the workspace folder.</p>
</blockquote>

<p>I'm on Windows 10 pro 64bit &amp; Has Python 3.7.6 installed on the system. </p>

<pre><code>PS C:\Users\Jaepil&gt; python
Python 3.7.6 (tags/v3.7.6:43364a7ae0, Dec 19 2019, 00:42:30) [MSC v.1916 64 bit (AMD64)] on win32
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 474<br>
            <strong>Answer:</strong>
            <p><p>You just need to type in your shell:</p>
<pre class="lang-bash prettyprint-override"><code>poetry config virtualenvs.in-project true
</code></pre>
<p>The virtualenv will be created inside the project path and vscode will recognize. Consider adding this to your <code>.bashrc</code> or <code>.zshrc</code>.</p>
<hr />
<p>If you already have created your project, you need to re-create the virtualenv to make it appear in the correct place:</p>
<pre class="lang-bash prettyprint-override"><code>poetry env list  # shows the name of the current environment
poetry env remove &lt;current environment&gt;
poetry install  # will create a new environment using your updated configuration
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, visual-studio-code, python-poetry
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I'm trying to use optional chaining with an array instead of an object but not sure how to do that:</p>
<p>Here's what I'm trying to do <code>myArray.filter(x =&gt; x.testKey === myTestKey)?[0]</code>.
Also trying similar thing with a function:</p>
<pre><code>let x = {a: () =&gt; {}, b: null}
console.log(x?b());
</code></pre>
<p>But it's giving a similar error - how can I use optional chaining with an array or a function?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 569<br>
            <strong>Answer:</strong>
            <p><p>You need to put a <code>.</code> after the <code>?</code> to use optional chaining:</p>
<pre><code>myArray.filter(x =&gt; x.testKey === myTestKey)?.[0]
</code></pre>
<p><a href="https://www.typescriptlang.org/play/#code/MYewdgzgLgBAtgTwCoFNoGkUJgXhgcgCMBDAJ3wG4BYAKFElkQEFTTjs8BtAbxijSiYEALgIAzECHwwAvgBoYvfhiyiiZaTIC61OuGgxSaAK4AbWHmat2AOjEBLcylIAKAB64AfDDc3lgrFwcS2QBIQBKAH4bTgAGHVp6CBBTFBtTEABzFyMIMyhwiiA" rel="noreferrer">Playground link</a></p>
<p>Using just the <code>?</code> alone makes the compiler think you're trying to use the conditional operator (and then it throws an error since it doesn't see a <code>:</code> later)</p>
<p>Optional chaining isn't just a TypeScript thing - it is a finished proposal <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noreferrer">in plain JavaScript</a> too.</p>
<p>It can be used with bracket notation like above, but it can also be used with dot notation property access:</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const obj = {
  prop2: {
    nested2: 'val2'
  }
};

console.log(
  obj.prop1?.nested1,
  obj.prop2?.nested2
);</code></pre>
</div>
</div>
</p>
<p>And with function calls:</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const obj = {
  fn2: () =&gt; console.log('fn2 running')
};

obj.fn1?.();
obj.fn2?.();</code></pre>
</div>
</div>
</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, arrays, function, typescript, optional-chaining
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I'm using <strong>IntelliJ IDEA Ultimate 2019.3.1</strong>. Whenever I try to start any simple Java Maven project (may it be even a simple Hello World) I get the following error:</p>

<pre><code>Error:java: error: release version 5 not supported
</code></pre>

<p>Running <code>java --version</code> by terminal I get the following output:</p>

<pre><code>openjdk 11.0.5 2019-10-15
OpenJDK Runtime Environment (build 11.0.5+10-post-Ubuntu-0ubuntu1.1)
OpenJDK 64-Bit Server VM (build 11.0.5+10-post-Ubuntu-0ubuntu1.1, mixed mode, sharing)
</code></pre>

<p>Running <code>javac --version</code> by terminal I get the following output:</p>

<pre><code>javac 11.0.5
</code></pre>

<p>Going to the Settings of the Java Compiler ( as suggested <a href="https://stackoverflow.com/questions/52788743/intellij-error-java-release-version-10-not-supported">here</a> ) I see this:</p>

<p><a href="https://i.sstatic.net/WJdHN.png" rel="noreferrer"><img src="https://i.sstatic.net/WJdHN.png" alt="Java Compiler Settings"></a></p>

<p>I tried editing the "<strong>Target bytecode version</strong>" to <strong>1.8</strong> but I get the following errors:</p>

<pre><code>Error:(1, 26) java: package javafx.application does not exist
Error:(2, 20) java: package javafx.stage does not exist
Error:(4, 27) java: cannot find symbol
  symbol: class Application
Error:(12, 23) java: cannot find symbol
  symbol:   class Stage
  location: class Main
Error:(7, 9) java: cannot find symbol
  symbol:   method launch(java.lang.String[])
  location: class Main
Error:(11, 5) java: method does not override or implement a method from a supertype
</code></pre>

<p>Changing it to version <strong>1.11</strong> I get this error instead:</p>

<pre><code>Error:java: Source option 5 is no longer supported. Use 6 or later.
</code></pre>

<p>What do you think is the problem? How may I solve it?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 483<br>
            <strong>Answer:</strong>
            <p><p>See¬†<a href="https://stackoverflow.com/a/12900859/104891">https://stackoverflow.com/a/12900859/104891</a>. </p>

<p>First of all, set the <code>language level</code>/<code>release versions</code> in <code>pom.xml</code> like that: </p>

<pre><code>&lt;properties&gt;
  &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
  &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
&lt;/properties&gt;
</code></pre>

<p>Maven sets the default to 1.5 otherwise. You will also need to include the <code>maven-compiler-plugin</code> if you haven't already:</p>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
  &lt;version&gt;3.8.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>Also, try to change the Java version in each of these places:</p>

<p>File -> Project structure -> Project -> Project SDK -> 11.</p>

<p>File -> Project structure -> Project -> Project language level -> 11.</p>

<p>File -> Project structure -> Project -> Modules -> -> Sources --> 11</p>

<p>In project -> <kbd>ctrl</kbd> + <kbd>alt</kbd> + <kbd>s</kbd> -> Build, Execution, Deployment -> Compiler -> Java Compiler -> Project bytecode version -> 11</p>

<p>In project -> <kbd>ctrl</kbd> + <kbd>alt</kbd> + <kbd>s</kbd> -> Build, Execution, Deployment -> Compiler -> Java Compiler -> Module -> 1.11.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, intellij-idea
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>Recently <em>Maven</em> build jobs running in <em>Jenkins</em> are failing with the below exception saying that they couldn't pull dependencies from <em>Maven Central</em> and should use <em>HTTPS</em>. I'm not sure how to change the requests from <em>HTTP</em> to <em>HTTPS</em>. Could someone guide me on this matter?</p>
<blockquote>
<p>[ERROR] Unresolveable build extension:<br />
Plugin <code>org.apache.maven.wagon:wagon-ssh:2.1</code> or one of its dependencies could not be resolved:<br />
Failed to collect dependencies for <code>org.apache.maven.wagon:wagon-ssh:jar:2.1 ()</code>:<br />
Failed to read artifact descriptor for <code>org.apache.maven.wagon:wagon-ssh:jar:2.1</code>:<br />
Could not transfer artifact <code>org.apache.maven.wagon:wagon-ssh:pom:2.1</code> from/to central (<a href="http://repo.maven.apache.org/maven2" rel="noreferrer">http://repo.maven.apache.org/maven2</a>):<br />
Failed to transfer file: <a href="http://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-ssh/2.1/wagon-ssh-2.1.pom" rel="noreferrer">http://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-ssh/2.1/wagon-ssh-2.1.pom</a>.<br />
Return code is: <code>501, ReasonPhrase:HTTPS Required. -&gt; [Help 2]</code></p>
<p>Waiting for <em>Jenkins</em> to finish collecting <code>data[ERROR]</code><br />
Plugin <code>org.apache.maven.plugins:maven-clean-plugin:2.4.1</code> or one of its dependencies could not be resolved:<br />
Failed to read artifact descriptor for <code>org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1</code>:<br />
Could not transfer artifact <code>org.apache.maven.plugins:maven-clean-plugin:pom:2.4.1</code> from/to central (<a href="http://repo.maven.apache.org/maven2" rel="noreferrer">http://repo.maven.apache.org/maven2</a>):<br />
Failed to transfer file: <a href="http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom" rel="noreferrer">http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom</a>.<br />
Return code is: <code>501 , ReasonPhrase:HTTPS Required. -&gt; [Help 1]</code></p>
</blockquote>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 178<br>
            <strong>Answer:</strong>
            <p><p>The reason for the observed error is explained in <em><a href="https://support.sonatype.com/hc/en-us/articles/360041287334" rel="noreferrer">Central 501 HTTPS Required</a></em></p>

<blockquote>
  <p>Effective January 15, 2020, The Central Repository no longer supports
  insecure communication over plain HTTP and requires that all requests
  to the repository are encrypted over HTTPS.</p>
</blockquote>

<p>It looks like latest versions of Maven (tried with 3.6.0, 3.6.1) are already using the HTTPS URL by default.</p>

<p>Here are the dates when the major repositories will switch:</p>

<p><em><a href="https://www.alphabot.com/security/blog/2020/java/Your-Java-builds-might-break-starting-January-13th.html" rel="noreferrer">Your Java builds might break starting January 13th (if you haven't yet switched repo access to HTTPS)</a></em></p>

<p>Update: Seems like from maven 3.2.3 maven central is accessed via HTTPS
See <a href="https://stackoverflow.com/a/25411658/5820670">https://stackoverflow.com/a/25411658/5820670</a></p>

<p>Maven Change log
(<a href="http://maven.apache.org/docs/3.2.3/release-notes.html" rel="noreferrer">http://maven.apache.org/docs/3.2.3/release-notes.html</a>)</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, maven, jenkins, maven-central
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Feb-20</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>I am learning TypeScript and some bits are confusing to me. One bit is below:</p>
<pre class="lang-js prettyprint-override"><code>interface Props {
  name: string;
}

const PrintName: React.FC&lt;Props&gt; = (props) =&gt; {
  return (
    &lt;div&gt;
      &lt;p style={{ fontWeight: props.priority ? &quot;bold&quot; : &quot;normal&quot; }}&gt;
        {props.name}
      &lt;/p&gt;
    &lt;/div&gt;
  )
}

const PrintName2 = (props: Props) =&gt; {
  return (
    &lt;div&gt;
      &lt;p style={{ fontWeight: props.priority ? &quot;bold&quot; : &quot;normal&quot; }}&gt;
        {props.name}
      &lt;/p&gt;
    &lt;/div&gt;
  )
}
</code></pre>
<p>For both functional components above, I see TypeScript generates the same JS code. The <code>PrintName2</code> component seems more streamlined to me as far as readability. I wonder what's the difference between the two definitions and if anyone is using second type of React component?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 204<br>
            <strong>Answer:</strong>
            <p><p>Thanks all for the answers. They are correct but I was looking for a more detailed version. I did some more research and found this on <a href="https://github.com/typescript-cheatsheets/react-typescript-cheatsheet#reacttypescript-cheatsheets" rel="noreferrer">React+TypeScript Cheatsheets</a> on GitHub.</p>
<p><strong>Function Components</strong> <br>
These can be written as normal functions that take a props argument and return a JSX element.</p>
<pre><code>type AppProps = { message: string }; /* could also use interface */

const App = ({ message }: AppProps) =&gt; &lt;div&gt;{message}&lt;/div&gt;;
</code></pre>
<p>What about <code>React.FC</code>/<code>React.FunctionComponent</code>?
You can also write components with <code>React.FunctionComponent</code> (or the shorthand <code>React.FC</code>):</p>
<pre><code>const App: React.FC&lt;{ message: string }&gt; = ({ message }) =&gt; (
  &lt;div&gt;{message}&lt;/div&gt;
);
</code></pre>
<p>Some differences from the &quot;normal function&quot; version:</p>
<p>It provides typechecking and autocomplete for static properties like <code>displayName</code>, <code>propTypes</code>, and <code>defaultProps</code> - However, there are currently known issues using <code>defaultProps</code> with <code>React.FunctionComponent</code>. See this <a href="https://github.com/typescript-cheatsheets/react#you-may-not-need-defaultprops" rel="noreferrer">issue</a> for details - scroll down to our <code>defaultProps</code> section for typing recommendations there.</p>
<p>It provides an implicit definition of children (see below) - however there are some issues with the implicit children type (e.g. DefinitelyTyped#33006), and it might be considered a better style to be explicit about components that consume children, anyway.</p>
<pre><code>const Title: React.FunctionComponent&lt;{ title: string }&gt; = ({
  children,
  title
}) =&gt; &lt;div title={title}&gt;{children}&lt;/div&gt;;
</code></pre>
<p>In the future, it may automatically mark props as readonly, though that's a moot point if the props object is destructured in the parameter list.</p>
<p><code>React.FunctionComponent</code> is explicit about the return type, while the normal function version is implicit (or else needs additional annotation).</p>
<blockquote>
<p>In most cases, it makes very little difference which syntax is used,
but the <code>React.FC</code> syntax is slightly more verbose without providing
clear advantage, so precedence was given to the &quot;normal function&quot;
syntax.</p>
</blockquote>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, typescript, reactjs, react-functional-component
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I need help. VSCode will NEVER find poetry virtualenv interpreter no matter what I try. </p>

<p>Installed poetry Python package manager using a standard <code>$ curl</code> method as explained <a href="https://python-poetry.org/docs/#installation" rel="noreferrer">in the official documentation</a>. </p>

<p>Started a project by <code>$ poetry new finance-essentials_37-64</code>, installed poetry environment with <code>$ poetry install</code>. </p>

<p>So now I can see that I indeed have a virtual environment by:</p>

<pre><code>Jaepil@Jaepil-PC MINGW64 /e/VSCodeProjects/finance_essentials_37-64 $ poetry env list 
&gt;&gt; finance-essentials-37-64-SCQrHB_N-py3.7 (Activated)
</code></pre>

<p>and this virtualenv is installed at: <code>C:\Users\Jaepil\AppData\Local\pypoetry\Cache\virtualenvs</code>, which has <code>finance-essentials-37-64-SCQrHB_N-py3.7</code> directory. </p>

<p>However, VSCode is unable to find this virtualenv in its 'select interpreter' command. I only see a bunch of Anaconda and Pipenv environments but not the poetry environment's interpreter that I've just made. </p>

<p>I also added <code>"python.venvPath": "~/.cache/pypoetry/virtualenvs",</code> to my <code>settings.json</code> as suggested in <a href="https://github.com/microsoft/vscode-python/issues/8372#issuecomment-556984062" rel="noreferrer">here</a>, but to no avail. 
Still doesn't work. </p>

<p>I also tried an absolute path, by adding <code>"python.venvPath": "C:\\Users\\Jaepil\\AppData\\Local\\pypoetry\\Cache\\virtualenvs",</code> to the same settings, but it also doesn't work. </p>

<p><a href="https://code.visualstudio.com/docs/python/settings-reference" rel="noreferrer">VSCode settings reference</a> states that it has <code>python.poetryPath</code> as a default but it doesn't seem to work either. Should I change the default value <code>"poetry"</code> in this case? </p>

<blockquote>
  <p>python.poetryPath </p>
  
  <p>"poetry"</p>
  
  <p>Specifies the location of the Poetry dependency manager executable, if
  installed. The default value "poetry" assumes the executable is in the
  current path. The Python extension uses this setting to install
  packages when Poetry is available and there's a poetry.lock file in
  the workspace folder.</p>
</blockquote>

<p>I'm on Windows 10 pro 64bit &amp; Has Python 3.7.6 installed on the system. </p>

<pre><code>PS C:\Users\Jaepil&gt; python
Python 3.7.6 (tags/v3.7.6:43364a7ae0, Dec 19 2019, 00:42:30) [MSC v.1916 64 bit (AMD64)] on win32
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 474<br>
            <strong>Answer:</strong>
            <p><p>You just need to type in your shell:</p>
<pre class="lang-bash prettyprint-override"><code>poetry config virtualenvs.in-project true
</code></pre>
<p>The virtualenv will be created inside the project path and vscode will recognize. Consider adding this to your <code>.bashrc</code> or <code>.zshrc</code>.</p>
<hr />
<p>If you already have created your project, you need to re-create the virtualenv to make it appear in the correct place:</p>
<pre class="lang-bash prettyprint-override"><code>poetry env list  # shows the name of the current environment
poetry env remove &lt;current environment&gt;
poetry install  # will create a new environment using your updated configuration
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, visual-studio-code, python-poetry
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I'm trying to use optional chaining with an array instead of an object but not sure how to do that:</p>
<p>Here's what I'm trying to do <code>myArray.filter(x =&gt; x.testKey === myTestKey)?[0]</code>.
Also trying similar thing with a function:</p>
<pre><code>let x = {a: () =&gt; {}, b: null}
console.log(x?b());
</code></pre>
<p>But it's giving a similar error - how can I use optional chaining with an array or a function?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 569<br>
            <strong>Answer:</strong>
            <p><p>You need to put a <code>.</code> after the <code>?</code> to use optional chaining:</p>
<pre><code>myArray.filter(x =&gt; x.testKey === myTestKey)?.[0]
</code></pre>
<p><a href="https://www.typescriptlang.org/play/#code/MYewdgzgLgBAtgTwCoFNoGkUJgXhgcgCMBDAJ3wG4BYAKFElkQEFTTjs8BtAbxijSiYEALgIAzECHwwAvgBoYvfhiyiiZaTIC61OuGgxSaAK4AbWHmat2AOjEBLcylIAKAB64AfDDc3lgrFwcS2QBIQBKAH4bTgAGHVp6CBBTFBtTEABzFyMIMyhwiiA" rel="noreferrer">Playground link</a></p>
<p>Using just the <code>?</code> alone makes the compiler think you're trying to use the conditional operator (and then it throws an error since it doesn't see a <code>:</code> later)</p>
<p>Optional chaining isn't just a TypeScript thing - it is a finished proposal <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noreferrer">in plain JavaScript</a> too.</p>
<p>It can be used with bracket notation like above, but it can also be used with dot notation property access:</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const obj = {
  prop2: {
    nested2: 'val2'
  }
};

console.log(
  obj.prop1?.nested1,
  obj.prop2?.nested2
);</code></pre>
</div>
</div>
</p>
<p>And with function calls:</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>const obj = {
  fn2: () =&gt; console.log('fn2 running')
};

obj.fn1?.();
obj.fn2?.();</code></pre>
</div>
</div>
</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, arrays, function, typescript, optional-chaining
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I'm using <strong>IntelliJ IDEA Ultimate 2019.3.1</strong>. Whenever I try to start any simple Java Maven project (may it be even a simple Hello World) I get the following error:</p>

<pre><code>Error:java: error: release version 5 not supported
</code></pre>

<p>Running <code>java --version</code> by terminal I get the following output:</p>

<pre><code>openjdk 11.0.5 2019-10-15
OpenJDK Runtime Environment (build 11.0.5+10-post-Ubuntu-0ubuntu1.1)
OpenJDK 64-Bit Server VM (build 11.0.5+10-post-Ubuntu-0ubuntu1.1, mixed mode, sharing)
</code></pre>

<p>Running <code>javac --version</code> by terminal I get the following output:</p>

<pre><code>javac 11.0.5
</code></pre>

<p>Going to the Settings of the Java Compiler ( as suggested <a href="https://stackoverflow.com/questions/52788743/intellij-error-java-release-version-10-not-supported">here</a> ) I see this:</p>

<p><a href="https://i.sstatic.net/WJdHN.png" rel="noreferrer"><img src="https://i.sstatic.net/WJdHN.png" alt="Java Compiler Settings"></a></p>

<p>I tried editing the "<strong>Target bytecode version</strong>" to <strong>1.8</strong> but I get the following errors:</p>

<pre><code>Error:(1, 26) java: package javafx.application does not exist
Error:(2, 20) java: package javafx.stage does not exist
Error:(4, 27) java: cannot find symbol
  symbol: class Application
Error:(12, 23) java: cannot find symbol
  symbol:   class Stage
  location: class Main
Error:(7, 9) java: cannot find symbol
  symbol:   method launch(java.lang.String[])
  location: class Main
Error:(11, 5) java: method does not override or implement a method from a supertype
</code></pre>

<p>Changing it to version <strong>1.11</strong> I get this error instead:</p>

<pre><code>Error:java: Source option 5 is no longer supported. Use 6 or later.
</code></pre>

<p>What do you think is the problem? How may I solve it?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 483<br>
            <strong>Answer:</strong>
            <p><p>See¬†<a href="https://stackoverflow.com/a/12900859/104891">https://stackoverflow.com/a/12900859/104891</a>. </p>

<p>First of all, set the <code>language level</code>/<code>release versions</code> in <code>pom.xml</code> like that: </p>

<pre><code>&lt;properties&gt;
  &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
  &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
&lt;/properties&gt;
</code></pre>

<p>Maven sets the default to 1.5 otherwise. You will also need to include the <code>maven-compiler-plugin</code> if you haven't already:</p>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
  &lt;version&gt;3.8.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>Also, try to change the Java version in each of these places:</p>

<p>File -> Project structure -> Project -> Project SDK -> 11.</p>

<p>File -> Project structure -> Project -> Project language level -> 11.</p>

<p>File -> Project structure -> Project -> Modules -> -> Sources --> 11</p>

<p>In project -> <kbd>ctrl</kbd> + <kbd>alt</kbd> + <kbd>s</kbd> -> Build, Execution, Deployment -> Compiler -> Java Compiler -> Project bytecode version -> 11</p>

<p>In project -> <kbd>ctrl</kbd> + <kbd>alt</kbd> + <kbd>s</kbd> -> Build, Execution, Deployment -> Compiler -> Java Compiler -> Module -> 1.11.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, intellij-idea
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>Recently <em>Maven</em> build jobs running in <em>Jenkins</em> are failing with the below exception saying that they couldn't pull dependencies from <em>Maven Central</em> and should use <em>HTTPS</em>. I'm not sure how to change the requests from <em>HTTP</em> to <em>HTTPS</em>. Could someone guide me on this matter?</p>
<blockquote>
<p>[ERROR] Unresolveable build extension:<br />
Plugin <code>org.apache.maven.wagon:wagon-ssh:2.1</code> or one of its dependencies could not be resolved:<br />
Failed to collect dependencies for <code>org.apache.maven.wagon:wagon-ssh:jar:2.1 ()</code>:<br />
Failed to read artifact descriptor for <code>org.apache.maven.wagon:wagon-ssh:jar:2.1</code>:<br />
Could not transfer artifact <code>org.apache.maven.wagon:wagon-ssh:pom:2.1</code> from/to central (<a href="http://repo.maven.apache.org/maven2" rel="noreferrer">http://repo.maven.apache.org/maven2</a>):<br />
Failed to transfer file: <a href="http://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-ssh/2.1/wagon-ssh-2.1.pom" rel="noreferrer">http://repo.maven.apache.org/maven2/org/apache/maven/wagon/wagon-ssh/2.1/wagon-ssh-2.1.pom</a>.<br />
Return code is: <code>501, ReasonPhrase:HTTPS Required. -&gt; [Help 2]</code></p>
<p>Waiting for <em>Jenkins</em> to finish collecting <code>data[ERROR]</code><br />
Plugin <code>org.apache.maven.plugins:maven-clean-plugin:2.4.1</code> or one of its dependencies could not be resolved:<br />
Failed to read artifact descriptor for <code>org.apache.maven.plugins:maven-clean-plugin:jar:2.4.1</code>:<br />
Could not transfer artifact <code>org.apache.maven.plugins:maven-clean-plugin:pom:2.4.1</code> from/to central (<a href="http://repo.maven.apache.org/maven2" rel="noreferrer">http://repo.maven.apache.org/maven2</a>):<br />
Failed to transfer file: <a href="http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom" rel="noreferrer">http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-clean-plugin/2.4.1/maven-clean-plugin-2.4.1.pom</a>.<br />
Return code is: <code>501 , ReasonPhrase:HTTPS Required. -&gt; [Help 1]</code></p>
</blockquote>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 178<br>
            <strong>Answer:</strong>
            <p><p>The reason for the observed error is explained in <em><a href="https://support.sonatype.com/hc/en-us/articles/360041287334" rel="noreferrer">Central 501 HTTPS Required</a></em></p>

<blockquote>
  <p>Effective January 15, 2020, The Central Repository no longer supports
  insecure communication over plain HTTP and requires that all requests
  to the repository are encrypted over HTTPS.</p>
</blockquote>

<p>It looks like latest versions of Maven (tried with 3.6.0, 3.6.1) are already using the HTTPS URL by default.</p>

<p>Here are the dates when the major repositories will switch:</p>

<p><em><a href="https://www.alphabot.com/security/blog/2020/java/Your-Java-builds-might-break-starting-January-13th.html" rel="noreferrer">Your Java builds might break starting January 13th (if you haven't yet switched repo access to HTTPS)</a></em></p>

<p>Update: Seems like from maven 3.2.3 maven central is accessed via HTTPS
See <a href="https://stackoverflow.com/a/25411658/5820670">https://stackoverflow.com/a/25411658/5820670</a></p>

<p>Maven Change log
(<a href="http://maven.apache.org/docs/3.2.3/release-notes.html" rel="noreferrer">http://maven.apache.org/docs/3.2.3/release-notes.html</a>)</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, maven, jenkins, maven-central
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Mar-20</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>According to <a href="https://github.com/python-poetry/poetry/blob/master/docs/docs/basic-usage.md#project-setup" rel="nofollow noreferrer">poetry's docs</a>, the proper way to setup a new project is with <code>poetry new poetry-demo</code>, however this creates a project based on the now deprecated python2.7 by creating the following toml file:</p>
<pre class="lang-ini prettyprint-override"><code>[tool.poetry]
name = &quot;poetry-demo&quot;
version = &quot;0.1.0&quot;
description = &quot;&quot;
authors = [&quot;Harsha Goli &lt;harshagoli@gmail.com&gt;&quot;]

[tool.poetry.dependencies]
python = &quot;^2.7&quot;

[tool.poetry.dev-dependencies]
pytest = &quot;^4.6&quot;

[build-system]
requires = [&quot;poetry&gt;=0.12&quot;]
build-backend = &quot;poetry.masonry.api&quot;
</code></pre>
<p>How can I update this to 3.7? Simply changing <code>python = &quot;^2.7&quot;</code> to <code>python = &quot;^3.7&quot;</code> results in the following error when <code>poetry install</code> is run:</p>
<pre><code>[SolverProblemError]
The current project's Python requirement (2.7.17) is not compatible with some of the required packages Python requirement:
  - zipp requires Python &gt;=3.6

Because no versions of pytest match &gt;=4.6,&lt;4.6.9 || &gt;4.6.9,&lt;5.0
 and pytest (4.6.9) depends on importlib-metadata (&gt;=0.12), pytest (&gt;=4.6,&lt;5.0) requires importlib-metadata (&gt;=0.12).
And because no versions of importlib-metadata match &gt;=0.12,&lt;1.5.0 || &gt;1.5.0
 and importlib-metadata (1.5.0) depends on zipp (&gt;=0.5), pytest (&gt;=4.6,&lt;5.0) requires zipp (&gt;=0.5).
Because zipp (3.1.0) requires Python &gt;=3.6
 and no versions of zipp match &gt;=0.5,&lt;3.1.0 || &gt;3.1.0, zipp is forbidden.
Thus, pytest is forbidden.
So, because poetry-demo depends on pytest (^4.6), version solving failed.
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 13<br>
            <strong>Answer:</strong>
            <p><p>Interestingly, poetry is silently failing due to a missing package the tool itself relies on and continues to install a broken venv. Here's how you fix it.</p>

<pre><code>sudo apt install python3-venv
poetry env remove python3
poetry install
</code></pre>

<p>I had to remove pytest, and then reinstall with <code>poetry add pytest</code>.</p>

<p>EDIT: I ran into this issue again when upgrading a project from python3.7 to python3.8 - for this instead of installing <code>python3-venv</code>, you'd want to install <code>python3.8-venv</code> instead</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, python-poetry
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>Apparently <code>list(a)</code> doesn't overallocate, <code>[x for x in a]</code> overallocates at some points, and <code>[*a]</code> overallocates <em>all the time</em>?</p>

<p><a href="https://i.sstatic.net/SOZoe.png" rel="noreferrer"><img src="https://i.sstatic.net/SOZoe.png" alt="Sizes up to n=100"></a></p>

<p>Here are sizes n from 0 to 12 and the resulting sizes in bytes for the three methods:</p>

<pre><code>0 56 56 56
1 64 88 88
2 72 88 96
3 80 88 104
4 88 88 112
5 96 120 120
6 104 120 128
7 112 120 136
8 120 120 152
9 128 184 184
10 136 184 192
11 144 184 200
12 152 184 208
</code></pre>

<p>Computed like this, <a href="https://repl.it/repls/CoordinatedUnsungShockwave" rel="noreferrer">reproducable at repl.it</a>, using Python 3.<strong>8</strong>:</p>

<pre><code>from sys import getsizeof

for n in range(13):
    a = [None] * n
    print(n, getsizeof(list(a)),
             getsizeof([x for x in a]),
             getsizeof([*a]))
</code></pre>

<p><strong>So: How does this work?</strong> How does <code>[*a]</code> overallocate? Actually, what mechanism does it use to create the result list from the given input? Does it use an iterator over <code>a</code> and use something like <code>list.append</code>? Where is the source code?</p>

<p>(<a href="https://colab.research.google.com/drive/1LOy2rb63wHZ2TSFrnoSlYXz1oOa1VkZ6" rel="noreferrer">Colab with data and code</a> that produced the images.)</p>

<p>Zooming in to smaller n:</p>

<p><a href="https://i.sstatic.net/7F3Ba.png" rel="noreferrer"><img src="https://i.sstatic.net/7F3Ba.png" alt="Sizes up to n=40"></a></p>

<p>Zooming out to larger n:</p>

<p><a href="https://i.sstatic.net/xwhob.png" rel="noreferrer"><img src="https://i.sstatic.net/xwhob.png" alt="Sizes up to n=1000"></a></p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 87<br>
            <strong>Answer:</strong>
            <p><p><code>[*a]</code> <a href="https://github.com/python/cpython/blob/3.8/Python/ceval.c#L2703" rel="noreferrer">is internally doing the C equivalent of</a>:</p>

<ol>
<li>Make a new, empty <code>list</code></li>
<li>Call <code>newlist.extend(a)</code></li>
<li>Returns <code>list</code>.</li>
</ol>

<p>So if you expand your test to:</p>



<pre class="lang-python prettyprint-override"><code>from sys import getsizeof

for n in range(13):
    a = [None] * n
    l = []
    l.extend(a)
    print(n, getsizeof(list(a)),
             getsizeof([x for x in a]),
             getsizeof([*a]),
             getsizeof(l))
</code></pre>

<p><a href="https://tio.run/##fY3BCsMgEETvfsUeNYRCya3QX@gPBA9C11Qwq@geTH7eRgvNLXOanXnsxI0/gaZabQor5C2DW2NIDAtydjsGK4QNCQgcQTK0oLxP6iHgkIEnzK9AqGEA6pFvkf7ZGxZGekuj@h2TI5Y0np@ld5mPWo0d@OsE5gJtvLRxoy@44ar1StX6BQ" rel="noreferrer" title="Python 3 ‚Äì Try It Online">Try it online!</a></p>

<p>you'll see the results for <code>getsizeof([*a])</code> and <code>l = []; l.extend(a); getsizeof(l)</code> are the same.</p>

<p>This is usually the right thing to do; when <code>extend</code>ing you're usually expecting to add more later, and similarly for generalized unpacking, it's assumed that multiple things will be added one after the other. <code>[*a]</code> is not the normal case; Python assumes there are multiple items or iterables being added to the <code>list</code> (<code>[*a, b, c, *d]</code>), so overallocation saves work in the common case.</p>

<p>By contrast, a <code>list</code> constructed from a single, presized iterable (with <code>list()</code>) may not grow or shrink during use, and overallocating is premature until proven otherwise; <a href="https://bugs.python.org/issue33234" rel="noreferrer">Python recently fixed a bug that made the constructor overallocate even for inputs with known size</a>.</p>

<p>As for <code>list</code> comprehensions, they're effectively equivalent to repeated <code>append</code>s, so you're seeing the final result of the normal overallocation growth pattern when adding an element at a time.</p>

<p>To be clear, none of this is a language guarantee. It's just how CPython implements it. The Python language spec is generally unconcerned with specific growth patterns in <code>list</code> (aside from guaranteeing amortized <code>O(1)</code> <code>append</code>s and <code>pop</code>s from the end). As noted in the comments, the specific implementation changes again in 3.9; while it won't affect <code>[*a]</code>, it could affect other cases where what used to be "build a temporary <code>tuple</code> of individual items and then <code>extend</code> with the <code>tuple</code>" now becomes multiple applications of <code>LIST_APPEND</code>, which can change when the overallocation occurs and what numbers go into the calculation.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, cpython, list, python-3.x, python-internals
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I am learning to program with python and I am having issues with importing from a module in a package. I am usingvisual studio code with Python 3.8.2 64 bit.</p>
<p><a href="https://i.sstatic.net/ZQZhP.png" rel="noreferrer">My Project Directory</a></p>
<pre><code>.vscode
‚îú‚îÄ‚îÄ ecommerce
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ database.py
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ products.py
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ payments
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ authorizenet.py
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ paypal.py
‚îú‚îÄ‚îÄ __init__.py
‚îî‚îÄ‚îÄ main.py
</code></pre>
<p>in the <code>ecommerce/products.py</code> file I have:</p>
<pre class="lang-py prettyprint-override"><code>#products.py
from .database import Database
p = Database(3,2)
</code></pre>
<p>So that I can import the <code>Database</code> class from the <code>ecommerce/database.py</code> file. But I get error</p>
<pre><code>ImportError : Attempted relative import with no known parent package
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 35<br>
            <strong>Answer:</strong>
            <p><p>It seems, from <a href="https://docs.python.org/3/tutorial/modules.html#packages" rel="noreferrer">Python docs</a> and experimenting, that relative imports (involving ., .. etc) only work if</p>
<ol>
<li>the importing module has a <code>__name__</code> other than <code>__main__</code>, and further,</li>
<li>the <code>__name__</code> of the importing module is pkg.module_name, i.e., it has to be imported from above in the directory hierarchy (to have a parent pkg as part of it's <code>__name__</code>.)</li>
</ol>
<p>OR</p>
<p>the importing module is being specified via module syntax  that includes a parent pkg as <code>python -m pkg.module</code>, in which case it's <code>__name__</code> is still <code>__main__</code>, so it is being run as a script, yet relative imports will work. Here <code>__package__</code> is set and used to find the parent package while <code>__name__</code> is <code>__main__</code>; <a href="https://www.python.org/dev/peps/pep-0366/#proposed-change" rel="noreferrer">more here</a>.</p>
<p>[After all that, it appears that <code>__package__</code> and <code>sys.path</code> are key to determining if/how relative imports work. <code>__name__</code> indicates script or module(i.e., <code>__main__</code> or <code>module_name</code>). <code>__package__</code> indicates where in the package the relative imports occur with respect to, and the top of <code>__package__</code> needs to be in <code>sys.path</code>.]</p>
<p>So, continuing with @AmitTendulkar 's example,  if you run this as <code>&gt; python main.py</code> or <code>&gt; python -m main</code> or <code>&gt; python -m ecommerce.products</code> from the project root directory, or enter interactive python from that root directory and <code>import main</code>, or <code>import ecommerce.products</code> the relative imports in products.py will work.</p>
<p>But if you <code>&gt; python products.py</code> or <code>&gt; python -m products</code> from within ecommerce directory, or enter interactive python from that ecommerce directory and <code>import products</code> they will fail.</p>
<p>It is helpful to add</p>
<pre><code>print(&quot;In module products __package__, __name__ ==&quot;, __package__, __name__)
</code></pre>
<p>etc. in each file to debug.</p>
<p>UPDATE:</p>
<p>How imports work depend on <code>sys.path</code> and <code>__package__</code>, not on <code>__name__</code>.
Issued from <code>/home/jj</code>, <code>&gt; python sub/mod.py</code> has a <code>sys.path</code>, <code>__package__</code> of <code>/home/jj/sub</code>, <code>None</code> -absolute imports of modules in <code>sys.path</code> work, relative imports fail.</p>
<p><code>&gt; python -m sub.mod</code> has  <code>sys.path</code>, <code>__package__</code> of <code>/home/jj</code>, <code>sub</code> -absolute imports of modules in <code>sys.path</code> work, relative imports work relative to <code>sys.path</code> + <code>__package__</code>.</p>
<p>It is more helpful to add</p>
<pre><code>import sys    
print(&quot;In module products sys.path[0], __package__ ==&quot;, sys.path[0], __package__)
</code></pre>
<p>etc. in each file to debug.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, pylint
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I am trying to use a function as a prop inside a component and this component is a child of another component. But the function is not working.? Can I know why. This is the warning i am receiving in the console.</p>
<blockquote>
<p>Warning: findDOMNode is deprecated in StrictMode. findDOMNode was passed an instance of Transition which is inside StrictMode. Instead, add a ref directly to the element you want to reference</p>
</blockquote>
<p>This is my code</p>
<pre><code>class Todo extends Component {
  state = {
    show: false,
    editTodo: {
      id: &quot;&quot;,
      title: &quot;&quot;,
      isCompleted: false
    }
  }
  handleClose = () =&gt; {
    this.setState({ show: false })
  }
  handleShow = () =&gt; {
    this.setState({ show: true })
  }
  getStyle () {
    return {
      background: '#f4f4f4',
      padding: '10px',
      borderBottom: '1px #ccc dotted',
      textDecoration: this.props.todo.isCompleted ? 'line-through'
        : 'none'
    }
  }
  //this method checks for changes in the edit field
  handleChange = (event) =&gt; {
    this.setState({ title: event.target.value })
    console.log(this.state.editTodo.title);
  }

  render () {
    //destructuring
    const { id, title } = this.props.todo;
    return (
      &lt;div style={this.getStyle()}&gt;
        &lt;p&gt;
          &lt;input type='checkbox' style={{ margin: &quot;0px 20px&quot; }} onChange={this.props.markComplete.bind(this, id)} /&gt; {''}
          {title}
          &lt;Button style={{ float: &quot;right&quot;, margin: &quot;0px 10px&quot; }} variant=&quot;warning&quot; size={&quot;sm&quot;} onClick={this.handleShow}&gt;Edit&lt;/Button&gt;{' '}
          &lt;Button style={{ float: &quot;right&quot; }} variant=&quot;danger&quot; size={&quot;sm&quot;} onClick={this.props.DelItem.bind(this, id)}&gt;Delete&lt;/Button&gt;
        &lt;/p&gt;
        &lt;Modal show={this.state.show} onHide={this.handleClose}&gt;
          &lt;Modal.Header closeButton&gt;
            &lt;Modal.Title&gt;Edit your Task!&lt;/Modal.Title&gt;
          &lt;/Modal.Header&gt;
          &lt;Modal.Body &gt;
            &lt;FormGroup &gt;
              &lt;Form.Control
                type=&quot;text&quot;
                value={this.state.editTodo.title}
                onChange={this.handleChange}
              /&gt;
            &lt;/FormGroup&gt;
          &lt;/Modal.Body&gt;
          &lt;Modal.Footer&gt;
            &lt;Button variant=&quot;secondary&quot; onClick={this.handleClose}&gt;
              Close
                          &lt;/Button&gt;
            &lt;Button variant=&quot;primary&quot; onClick={this.handleClose}&gt;
              Save Changes
                          &lt;/Button&gt;
          &lt;/Modal.Footer&gt;
        &lt;/Modal&gt;
      &lt;/div&gt;
    )

  }
}
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 28<br>
            <strong>Answer:</strong>
            <p><p>The <code>setState</code> call looks like it's being written to the wrong place. Make sure it's on the <code>editTodo</code> object:</p>
<pre class="lang-js prettyprint-override"><code>    handleChange = (event) =&gt; {
        this.setState(state =&gt; ({
          editTodo: {
            ...state.editTodo,
            title: event.target.value,
          },
        }));
    }
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-strictmode
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>I tried to run FastAPI using uvicorn webserver but it throws an error.</p>
<p>I run this command,</p>
<pre><code>uvicorn api:app --reload --host 0.0.0.0
</code></pre>
<p>but there is an error in the terminal.</p>
<pre><code>Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
Started reloader process [23445]
Error loading ASGI app. Could not import module &quot;api&quot;.
Stopping reloader process [23445]
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 302<br>
            <strong>Answer:</strong>
            <p><h1>TL;DR</h1>
<p>Add the directory name in front of your filename</p>
<pre class="lang-py prettyprint-override"><code>uvicorn src.main:app 
</code></pre>
<p>or <code>cd</code> into that directory</p>
<pre class="lang-py prettyprint-override"><code>cd src
uvicorn main:app 
</code></pre>
<h1>Long Answer</h1>
<p>It happens because you are not in the same folder with your FastAPI app instance more specifically:</p>
<p>Let's say i have an app-tree like this;</p>
<pre><code>my_fastapi_app/
‚îú‚îÄ‚îÄ app.yaml
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ src
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ main.py
‚îî‚îÄ‚îÄ tests
    ‚îú‚îÄ‚îÄ test_xx.py
    ‚îî‚îÄ‚îÄ test_yy.py

$ pwd         # Present Working Directory
/home/yagiz/Desktop/my_fastapi_app
</code></pre>
<p>I'm not inside the same folder with my app instance, so if I try to run my app with uvicorn I'll get an error like yours</p>
<pre><code>$ uvicorn main:app --reload
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [40645] using statreload
ERROR:    Error loading ASGI app. Could not import module &quot;main&quot;.
</code></pre>
<p>The answer is so simple, add the folder name in front of your filename</p>
<pre><code>uvicorn src.main:app --reload
</code></pre>
<p>or you can change your working directory</p>
<pre><code>cd src 
</code></pre>
<p>Now i'm inside of the folder with my app instance</p>
<pre><code>src
‚îî‚îÄ‚îÄ main.py
</code></pre>
<p>Run your uvicorn again</p>
<pre><code>$ uvicorn main:app --reload
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [40726] using statreload
INFO:     Started server process [40728]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, fastapi, uvicorn
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Apr-20</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>How do I fix the deprecation warning in this code? Alternatively, are there any other options for doing this?</p>
<pre><code>Handler().postDelayed({
    context?.let {
        //code
    }
}, 3000)
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 715<br>
            <strong>Answer:</strong>
            <p><p>Only the parameterless constructor is deprecated, it is now preferred that you specify the <code>Looper</code> in the constructor via the <code>Looper.getMainLooper()</code> method.</p>
<h2>Use it for Java</h2>
<pre><code>new Handler(Looper.getMainLooper()).postDelayed(new Runnable() {
    @Override
    public void run() {
        // Your Code
    }
}, 3000);
</code></pre>
<h2>Use it for Kotlin</h2>
<pre><code>Handler(Looper.getMainLooper()).postDelayed({
    // Your Code
}, 3000)
</code></pre>
<p>Source : <a href="https://developer.android.com/reference/android/os/Handler#Handler()" rel="noreferrer">developer.android.com</a></p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, android, kotlin, android-handler
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I am currently accessing the parent directory of my file using <code>Pathlib</code> as follows:</p>

<pre><code>Path(__file__).parent
</code></pre>

<p>When I print it, and this gives me the following output:</p>

<pre><code>print('Parent: ', Path(__file__).parent)
#output
/home/user/EC/main-folder
</code></pre>

<p>The <code>main-folder</code> has a <code>.env</code> file which I want to access and for that I want to join the parent path with the <code>.env</code>. Right now, I did:</p>

<pre><code>dotenv_path = os.path.join(Path(__file__).parent, ".env")
</code></pre>

<p>which works. But I would like to know, if there is a <code>Pathlib</code> alternate to <code>os.path.join()</code>?
Something like:</p>

<pre><code>dotenv_path = pathlib_alternate_for_join(Path(__file__).parent, ".env")
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 78<br>
            <strong>Answer:</strong>
            <p><p>Use <a href="https://docs.python.org/3/library/pathlib.html#pathlib.PurePath.joinpath" rel="noreferrer"><code>pathlib.Path.joinpath</code></a>:</p>
<pre><code>(Path(__file__).parent).joinpath('.env')
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, python-3.x, pathlib
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I stumbled across a surprising (to me) fact.</p>

<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>console.log("asdf".replace(/.*/g, "x"));</code></pre>
</div>
</div>
</p>

<p>Why <em>two</em> replacements?  It seems any non-empty string without newlines will produce exactly two replacements for this pattern.  Using a replacement function, I can see that the first replacement is for the entire string, and the second is for an empty string.  </p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 110<br>
            <strong>Answer:</strong>
            <p><p>As per the <a href="https://tc39.es/ecma262/" rel="noreferrer">ECMA-262</a> standard, <a href="https://tc39.es/ecma262/#sec-string.prototype.replace" rel="noreferrer">String.prototype.replace</a> calls <a href="https://tc39.es/ecma262/#sec-regexp.prototype-@@replace" rel="noreferrer">RegExp.prototype[@@replace]</a>, which says:</p>

<pre class="lang-none prettyprint-override"><code>11. Repeat, while done is false
  a. Let result be ? RegExpExec(rx, S).
  b. If result is null, set done to true.
  c. Else result is not null,
    i. Append result to the end of results.
    ii. If global is false, set done to true.
    iii. Else,
      1. Let matchStr be ? ToString(? Get(result, "0")).
      2. If matchStr is the empty String, then
        a. Let thisIndex be ? ToLength(? Get(rx, "lastIndex")).
        b. Let nextIndex be AdvanceStringIndex(S, thisIndex, fullUnicode).
        c. Perform ? Set(rx, "lastIndex", nextIndex, true).
</code></pre>

<p>where <code>rx</code> is <code>/.*/g</code> and <code>S</code> is <code>'asdf'</code>.</p>

<p>See 11.c.iii.2.b:</p>

<blockquote>
  <p>b. Let nextIndex be AdvanceStringIndex(S, thisIndex, fullUnicode).</p>
</blockquote>

<p>Therefore in <code>'asdf'.replace(/.*/g, 'x')</code> it is actually:</p>

<ol>
<li>result (undefined), results = <code>[]</code>, lastIndex = <code>0</code></li>
<li>result = <code>'asdf'</code>, results = <code>[ 'asdf' ]</code>, lastIndex = <code>4</code></li>
<li>result = <code>''</code>, results = <code>[ 'asdf', '' ]</code>, lastIndex = <code>4</code>, <code>AdvanceStringIndex</code>, set lastIndex to <code>5</code></li>
<li>result = <code>null</code>, results = <code>[ 'asdf', '' ]</code>, return</li>
</ol>

<p>Therefore there are 2 matches.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, regex
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I'm trying to display an image selected from the local machine and I need the location of that image for a JavaScript function. But I'm unable to get the location.</p>
<p>To get the image location, I tried using <strong>console.log</strong>, but nothing returns.</p>
<pre><code>console.log(document.getElementById(&quot;uploadPreview&quot;));
</code></pre>
<hr />
<p>Here's the HTML code:</p>
<pre class="lang-html prettyprint-override"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;div align=&quot;center&quot; style=&quot;padding-top: 50px&quot;&gt;
    &lt;img align=&quot;center&quot; id=&quot;uploadPreview&quot; style=&quot;width: 100px; height: 100px;&quot; /&gt;
  &lt;/div&gt;

  &lt;div align=&quot;center&quot; style=&quot;padding-left: 30px&quot;&gt;
    &lt;input id=&quot;uploadImage&quot; type=&quot;file&quot; name=&quot;myPhoto&quot; onchange=&quot;PreviewImage();&quot; /&gt;
  &lt;/div&gt;

  &lt;script type=&quot;text/javascript&quot;&gt;
    function PreviewImage() {
      var oFReader = new FileReader();
      oFReader.readAsDataURL(document.getElementById(&quot;uploadImage&quot;).files[0]);

      oFReader.onload = function (oFREvent) {
        document.getElementById(&quot;uploadPreview&quot;).src = oFREvent.target.result;
        console.log(document.getElementById(&quot;uploadPreview&quot;).src);

      };
    }
  &lt;/script&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Console Output:</p>
<p><a href="https://i.sstatic.net/xCInG.png" rel="noreferrer"><img src="https://i.sstatic.net/xCInG.png" alt="Enter image description here" /></a></p>
<p>Here's the warning:</p>
<blockquote>
<p>DevTools failed to load SourceMap: Could not load content for
chrome-extension://alplpnakfeabeiebipdmaenpmbgknjce/include.preload.js.map:
HTTP error: status code 404, net::ERR_UNKNOWN_URL_SCHEME</p>
</blockquote>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 479<br>
            <strong>Answer:</strong>
            <p><p>That's because Chrome added support for source maps.</p>
<p>Go to the <strong>developer tools</strong> (F12 in the browser), then select the <strong>three dots</strong> in the upper right corner, and go to <strong>Settings</strong>.</p>
<p>Then, look for <strong>Sources</strong>, and disable the options:</p>
<ul>
<li><em>&quot;Enable JavaScript source maps&quot;</em></li>
<li><em>&quot;Enable CSS source maps&quot;</em></li>
</ul>
<p>If you do that, that would get rid of the warnings. It has nothing to do with your code. Check the developer tools in other pages and you will see the same warning.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> html, javascript, debugging, google-chrome-extension
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>Related to <a href="https://stackoverflow.com/questions/476436/is-there-a-null-coalescing-operator-in-javascript">Is there a &quot;null coalescing&quot; operator in JavaScript?</a> - JavaScript now has a <code>??</code> operator which I see in use more frequently. Previously most JavaScript code used <code>||</code>.</p>
<pre class="lang-js prettyprint-override"><code>let userAge = null

// These values will be the same. 
let age1 = userAge || 21
let age2 = userAge ?? 21
</code></pre>
<p>In what circumstances will <code>??</code> and <code>||</code> behave differently?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 850<br>
            <strong>Answer:</strong>
            <p><p>The OR operator <code>||</code> uses the right value if left is <a href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" rel="noreferrer">falsy</a>, while the nullish coalescing operator <code>??</code> uses the right value if left is <code>null</code> or <code>undefined</code>.</p>
<p>These operators are often used to provide a default value if the first one is missing.</p>
<p><strong>But the OR operator <code>||</code> can be problematic if your left value might contain <code>&quot;&quot;</code> or <code>0</code> or <code>false</code> (because these are <a href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" rel="noreferrer">falsy values</a>)</strong>:</p>
<pre class="lang-js prettyprint-override"><code>console.log(12 || &quot;not found&quot;) // 12
console.log(0  || &quot;not found&quot;) // &quot;not found&quot;

console.log(&quot;jane&quot; || &quot;not found&quot;) // &quot;jane&quot;
console.log(&quot;&quot;     || &quot;not found&quot;) // &quot;not found&quot;

console.log(true  || &quot;not found&quot;) // true
console.log(false || &quot;not found&quot;) // &quot;not found&quot;

console.log(undefined || &quot;not found&quot;) // &quot;not found&quot;
console.log(null      || &quot;not found&quot;) // &quot;not found&quot;
</code></pre>
<p>In many cases, you might only want the right value if left is <code>null</code> or <code>undefined</code>. That's what the nullish coalescing operator <code>??</code> is for:</p>
<pre class="lang-js prettyprint-override"><code>console.log(12 ?? &quot;not found&quot;) // 12
console.log(0  ?? &quot;not found&quot;) // 0

console.log(&quot;jane&quot; ?? &quot;not found&quot;) // &quot;jane&quot;
console.log(&quot;&quot;     ?? &quot;not found&quot;) // &quot;&quot;

console.log(true  ?? &quot;not found&quot;) // true
console.log(false ?? &quot;not found&quot;) // false

console.log(undefined ?? &quot;not found&quot;) // &quot;not found&quot;
console.log(null      ?? &quot;not found&quot;) // &quot;not found&quot;
</code></pre>
<p>While the <code>??</code> operator isn't available in <a href="https://nodejs.org/en/about/releases/" rel="noreferrer">current LTS versions of Node</a> (v10 and v12), you can use it with some versions of TypeScript or Node:</p>
<p>The <code>??</code> operator was added to <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#nullish-coalescing" rel="noreferrer">TypeScript 3.7</a> back in November 2019.</p>
<p>And more recently, the <code>??</code> operator was <a href="https://tc39.es/ecma262/2020/" rel="noreferrer">included in ES2020</a>, which is supported by Node 14 (released in April 2020).</p>
<p><strong>When the nullish coalescing operator <code>??</code> is supported, I typically use it instead of the OR operator <code>||</code> (unless there's a good reason not to).</strong></p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, logical-or, nullish-coalescing
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: May-20</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>I recently upgraded my OS to Ubuntu 20.04 LTS.</p>
<p>Now when I try to import a library like Numpy in Python, I get the following error:</p>
<blockquote>
<p>ImportError: libffi.so.6: cannot open shared object file: No such file or directory</p>
</blockquote>
<p>I tried installing the <code>libffi</code> package, but apt can't locate it:</p>
<pre><code>sudo apt-get install libffi
Reading package lists... Done
Building dependency tree       
Reading state information... Done
E: Unable to locate package libffi
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 113<br>
            <strong>Answer:</strong>
            <p><p>It seems like I fixed it. I could be wrong, but here is what I think happened:</p>
<ol>
<li>Ubuntu 20.04 upgraded libffi6 to libffi7</li>
<li>Python is still looking for libffi6</li>
</ol>
<p>What I did to fix it :</p>
<p>Locate <code>libffi.so.7</code> in your system</p>
<pre><code>$ find /usr/lib -name &quot;libffi.so*&quot;
</code></pre>
<p>Create a simlink named <code>libffi.so.6</code> that points to <code>libffi.so.7</code>:</p>
<pre><code>sudo ln -s /usr/path/to/libffi.so.7 /usr/lib/path/to/libffi.so.6
</code></pre>
<p><strong>UPDATE:</strong></p>
<p>As noted by many users, this fix could have unintended consequences. The better way to do it is to reinstall python as @amichaud explained. This should be used as a last resort IF you're not using pyenv/virtualenv/etc in which case removing python will cause a lot of dependencies to be removed as well.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, ubuntu, ubuntu-20.04
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I wanted to set title to my webpage created with vue cli 3 and thus looked into <code>public/index.html</code>. There, I found <code>&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</code>.</p>

<p>How do I set and modify <code>htmlWebpackPlugin.options.title</code> in vue cli 3 project?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 201<br>
            <strong>Answer:</strong>
            <p><p>Looking at the popularity of the question, I decided to add an elaborate answer with references to make it more authentic and complete. I have also created <a href="https://medium.com/@mayank-1513/how-to-set-htmlwebpack-plugin-options-title-in-project-created-with-vue-cli-e686087646df" rel="noreferrer">an article</a> on this topic and covered this topic in <a href="https://www.udemy.com/course/vue-3-essentials/?referralCode=E6D2FDE2B8B06C1991F1" rel="noreferrer">this</a> and <a href="https://www.udemy.com/course/vuejs-complete-course-plus-guide/?couponCode=HAPPY_LEARNING" rel="noreferrer">this</a> courses.</p>
<p>Though the question is looking for setting <code>htmlWebpackPlugin.options.title</code>, the ultimate effect is changing the title of the web-page.</p>
<h1>1. Most convenient and trivial solution</h1>
<p>The simplest way to do this is to modify the <code>public/index.html</code> and hard-code the title.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt;
    &lt;link rel=&quot;icon&quot; href=&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;&gt;
    &lt;title&gt;
        &lt;%= htmlWebpackPlugin.options.title %&gt;
    &lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;noscript&gt;
      &lt;strong&gt;We're sorry but &lt;%= htmlWebpackPlugin.options.title %&gt; doesn't work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt;
    &lt;/noscript&gt;
    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
    &lt;!-- built files will be auto injected --&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<p>This is the default <code>public/index.html</code> that is generated by vue cli. And in this, you just need to change</p>
<pre><code>    &lt;title&gt;
        &lt;%= htmlWebpackPlugin.options.title %&gt;
    &lt;/title&gt;
</code></pre>
<p>to</p>
<pre><code>&lt;title&gt;Title of your choice&lt;/title&gt;
</code></pre>
<h1>2. Change the <code>name</code> field in <code>package.json</code></h1>
<p>Another simple solution is to change the <code>&quot;name&quot;: &quot;your-project-name&quot;</code>. However, there are many restrictions on the <code>name</code> you can use in <code>package.json</code>. You can read more about this <a href="https://docs.npmjs.com/creating-a-package-json-file" rel="noreferrer">here</a>. Basically, <code>package.json</code> must contain a name and that must be lowercase and one word, and may contain hyphens and underscores.</p>
<h1>3. Using <code>pages</code> field in <code>vue.config.js</code></h1>
<p><code>vue.config.js</code> is an optional file that you can add to provide additional configurations to Vue CLI and this file, if present, will be automatically loaded by Vue CLI. You need to create <code>vue.config.js</code> in the root folder - the folder containing you <code>package.json</code> file.</p>
<p>According to <a href="https://cli.vuejs.org/config/#pages" rel="noreferrer">Vue documentation</a>, you can use pages field to define entrypoint for multi-page app. However, you can also use this to define title for single page app as well. Create <code>vue.config.js</code> in the root directory and add <code>pages</code> field to your exports as follows:</p>
<pre><code>module.exports = {
  pages: {
    index: {
      // entry for the page
      entry: 'src/main.js',
      title: 'My Title',
    },
  }
}
</code></pre>
<p>Note that if you are already running development server, this change will be reflected only when you stop and restart the development server. In other words, these changes will not be hot reloaded.</p>
<h1>4. Chaining Webpack</h1>
<p>You can <a href="https://cli.vuejs.org/config/#chainwebpack" rel="noreferrer">chain Webpack</a> in <code>vue.config.js</code> as shown below</p>
<pre><code>module.exports = {
    chainWebpack: config =&gt; {
        config
            .plugin('html')
            .tap(args =&gt; {
                args[0].title = &quot;My Vue App&quot;;
                return args;
            })
    }
}
</code></pre>
<p>Note that similar to solution 3, this change will be reflected only when you stop and restart the development server, in case you are already running development server. In other words, these changes will not be hot reloaded.</p>
<h1>5. Modify title in lifecycle hooks using JavaScript</h1>
<p>The next solution in the list is to use JavaScript to modify the title. You can do this either in <code>mounted</code> lifecycle hook of your root component or if you want different title for different routes, you can do the same for components loaded by each route.</p>
<pre><code>&lt;script&gt;
export default {
  data() {
    return {
      //
    };
  },
  mounted() {
    document.title = 'new title'
  }
}
&lt;/script&gt;
</code></pre>
<h1>6. Use Vue Meta</h1>
<p>Finally you can use <a href="https://vue-meta.nuxtjs.org/" rel="noreferrer">Vue Meta</a> to manage all metadata for your Vue app including title. First you need to add Vue Meta to your project and then use <code>metaInfo</code> field as shown below to configure metadata for your page or route.</p>
<pre><code>{
  metaInfo: {
    meta: [
      { charset: 'utf-8' },
      { name: 'viewport', content: 'width=device-width, initial-scale=1' },
      { title: 'My title'}
    ]
  }
}
</code></pre>
<h1>Conclusion</h1>
<p>The first 4 solutions are static ways of changing your title or in other words you can't change your title at runtime using these ways. Also all of these are not hot reloaded. The last 2 options use JavaScript and can manipulate the title at runtime.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> html, javascript, node.js, typescript, vue.js
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>If you double-click English text in Chrome, the whitespace-delimited word you clicked on is highlighted. This is not surprising. However, the other day I was clicking while reading some text in Japanese and noticed that some words were highlighted at word boundaries, even though Japanese doesn't have spaces. Here's some example text:</p>

<blockquote>
  <p>„Å©„Åì„ÅßÁîü„Çå„Åü„Åã„Å®„Çì„Å®Ë¶ãÂΩì„Åå„Å§„Åã„Å¨„ÄÇ‰Ωï„Åß„ÇÇËñÑÊöó„ÅÑ„Åò„ÇÅ„Åò„ÇÅ„Åó„ÅüÊâÄ„Åß„Éã„É£„Éº„Éã„É£„ÉºÊ≥£„ÅÑ„Å¶„ÅÑ„Åü‰∫ã„Å†„Åë„ÅØË®òÊÜ∂„Åó„Å¶„ÅÑ„Çã„ÄÇ</p>
</blockquote>

<p>For example, if you click on ËñÑÊöó„ÅÑ, Chrome will correctly highlight it as a single word, even though it's not a single character class (this is a mix of kanji and hiragana). Not all the highlights are correct, but they don't seem random. </p>

<p>How does Chrome decide what to highlight here? I tried searching the Chrome source for "japanese word" but only found tests for an <a href="https://source.chromium.org/chromium/chromium/src/+/master:v8/test/intl/segmenter/segment-word-next.js?q=japanese%20word&amp;ss=chromium&amp;originalUrl=https:%2F%2Fcs.chromium.org%2F" rel="noreferrer">experimental module</a> that doesn't seem active in my version of Chrome.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 170<br>
            <strong>Answer:</strong>
            <p><p>So it turns out v8 has a non-standard multi-language word segmenter and it handles Japanese. </p>

<pre class="lang-js prettyprint-override"><code>function tokenizeJA(text) {
  var it = Intl.v8BreakIterator(['ja-JP'], {type:'word'})
  it.adoptText(text)
  var words = []

  var cur = 0, prev = 0

  while (cur &lt; text.length) {
    prev = cur
    cur = it.next()
    words.push(text.substring(prev, cur))
  }

  return words
}

console.log(tokenizeJA('„Å©„Åì„ÅßÁîü„Çå„Åü„Åã„Å®„Çì„Å®Ë¶ãÂΩì„Åå„Å§„Åã„Å¨„ÄÇ‰Ωï„Åß„ÇÇËñÑÊöó„ÅÑ„Åò„ÇÅ„Åò„ÇÅ„Åó„ÅüÊâÄ„Åß„Éã„É£„Éº„Éã„É£„ÉºÊ≥£„ÅÑ„Å¶„ÅÑ„Åü‰∫ã„Å†„Åë„ÅØË®òÊÜ∂„Åó„Å¶„ÅÑ„Çã„ÄÇ'))
// ["„Å©„Åì", "„Åß", "Áîü„Çå", "„Åü„Åã", "„Å®„Çì„Å®", "Ë¶ãÂΩì", "„Åå", "„Å§", "„Åã", "„Å¨", "„ÄÇ", "‰Ωï„Åß„ÇÇ", "ËñÑÊöó„ÅÑ", "„Åò„ÇÅ„Åò„ÇÅ", "„Åó„Åü", "ÊâÄ", "„Åß", "„Éã„É£„Éº„Éã„É£„Éº", "Ê≥£", "„ÅÑ", "„Å¶", "„ÅÑ„Åü‰∫ã", "„Å†„Åë", "„ÅØ", "Ë®òÊÜ∂", "„Åó", "„Å¶", "„ÅÑ„Çã", "„ÄÇ"]
</code></pre>

<p>I also made a <a href="https://jsfiddle.net/97v0yo23/" rel="noreferrer">jsfiddle</a> that shows this. </p>

<p>The quality is not amazing but I'm surprised this is supported at all.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, google-chrome, cjk
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I'm trying to import <code>myArr</code> from <strong>hello.js</strong> into <strong>index.js</strong>. However I get an error of</p>
<pre class="lang-none prettyprint-override"><code>Error [ERR_REQUIRE_ESM]: Must use import to load ES Module
</code></pre>
<p>File <strong>hello.js</strong></p>
<pre><code>export let myArr = ['hello', 'hi', 'hey'];
</code></pre>
<p>File <strong>index.js</strong></p>
<pre><code>import { myArr } from './hello.js';
console.log(myArr);
</code></pre>
<p>Where am I going wrong?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 66<br>
            <strong>Answer:</strong>
            <p><p>I ran your code without any problems. Check for two things:</p>
<ol>
<li>Node.js version &gt;= 14. It only works with the latest version of Node.js.</li>
<li>Make sure your <code>package.json</code> includes a line for <code>&quot;type&quot;: &quot;module&quot;</code>. Without this line, Node.js assumes you want to use <a href="https://en.wikipedia.org/wiki/CommonJS" rel="noreferrer">CommonJS</a> modules rather than ESM.</li>
</ol>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, node.js
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><pre><code>Exception in thread "main" java.lang.NoClassDefFoundError: javax/xml/bind/annotation/XmlSchema
    at com.android.repository.api.SchemaModule$SchemaModuleVersion.&lt;init&gt;(SchemaModule.java:156)
    at com.android.repository.api.SchemaModule.&lt;init&gt;(SchemaModule.java:75)
    at com.android.sdklib.repository.AndroidSdkHandler.&lt;clinit&gt;(AndroidSdkHandler.java:81)
    at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:73)
    at com.android.sdklib.tool.sdkmanager.SdkManagerCli.main(SdkManagerCli.java:48)
Caused by: java.lang.ClassNotFoundException: javax.xml.bind.annotation.XmlSchema
    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)
    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)
    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)
    ... 5 more
</code></pre>

<p>I get this error above when running flutter doctor --android-licenses. Does anyone know why this is happening and how I can fix it? I'm already running it on the flutter console.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 724<br>
            <strong>Answer:</strong>
            <p><p>Installing <strong>Android SDK Command-line tools</strong> from <strong>Android SDK Manager</strong> did the job for me.</p>
<ol>
<li>Open <strong>Tools</strong> &gt; <strong>SDK Manager</strong></li>
<li>From the left choose, <strong>Appearance &amp; Behavior</strong> &gt; <strong>System Settings</strong> &gt; <strong>Android SDK</strong></li>
<li>Select <strong>SDK Tools</strong> from the top menu</li>
<li>Check <strong>Android SDK Command-line tools</strong> and click 'apply'.</li>
</ol>
<p>Alternative to step #1: WINDOWS: <strong>File</strong> &gt; <strong>Settings</strong> (Ctrl+Alt+S) / MAC : <strong>Android Studio</strong> &gt; <strong>Preferences</strong></p>
<p>This fix works for <em>Windows</em>, <em>Linux</em> and <em>Mac OS X</em>.</p>
<hr />
<p><a href="https://i.sstatic.net/sGu63.jpg" rel="noreferrer"><img src="https://i.sstatic.net/sGu63.jpg" alt="enter image description here" /></a></p>
<p>If you are facing a problem in spite of the above steps, you can try upgrading your system to JDK 8. Official documentation of upgrading to JDK 8 is available <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/install/install_overview.html#A1096936" rel="noreferrer">here</a>.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, dart, android-studio, flutter, flutter-doctor
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Jun-20</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>How do I install python3 and python3-pip on an alpine based image (without using a python image)?</p>
<pre><code> $ apk add --update python3.8 python3-pip
 ERROR: unsatisfiable constraints:
   python3-pip (missing):
     required by: world[python3-pip]
   python3.8 (missing):
     required by: world[python3.8]
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 256<br>
            <strong>Answer:</strong>
            <p><p>This is what I use in a Dockerfile for an alpine image:</p>
<pre><code># Install python/pip
ENV PYTHONUNBUFFERED=1
RUN apk add --update --no-cache python3 &amp;&amp; ln -sf python3 /usr/bin/python
RUN python3 -m ensurepip
RUN pip3 install --no-cache --upgrade pip setuptools
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, linux, alpine-linux
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I am creating a page for user to update personal data with React-Hook-Form.
Once paged is loaded, I use <code>useEffect</code> to fetch the user's current personal data and set them into default value of the form.</p>
<p>I put the fetched value into <code>defaultValue</code> of <code>&lt;Controller /&gt;</code>.
However, it is just not showing in the text box.
Here is my code:</p>
<p><div class="snippet" data-lang="js" data-hide="false" data-console="true" data-babel="false">
<div class="snippet-code">
<pre class="snippet-code-js lang-js prettyprint-override"><code>import React, {useState, useEffect, useCallback} from 'react';
import { useForm, Controller } from 'react-hook-form'
import { URL } from '../constants';

const UpdateUserData = props =&gt; {
    const [userData, setUserData] = useState(null);
    const { handleSubmit, control} = useForm({mode: 'onBlur'});

    const fetchUserData = useCallback(async account =&gt; {
        const userData = await fetch(`${URL}/user/${account}`)
                            .then(res=&gt; res.json());
        console.log(userData);
        setUserData(userData);
    }, []);

    useEffect(() =&gt; {
        const account = localStorage.getItem('account');
        fetchUserData(account);
    }, [fetchUserData])

    const onSubmit = async (data) =&gt; {
        // TODO
    }

    return (
        &lt;div&gt;
            &lt;form onSubmit={handleSubmit(onSubmit)}&gt;
                &lt;div&gt;
                    &lt;label&gt;User Name:&lt;/label&gt;
                    &lt;Controller
                        as={&lt;input type='text' /&gt;}
                        control={control}
                        defaultValue={userData ? userData.name : ''}
                        name='name'
                    /&gt;
                &lt;/div&gt;
                
                &lt;div&gt;
                    &lt;label&gt;Phone:&lt;/label&gt;
                    &lt;Controller
                        as={&lt;input type='text' /&gt;}
                        control={control}
                        defaultValue={userData ? userData.phone : ''}
                        name='phone'
                    /&gt;
                &lt;/div&gt;
                &lt;button&gt;Submit&lt;/button&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    );
}

export default UpdateUserData;</code></pre>
</div>
</div>
</p>
<p>The called API is working well and the value is actually set to <code>userData</code> state.</p>
<pre><code>{
  name: &quot;John&quot;,
  phone: &quot;02-98541566&quot;
  ...
}
</code></pre>
<p>I also tried to <code>setUserData</code> with mock data in <code>useEffect()</code>, and it doesn't work either.
Is there any problem in my above code?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 97<br>
            <strong>Answer:</strong>
            <p><p>You can use <strong>setValue</strong> (<a href="https://react-hook-form.com/api/useform/setvalue" rel="noreferrer">https://react-hook-form.com/api/useform/setvalue</a>).</p>
<p>Import it from useForm:</p>
<pre class="lang-js prettyprint-override"><code>const { handleSubmit, control, setValue} = useForm({ mode: 'onBlur' });
</code></pre>
<p>Then call it with the user data after it's received:</p>
<pre class="lang-js prettyprint-override"><code>useEffect(() =&gt; {
    if (userData) {
        setValue([
            { name: userData.name }, 
            { phone: userData.phone }
        ]);
    }
}, [userData]);
</code></pre>
<p>You can remove the default values from the form.</p>
<p>EDIT: See alternative answers below if this does not work.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-hooks, react-hook-form
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I am getting this error <code>SyntaxError: Cannot use import statement outside a module</code> when trying to import from another javascript file. This is the first time I'm trying something like this. The main file is <code>main.js</code> and the module file is <code>mod.js</code>.</p>
<p>main.js:</p>
<pre><code>import * as myModule from &quot;mod&quot;;
myModule.func();
</code></pre>
<p>mod.js:</p>
<pre><code>export function func(){
    console.log(&quot;Hello World&quot;);
}
</code></pre>
<p>How can I fix this? Thanks</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 195<br>
            <strong>Answer:</strong>
            <p><p>In order to use the import syntax (ESModules), you need to add the following to your package.json at the top level:</p>
<pre><code>{
    // ...
    &quot;type&quot;: &quot;module&quot;,
}
</code></pre>
<p>If you are using a version of Node earlier than 13, you additionally need to use the <code>--experimental-modules</code> flag when you run the program:</p>
<pre><code>node --experimental-modules program.js
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, import, export, node.js
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I am getting this warning in react:</p>

<pre><code>index.js:1 Warning: Cannot update a component (`ConnectFunction`) 
while rendering a different component (`Register`). To locate the 
bad setState() call inside `Register` 
</code></pre>

<p>I went to the locations indicated in the stack trace and removed all setstates but the warning still persists. Is it possible this could occur from redux dispatch?</p>

<p>my code:</p>

<p>register.js</p>

<pre><code>class Register extends Component {
  render() {
    if( this.props.registerStatus === SUCCESS) { 
      // Reset register status to allow return to register page
      this.props.dispatch( resetRegisterStatus())  # THIS IS THE LINE THAT CAUSES THE ERROR ACCORDING TO THE STACK TRACE
      return &lt;Redirect push to = {HOME}/&gt;
    }
    return (
      &lt;div style = {{paddingTop: "180px", background: 'radial-gradient(circle, rgba(106,103,103,1) 0%, rgba(36,36,36,1) 100%)', height: "100vh"}}&gt;
        &lt;RegistrationForm/&gt;
      &lt;/div&gt;
    );
  }
}

function mapStateToProps( state ) {
  return {
    registerStatus: state.userReducer.registerStatus
  }
}

export default connect ( mapStateToProps ) ( Register );
</code></pre>

<p>function which triggers the warning in my registerForm component called by register.js</p>

<pre><code>handleSubmit = async () =&gt; {
    if( this.isValidForm() ) { 
      const details = {
        "username": this.state.username,
        "password": this.state.password,
        "email": this.state.email,
        "clearance": this.state.clearance
      }
      await this.props.dispatch( register(details) )
      if( this.props.registerStatus !== SUCCESS &amp;&amp; this.mounted ) {
        this.setState( {errorMsg: this.props.registerError})
        this.handleShowError()
      }
    }
    else {
      if( this.mounted ) {
        this.setState( {errorMsg: "Error - registration credentials are invalid!"} )
        this.handleShowError()
      }
    }
  }
</code></pre>

<p>Stacktrace:</p>

<p><a href="https://i.sstatic.net/6kedd.png" rel="noreferrer"><img src="https://i.sstatic.net/6kedd.png" alt="Stacktrace"></a></p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 24<br>
            <strong>Answer:</strong>
            <p><p>I fixed this issue by removing the dispatch from the register components render method to the componentwillunmount method. This is because I wanted this logic to occur right before redirecting to the login page. In general it's best practice to put all your logic outside the render method so my code was just poorly written before. Hope this helps anyone else in future :)</p>

<p>My refactored register component:</p>

<pre><code>class Register extends Component {

  componentWillUnmount() {
    // Reset register status to allow return to register page
    if ( this.props.registerStatus !== "" ) this.props.dispatch( resetRegisterStatus() )
  }

  render() {
    if( this.props.registerStatus === SUCCESS ) { 
      return &lt;Redirect push to = {LOGIN}/&gt;
    }
    return (
      &lt;div style = {{paddingTop: "180px", background: 'radial-gradient(circle, rgba(106,103,103,1) 0%, rgba(36,36,36,1) 100%)', height: "100vh"}}&gt;
        &lt;RegistrationForm/&gt;
      &lt;/div&gt;
    );
  }
}

</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, redux
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>This seems to be a trivial problem, but it is not very obvious what settings/configurations need to be used to solve this issue.</p>
<p>Here are the Hello World program directory structure and the source code:</p>
<p>Directory Structure:</p>
<pre><code>| -- HelloWorldProgram
     | -- HelloWorld.ts
     | -- index.ts
     | -- package.json
     | -- tsconfig.json
</code></pre>
<p>index.ts:</p>
<pre><code>import {HelloWorld} from &quot;./HelloWorld&quot;;

let world = new HelloWorld();

</code></pre>
<p>HelloWorld.ts:</p>
<pre><code>export class HelloWorld {
    constructor(){
        console.log(&quot;Hello World!&quot;);
    }
}
</code></pre>
<p>package.json:</p>
<pre><code>{
  &quot;type&quot;: &quot;module&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;tsc &amp;&amp; node index.js&quot;
  }
}

</code></pre>
<p>Now, execution of the command  <code>tsc &amp;&amp; node index.js</code> results in the following error:</p>
<pre><code>internal/modules/run_main.js:54
    internalBinding('errors').triggerUncaughtException(
                              ^

Error [ERR_MODULE_NOT_FOUND]: Cannot find module 'HelloWorld' imported from HelloWorld\index.js
Did you mean to import ../HelloWorld.js?
    at finalizeResolution (internal/modules/esm/resolve.js:284:11)
    at moduleResolve (internal/modules/esm/resolve.js:662:10)
    at Loader.defaultResolve [as _resolve] (internal/modules/esm/resolve.js:752:11)
    at Loader.resolve (internal/modules/esm/loader.js:97:40)
    at Loader.getModuleJob (internal/modules/esm/loader.js:242:28)
    at ModuleWrap.&lt;anonymous&gt; (internal/modules/esm/module_job.js:50:40)
    at link (internal/modules/esm/module_job.js:49:36) {
  code: 'ERR_MODULE_NOT_FOUND'
}
</code></pre>
<p>It is obvious that the problem seems to have been originated from the fact that in <code>index.ts</code> Typescript file there is no <code>.js</code> extension in the import statement (<code>import {HelloWorld} from &quot;./HelloWorld&quot;;</code>). Typescript didn't throw any error during compilation. However, during runtime Node (v14.4.0) wants the <code>.js</code> extension.</p>
<p>Hope the context is clear.</p>
<p>Now, how to change the compiler output setting (tsconfig.json or any flags) so that local relative path imports such as <code>import {HelloWorld} from ./Helloworld;</code> will get replaced by <code>import {HelloWorld} from ./Helloworld.js;</code> during Typescript to Javascript compilation in the <code>index.js</code> file?</p>
<p>Note:
<code>It is possible to directly use the .js extension while importing inside typescript file. However, it doesn't help much while working with hundreds of old typescript modules, because then we have to go back and manually add .js extension. Rather than that for us better solution is to batch rename and remove all the .js extension from all the generated .js filenames at last.</code></p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 109<br>
            <strong>Answer:</strong>
            <p><p>The possible work-arounds we have come across are as follows:</p>
<ol>
<li><p>Use <code>.js</code> extension in the import:</p>
<p>For new files, it is possible to simply add <code>&quot;.js&quot;</code> extension in the import statement in TypeScript file while editing.
Example: <code>import {HelloWorld} from &quot;./HelloWorld.js&quot;;</code></p>
</li>
<li><p>Extensionless filename</p>
<p>If working with old projects, rather than going through each and every file and updating the import statements, we found it easier to simply batch rename and remove the <code>&quot;.js&quot;</code> extension from the generated JavaScript via a simple automated script. Please note however that this might require a minor change in the server side code to serve these extension-less <code>&quot;.js&quot;</code> files with the proper MIME type to the clients.</p>
</li>
<li><p>Use regex to batch replace import statements</p>
<p>Another option is to use regular expression to batch find and replace in all files the import statements to add the <code>.js</code> extension. An example: <a href="https://stackoverflow.com/a/73075563/3330840">https://stackoverflow.com/a/73075563/3330840</a> or similar other answers.</p>
</li>
</ol>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, node.js, npm, node-modules, typescript
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Jul-20</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><h3>Background</h3>
<p>I was about to try Python package downloaded from GitHub, and realized that it did not have a <code>setup.py</code>, so I could not install it with</p>
<pre><code>pip install -e &lt;folder&gt;
</code></pre>
<p>Instead, the package had a <strong><code>pyproject.toml</code></strong> file which seems to have very similar entries as the <code>setup.py</code> usually has.</p>
<h3>What I found</h3>
<p>Googling lead me into <a href="https://www.python.org/dev/peps/pep-0518/" rel="noreferrer">PEP-518</a> and it gives some critique to <code>setup.py</code> in <a href="https://www.python.org/dev/peps/pep-0518/#rationale" rel="noreferrer">Rationale</a> section. However, it does not clearly tell that usage of <code>setup.py</code> should be avoided, or that <code>pyproject.toml</code> would as such completely replace <code>setup.py</code>.</p>
<h3>Questions</h3>
<p>Is the <code>pyproject.toml</code> something that is used to replace <code>setup.py</code>? Or should a package come with both, a <code>pyproject.toml</code> and a <code>setup.py</code>?<br />
How would one install a project with <code>pyproject.toml</code> in an editable state?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 147<br>
            <strong>Answer:</strong>
            <p><h3>What is it for?</h3>
<p>Currently there are multiple packaging tools being popular in Python community and while <code>setuptools</code> still seems to be prevalent it's not a de¬†facto standard anymore. This situation creates a number of hassles for both end¬†users and developers:</p>
<ol>
<li>For <code>setuptools</code>-based packages installation from source / build of a distribution can fail if one doesn't have <code>setuptools</code> installed;</li>
<li><code>pip</code> doesn't support the installation of packages based on other packaging tools from source, so these tools had to generate a <code>setup.py</code> file to produce a compatible package. To build a distribution package one has to install the packaging tool first and then use tool-specific commands;</li>
<li>If package author decides to change the packaging tool, workflows must be changed as¬†well to use different tool-specific commands.</li>
</ol>
<p><code>pyproject.toml</code> is a new configuration file introduced by <a href="https://peps.python.org/pep-0517/" rel="noreferrer">PEP¬†517</a> and <a href="https://peps.python.org/pep-0518/" rel="noreferrer">PEP¬†518</a> to solve these problems:</p>
<blockquote>
<p>... think of the (rough) steps required to produce a built artifact for a project:</p>
<ol>
<li>The source checkout of the project.</li>
<li>Installation of the build system.</li>
<li>Execute the build system.</li>
</ol>
<p>This PEP [518] covers step #2. <a href="https://peps.python.org/pep-0517/" rel="noreferrer">PEP¬†517</a> covers step #3 ...</p>
</blockquote>
<p>Any tool can also extend this file with its own section (table) to accept tool-specific options, but it's up to them and not required.</p>
<p><a href="https://peps.python.org/pep-0621/" rel="noreferrer">PEP¬†621</a> suggests using <code>pyproject.toml</code> to specify package core¬†metadata in static, tool-agnostic way. Which backends currently support this is shown in the following table:</p>
<div class="s-table-container">
<table class="s-table">
<thead>
<tr>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#enscons" rel="noreferrer"><code>enscons</code></a></th>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#flit" rel="noreferrer"><code>flit_core</code></a></th>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#hatch" rel="noreferrer"><code>hatchling</code></a></th>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#pdm" rel="noreferrer"><code>pdm-pep517</code></a></th>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#poetry" rel="noreferrer"><code>poetry-core</code></a></th>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#easy-install" rel="noreferrer"><code>setuptools</code></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img src="https://i.sstatic.net/L0WLX.png" alt="Supports" /><br><a href="https://github.com/dholth/enscons/blob/master/CHANGES#:%7E:text=Support%20PEP%20621%20metadata" rel="noreferrer" title="Apr¬†24,¬†2021">0.26.0+</a></td>
<td style="text-align: center;"><img src="https://i.sstatic.net/L0WLX.png" alt="Supports" /><br><a href="https://flit.pypa.io/en/latest/history.html#version-3-3" rel="noreferrer" title="Mar¬†21,¬†2021">3.2+</a></td>
<td style="text-align: center;"><img src="https://i.sstatic.net/L0WLX.png" alt="Supports" /><br><a href="https://github.com/pypa/hatch/commit/eef7d0c#diff-846792860efe35ffaa63db526fa381c4f16f2caaa482ef3a8886e62d3454f5ce" rel="noreferrer" title="Dec¬†29,¬†2021">0.3+</a></td>
<td style="text-align: center;"><img src="https://i.sstatic.net/L0WLX.png" alt="Supports" /><br><a href="https://github.com/pdm-project/pdm-pep517/blob/master/CHANGELOG.md#release-v030-2020-12-21" rel="noreferrer" title="Dec¬†21,¬†2020">0.3.0+</a></td>
<td style="text-align: center;"><img src="https://i.sstatic.net/RfN2j.png" alt="Doesn't support" /><br><a href="https://github.com/python-poetry/poetry/issues/3332" rel="noreferrer">Issue¬†#3332</a></td>
<td style="text-align: center;"><img src="https://i.sstatic.net/L0WLX.png" alt="Supports" /><br><a href="https://setuptools.pypa.io/en/latest/history.html#v61-0-0" rel="noreferrer" title="Mar¬†24,¬†2022">61.0.0+</a></td>
</tr>
</tbody>
</table>
</div><h3>Does it replace <code>setup.py</code>?</h3>
<p>For <code>setuptools</code>-based packages <code>pyproject.toml</code> is not strictly meant to replace <code>setup.py</code>, but rather to ensure its correct execution if it's still needed. For other packaging tools ‚Äì yes, it is:</p>
<blockquote>
<p>Where the <code>build-backend</code> key exists, this takes precedence and the source tree follows the format and conventions of the specified backend (as such no <code>setup.py</code> is needed <strong>unless the backend requires it</strong>). Projects may still wish to include a <code>setup.py</code> for compatibility with tools that do not use this spec.</p>
</blockquote>
<h3>How to install a package in editable mode?</h3>
<p>Originally &quot;editable install&quot; was a <code>setuptools</code>-specific feature and as such it was not supported by PEP¬†517. Later¬†on <a href="https://peps.python.org/pep-0660/" rel="noreferrer">PEP¬†660</a> extended this concept to packages using <code>pyproject.toml</code>.</p>
<p>There are two possible conditions for installing a package in editable mode using <code>pip</code>:</p>
<ul>
<li><strong>Modern:</strong><br />
Both the frontend (<code>pip</code>) and a backend must support PEP¬†660.<br />
<code>pip</code> supports it <a href="https://pip.pypa.io/en/latest/news/#v21-3" rel="noreferrer" title="Oct¬†11,¬†2021">since version¬†21.3</a>;</li>
<li><strong>Legacy:</strong><br />
Packaging tool must provide a <code>setup.py</code> file which supports the <code>develop</code> command.<br />
<a href="https://pip.pypa.io/en/latest/news/#v21-1" rel="noreferrer" title="Apr¬†24,¬†2021">Since version¬†21.1</a> <code>pip</code> can also install packages using only <code>setup.cfg</code> file in editable mode.</li>
</ul>
<p>The following table describes the support of editable installs by various backends:</p>
<div class="s-table-container">
<table class="s-table">
<thead>
<tr>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#enscons" rel="noreferrer"><code>enscons</code></a></th>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#flit" rel="noreferrer"><code>flit_core</code></a></th>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#hatch" rel="noreferrer"><code>hatchling</code></a></th>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#pdm" rel="noreferrer"><code>pdm-pep517</code></a></th>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#poetry" rel="noreferrer"><code>poetry-core</code></a></th>
<th style="text-align: center;"><a href="https://packaging.python.org/en/latest/key_projects/#easy-install" rel="noreferrer"><code>setuptools</code></a></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><img src="https://i.sstatic.net/L0WLX.png" alt="Supports" /><br><a href="https://github.com/dholth/enscons/blob/master/CHANGES#:%7E:text=Update%20editables%20for,660" rel="noreferrer" title="Aug¬†17,¬†2021">0.28.0+</a></td>
<td style="text-align: center;"><img src="https://i.sstatic.net/L0WLX.png" alt="Supports" /><br><a href="https://flit.pypa.io/en/latest/history.html#version-3-4" rel="noreferrer" title="Oct¬†10,¬†2021">3.4+</a></td>
<td style="text-align: center;"><img src="https://i.sstatic.net/L0WLX.png" alt="Supports" /><br><a href="https://github.com/pypa/hatch/commit/eef7d0c#diff-349bd6b94a1514449b8e77147675ad04398507e47265ad1c176b718347208c55R42-R61" rel="noreferrer" title="Dec¬†29,¬†2021">0.3+</a></td>
<td style="text-align: center;"><img src="https://i.sstatic.net/L0WLX.png" alt="Supports" /><br><a href="https://github.com/pdm-project/pdm-pep517/blob/master/CHANGELOG.md#release-v080-2021-06-29" rel="noreferrer" title="Jun¬†29,¬†2021">0.8.0+</a></td>
<td style="text-align: center;"><img src="https://i.sstatic.net/L0WLX.png" alt="Supports" /><br><a href="https://github.com/python-poetry/poetry-core/releases/tag/1.0.8" rel="noreferrer" title="Feb¬†28,¬†2022">1.0.8+</a></td>
<td style="text-align: center;"><img src="https://i.sstatic.net/L0WLX.png" alt="Supports" /><br><a href="https://setuptools.pypa.io/en/latest/history.html#v64-0-0" rel="noreferrer" title="Aug¬†11,¬†2022">64.0.0+</a></td>
</tr>
</tbody>
</table>
</div></p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, packaging, pip, pyproject.toml
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I am trying out <a href="https://python-poetry.org/" rel="noreferrer">Poetry</a> in an existing project. It used pyenv and virtual env originally so I have a <code>requirements.txt</code> file with the project's dependencies.</p>
<p>I want to import the <code>requirements.txt</code> file using <strong>Poetry</strong>, so that I can load the dependencies for the first time. I've looked through poetry's documentation, but I haven't found a way to do this. Is there a way to do it?</p>
<p>I know that I can add all packages manually, but I was hoping for a more automated process, because there are a lot of packages.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 254<br>
            <strong>Answer:</strong>
            <p><p><code>poetry</code> doesn't support this directly. But if you have a handmade list of required packages (at best without any version numbers), that only contain the main dependencies and not the dependencies of a dependency you could do this:</p>
<pre><code>$ cat requirements.txt | xargs poetry add
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, pip, python-poetry
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I am working on developing a python package. I use <code>pip freeze &gt; requirements.txt</code> to add the required package into the requirement.txt file. However, I realized that some of the packages, instead of the package version, have some path in front of them.</p>
<pre><code>numpy==1.19.0
packaging==20.4
pandas @ file:///opt/concourse/worker/volumes/live/38d1301c-8fa9-4d2f-662e-34dddf33b183/volume/pandas_1592841668171/work
pandocfilters==1.4.2
</code></pre>
<p>Whereas, inside the environment, I get:</p>
<pre><code>&gt;&gt;&gt; pandas.__version__
'1.0.5'
</code></pre>
<p>Do you have any idea how to address this problem?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 361<br>
            <strong>Answer:</strong>
            <p><p>It looks like this is an open issue with <code>pip freeze</code> in version <code>20.1</code>, the current workaround is to use:</p>
<pre><code>pip list --format=freeze &gt; requirements.txt
</code></pre>
<p>In a nutshell, this is caused by changing the behavior of <code>pip freeze</code> to include <a href="https://www.python.org/dev/peps/pep-0440/#direct-references" rel="noreferrer">direct references</a> for distributions installed from direct URL references.</p>
<p>You can read more about the issue on GitHub:</p>
<p><a href="https://github.com/pypa/pip/issues/8174" rel="noreferrer">pip freeze does not show version for in-place installs</a></p>
<p><a href="https://github.com/pypa/pip/issues/8176" rel="noreferrer">Output of &quot;pip freeze&quot; and &quot;pip list --format=freeze&quot; differ for packages installed via Direct URLs</a></p>
<p><a href="https://github.com/pypa/pip/pull/7612" rel="noreferrer">Better freeze of distributions installed from direct URL references</a></p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, pip, path, requirements.txt
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I'm trying to run very simple code, but I'm getting an error, I didn't use the create react app!</p>
<p>It looks like my babel.config.js file is being ignored!</p>
<p>This is the structure of my small project:
<a href="https://i.sstatic.net/XovUB.png" rel="noreferrer"><img src="https://i.sstatic.net/XovUB.png" alt="enter image description here" /></a></p>
<p>My html file</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;ReactJS&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
    &lt;script  src = 'bundle.js' &gt;&lt;/script&gt;
&lt;/body&gt; 

&lt;/html&gt;
</code></pre>
<p>My index.js file:</p>
<pre><code>import React from 'react';
import { render } from 'react-dom';

render(&lt;h1&gt;Hello World!!&lt;/h1&gt;, document.getElementById('app')); 
</code></pre>
<p>My package json:</p>
<pre><code>{
  &quot;name&quot;: &quot;front&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;license&quot;: &quot;MIT&quot;,
  &quot;scripts&quot;: {
    &quot;dev&quot;: &quot;webpack-dev-server --mode development&quot;,
    &quot;build&quot;: &quot;webpack-dev-server --mode production&quot;
  },
  &quot;dependencies&quot;: {
    &quot;@babel/cli&quot;: &quot;^7.10.5&quot;,
    &quot;@babel/core&quot;: &quot;^7.10.5&quot;,
    &quot;@babel/plugin-proposal-class-properties&quot;: &quot;^7.10.4&quot;,
    &quot;@babel/preset-env&quot;: &quot;^7.10.4&quot;,
    &quot;@babel/preset-react&quot;: &quot;^7.10.4&quot;,
    &quot;react&quot;: &quot;^16.13.1&quot;,
    &quot;react-dom&quot;: &quot;^16.13.1&quot;,
    &quot;webpack&quot;: &quot;^4.43.0&quot;,
    &quot;webpack-cli&quot;: &quot;^3.3.12&quot;,
    &quot;webpack-dev-server&quot;: &quot;^3.11.0&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;@babel/plugin-transform-runtime&quot;: &quot;^7.9.0&quot;,
    &quot;babel-loader&quot;: &quot;^8.1.0&quot;,
    &quot;webpack-dev-server&quot;: &quot;^3.10.3&quot;
  }
}
</code></pre>
<p>My webpack.config.js</p>
<pre><code>const path = require('path');

module.exports = {
    entry: path.resolve(__dirname, 'src', 'index.js'),
    output: {
        path: path.resolve(__dirname, 'public'),
        filename: 'bundle.js'
    },
    devServer: {
        contentBase: path.resolve(__dirname, 'public'),
    },
    module: {
        rules: [{
            test: /\.js$/,
            exclude: /node_modules/,
            use: {
                loader: 'babel-loader',
            }
        }]
    },
};
</code></pre>
<p>And this is my babel.config.js</p>
<pre><code>module.exports = {
    &quot;presets&quot;: [&quot;@babel/preset-env&quot;, &quot;@babel/preset-react&quot;]

};
</code></pre>
<p>Error when</p>
<pre><code>yarn webpack-dev-server --mode development

ERROR in ./src/index.js
Module build failed (from ./node_modules/babel-loader/lib/index.js):
SyntaxError: /root/treina/front/src/index.js: Support for the experimental syntax 'jsx' isn't currently enabled (4:8):

  2 | import { render } from 'react-dom';
  3 | 
&gt; 4 | render(&lt;h1&gt;Hello World!!&lt;/h1&gt;, document.getElementById('app'));
    |        ^

Add @babel/preset-react (https://git.io/JfeDR) to the 'presets' section of your Babel config to enable transformation.
If you want to leave it as-is, add @babel/plugin-syntax-jsx (https://git.io/vb4yA) to the 'plugins' section to enable parsing.
    at Parser._raise (/root/treina/front/node_modules/@babel/parser/lib/index.js:757:17)
    at Parser.raiseWithData (/root/treina/front/node_modules/@babel/parser/lib/index.js:750:17)
    at Parser.expectOnePlugin (/root/treina/front/node_modules/@babel/parser/lib/index.js:8849:18)
    at Parser.parseExprAtom (/root/treina/front/node_modules/@babel/parser/lib/index.js:10170:22)
    at Parser.parseExprSubscripts (/root/treina/front/node_modules/@babel/parser/lib/index.js:9688:23)
    at Parser.parseMaybeUnary (/root/treina/front/node_modules/@babel/parser/lib/index.js:9668:21)
    at Parser.parseExprOps (/root/treina/front/node_modules/@babel/parser/lib/index.js:9538:23)
    at Parser.parseMaybeConditional (/root/treina/front/node_modules/@babel/parser/lib/index.js:9511:23)
    at Parser.parseMaybeAssign (/root/treina/front/node_modules/@babel/parser/lib/index.js:9466:21)
    at Parser.parseExprListItem (/root/treina/front/node_modules/@babel/parser/lib/index.js:10846:18)
‚Ñπ ÔΩ¢wdmÔΩ£: Failed to compile.
</code></pre>
<p>I'm using yarn and the WSL terminal</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 191<br>
            <strong>Answer:</strong>
            <p><p>Just create a <code>.babelrc</code> file in the root of your project and add:</p>
<pre><code>{
  &quot;presets&quot;: [&quot;@babel/preset-env&quot;, &quot;@babel/preset-react&quot;]
}
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> html, javascript, reactjs, yarnpkg
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>We're currently migrating from Java 8 to Java 11. However, upgrading our services was less painful, than we anticipated. We basically only had to change the version number in our <code>build.gradle</code> file and the services were happily up and running. We upgraded libraries as well as (micro) services that use those libs. No problems until now.</p>
<p>Is there any <em>need</em> to actually switch to modules? This would generate needless costs IMHO. Any suggestion or further reading material is appreciated.</p>
<p>To clarify, are there any consequences if Java 9+ code is used without introducing modules? E.g. can it become incompatible with other code?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 183<br>
            <strong>Answer:</strong>
            <p><p>No.</p>
<p>There is no need to switch to modules.</p>
<p>There has never been a need to switch to modules.</p>
<p>Java 9 and later releases support traditional JAR files on the
traditional class path, via the concept of the unnamed module, and will
likely do so until the heat death of the universe.</p>
<p>Whether to start using modules is entirely up to you.</p>
<p>If you maintain a large legacy project that isn‚Äôt changing very much,
then it‚Äôs probably not worth the effort.</p>
<p>If you work on a large project that‚Äôs grown difficult to maintain over
the years then the clarity and discipline that modularization brings
could be beneficial, but it could also be a lot of work, so think
carefully before you begin.</p>
<p>If you‚Äôre starting a new project then I highly recommend starting with
modules if you can.  Many popular libraries have, by now, been <a href="https://github.com/sormuras/modules" rel="noreferrer">upgraded
to be modules</a>, so there‚Äôs a good
chance that all of the dependencies that you need are already available
in modular form.</p>
<p>If you maintain a library then I strongly recommend that you
upgrade it to be a module if you haven‚Äôt done so already, and if all of
your library‚Äôs dependencies have been converted.</p>
<p>All this isn‚Äôt to say that you won‚Äôt encounter a few stumbling blocks
when moving past Java¬†8.  Those that you do encounter will, however,
likely have nothing to do with modules <em>per se</em>.  The most common
migration problems that we‚Äôve heard about since we released Java¬†9 in
2017 have to do with <a href="https://openjdk.java.net/jeps/322" rel="noreferrer">changes to the syntax of the version
string</a> and to the <a href="https://openjdk.java.net/jeps/260" rel="noreferrer">removal or
encapsulation of internal APIs</a>
(<em>e.g.</em>, <code>sun.misc.Base64Decoder</code>) for which public, supported
replacements have been available for years.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, java-platform-module-system, java-9, java-11
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Aug-20</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>How to create Event Bus in Vue 3?</p>
<hr />
<p>In Vue 2, it was:</p>
<pre class="lang-js prettyprint-override"><code>export const bus = new Vue();
</code></pre>
<pre class="lang-js prettyprint-override"><code>bus.$on(...)
bus.$emit(...)
</code></pre>
<hr />
<p>In Vue 3, <code>Vue</code> is not a constructor anymore, and <code>Vue.createApp({});</code> returns an object that has no <code>$on</code> and <code>$emit</code> methods.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 222<br>
            <strong>Answer:</strong>
            <p><p>As suggested in official <a href="https://v3-migration.vuejs.org/breaking-changes/events-api.html#event-bus" rel="noreferrer">docs</a> you could use <a href="https://github.com/developit/mitt" rel="noreferrer">mitt</a> library to dispatch events between components, let suppose that we have a sidebar and <code>header</code> which contains a button that close/open the sidebar and we need that button to toggle some property inside the sidebar component :</p>
<p>in main.js import that library and create an instance of that emitter  and define as a <a href="https://v3.vuejs.org/api/application-config.html#globalproperties" rel="noreferrer">global property</a>:</p>
<p><strong>Installation :</strong></p>
<pre class="lang-sh prettyprint-override"><code>npm install --save mitt
</code></pre>
<p><strong>Usage :</strong></p>
<pre class="lang-js prettyprint-override"><code>import { createApp } from 'vue'
import App from './App.vue'
import mitt from 'mitt';
const emitter = mitt();
const app = createApp(App);
app.config.globalProperties.emitter = emitter;
app.mount('#app');
</code></pre>
<p>in header emit the <code>toggle-sidebar</code> event with some payload :</p>
<pre class="lang-js prettyprint-override"><code>&lt;template&gt;
  &lt;header&gt;
    &lt;button @click=&quot;toggleSidebar&quot;/&gt;toggle&lt;/button&gt;
  &lt;/header&gt;
&lt;/template&gt;
&lt;script &gt;
export default { 
  data() {
    return {
      sidebarOpen: true
    };
  },
  methods: {
    toggleSidebar() {
      this.sidebarOpen = !this.sidebarOpen;
      this.emitter.emit(&quot;toggle-sidebar&quot;, this.sidebarOpen);
    }
  }
};
&lt;/script&gt;
</code></pre>
<p>In sidebar receive the event with the payload:</p>
<pre class="lang-js prettyprint-override"><code>&lt;template&gt;
  &lt;aside class=&quot;sidebar&quot; :class=&quot;{'sidebar--toggled': !isOpen}&quot;&gt;
  ....
  &lt;/aside&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: &quot;sidebar&quot;,
  data() {
    return {
      isOpen: true
    };
  },
  mounted() { 
    this.emitter.on(&quot;toggle-sidebar&quot;, isOpen =&gt; {
      this.isOpen = isOpen;
    });
  }
};
&lt;/script&gt;
</code></pre>
<p>For those using composition api they could use <code>emitter</code> as follows :</p>
<p>Create a file src/composables/useEmitter.js</p>
<pre class="lang-js prettyprint-override"><code>import { getCurrentInstance } from 'vue'

export default function useEmitter() {
    const internalInstance = getCurrentInstance(); 
    const emitter = internalInstance.appContext.config.globalProperties.emitter;

    return emitter;
}

</code></pre>
<p>And from there on you can use <code>useEmitter</code> just like you would with <code>useRouter</code>:</p>
<pre class="lang-js prettyprint-override"><code>import useEmitter from '@/composables/useEmitter'

export default {
  setup() {
    const emitter = useEmitter()
    ...
  }
  ...
}
</code></pre>
<p><strong>Using the composition API</strong></p>
<p>You could also take benefit from the new composition API and define a composable event bus :</p>
<p><em>eventBus.js</em></p>
<pre class="lang-js prettyprint-override"><code>import { ref } from &quot;vue&quot;;
const bus = ref(new Map());

export default function useEventsBus(){

    function emit(event, ...args) {
        bus.value.set(event, args);
    }

    return {
        emit,
        bus
    }
}
</code></pre>
<p>in component A do:</p>
<pre class="lang-js prettyprint-override"><code>import useEventsBus from './eventBus';
...
//in script setup or inside the setup hook
const {emit}=useEventsBus()
...
 emit('sidebarCollapsed',val)

</code></pre>
<p>in component B :</p>
<pre class="lang-js prettyprint-override"><code>const { bus } = useEventsBus()

watch(()=&gt;bus.value.get('sidebarCollapsed'), (val) =&gt; {
  // destruct the parameters
    const [sidebarCollapsedBus] = val ?? []
    sidebarCollapsed.value = sidebarCollapsedBus
})

</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, vue.js, vue-component, vuejs3, vue-composition-api
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I am working on my first NestJS application, which was working fine with hardcoded database connecting string in <code>app.module.ts</code>.</p>
<p>But then as per our requirements, I had to pick the database config values from environment files. For that, I followed the configuration documentation on the nestjs documentation website - <a href="https://docs.nestjs.com/techniques/configuration" rel="noreferrer">https://docs.nestjs.com/techniques/configuration</a></p>
<p>But the issue is that I need to use the .env variables inside the same file for database connection, which is failing.</p>
<p>Here is my original code that was working fine:</p>
<pre><code>@Module({
  imports: [
    MongooseModule.forRoot(`mongodb+srv://myusername:mypassword@myhost.net?retryWrites=true&amp;w=majority&amp;db=dbname`, { useNewUrlParser: true, dbName: 'dbname' }),
    ProductModule,
    CategoryModule,
  ],
  controllers: [
    AppController,
    HealthCheckController,
  ],
  providers: [AppService, CustomLogger],
})
</code></pre>
<p>Now, I wanted to pick those DB values from .env files which are like <code>local.env</code>, <code>dev.env</code> etc. depending on the environment. Now, my this code is not working:</p>
<pre><code>@Module({
  imports: [
    ConfigModule.forRoot({ envFilePath: `${process.env.NODE_ENV}.env` }),
    MongooseModule.forRoot(`mongodb+srv://${ConfigModule.get('DB_USER')}:${ConfigModule.get('DB_PASS')}@myhost.net?retryWrites=true&amp;w=majority&amp;db=dbname`, { useNewUrlParser: true, dbName: 'dbname' }),
    ProductModule,
    CategoryModule,
  ],
  controllers: [
    AppController,
    HealthCheckController,
  ],
  providers: [AppService, CustomLogger],
})
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 89<br>
            <strong>Answer:</strong>
            <p><p><strong>1. Keeping using ConfigModule</strong></p>
<p>You need to set <code>NODE_ENV</code> in npm scripts so that it can be used to load an env file based on the env.</p>
<pre class="lang-json prettyprint-override"><code>&quot;scripts&quot;: {
  &quot;start:local&quot;: &quot;NODE_ENV=local npm run start&quot;
  &quot;start:dev&quot;: &quot;NODE_ENV=dev npm run start&quot;
}
</code></pre>
<p>Now you can just use the <code>ConfigModule</code>:</p>
<pre><code>@Module({
  imports: [
    ConfigModule.forRoot({ envFilePath: `${process.env.NODE_ENV}.env` }), 
MongooseModule.forRoot(`mongodb+srv://${process.env.DB_USER}:${process.env.DB_PASS}@myhost.net?retryWrites=true&amp;w=majority&amp;db=dbname`, { useNewUrlParser: true, dbName: 'dbname' })
    ...
})
</code></pre>
<p><strong>2. Using <code>dotenv</code></strong></p>
<pre class="lang-bash prettyprint-override"><code>npm install dotenv
</code></pre>
<p>Add some scripts to your <code>package.json</code> to set what env you are in.</p>
<pre class="lang-json prettyprint-override"><code>&quot;scripts&quot;: {
  ...
  &quot;start:local&quot;: &quot;NODE_ENV=local npm run start&quot;
  &quot;start:dev&quot;: &quot;NODE_ENV=dev npm run start&quot;
}
</code></pre>
<p>Import <code>dotenv</code> in <code>main.ts</code> file. Make sure you do it at the top of the file.</p>
<pre class="lang-js prettyprint-override"><code>require('dotenv').config({ path: `../${process.env.NODE_ENV}.env` });
</code></pre>
<p><strong>3. Using <code>env-cmd</code></strong></p>
<p>You can use <code>env-cmd</code> npm package.</p>
<pre class="lang-bash prettyprint-override"><code>npm install env-cmd
</code></pre>
<p>And add some commands for different envs in <code>package.json</code>, for example:</p>
<pre class="lang-json prettyprint-override"><code>&quot;scripts&quot;: {
  ...
  &quot;start:local&quot;: &quot;env-cmd -f local.env npm run start&quot;
  &quot;start:dev&quot;: &quot;env-cmd -f dev.env npm run start&quot;
}
...
</code></pre>
<hr />
<p>Now you can use the env variables, for example:</p>
<pre class="lang-js prettyprint-override"><code>MongooseModule.forRoot(`mongodb+srv://${process.env.DB_USER}:${process.env.DB_PASS}@myhost.net?retryWrites=true&amp;w=majority&amp;db=dbname`, { useNewUrlParser: true, dbName: 'dbname' })
</code></pre>
<p><code>process.env.MONGO_CONNECTION_STRING</code></p>
<p><strong>Update:</strong></p>
<p>To overcome the env set command problem in different platforms, you can install <code>cross-env</code> package.</p>
<pre><code>npm install -D cross-env
</code></pre>
<p>And update the scripts:</p>
<pre class="lang-js prettyprint-override"><code>&quot;scripts&quot;: {
  &quot;start:local&quot;: &quot;cross-env NODE_ENV=local npm run start&quot;
  &quot;start:dev&quot;: &quot;cross-env NODE_ENV=dev npm run start&quot;
}
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, environment-variables, node.js, nestjs, dotenv
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I have cloned a spring boot project from GitLab having multiple branches in IntelliJ. I checkout to the branch in which I want to work. But I am getting &quot;Java file outside of source root&quot; on all the files. Please suggest what I am doing wrong.
I just installed IntelliJ and it's the first project that I am importing.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 152<br>
            <strong>Answer:</strong>
            <p><p>If you do an 'import from git', IntelliJ doesn't import the project structure from maven (or gradle) automatically.</p>
<p>One way to do this afterwards is to right-click on the pom.xml file in the root directory, and select 'Add as maven project'. Then the folders will be marked correctly, and dependent libraries will be imported. There should be no need to mark individual source folders manually.</p>
<p>I prefer to do a git clone outside of IntelliJ, and afterwards open the project in IntelliJ from the local filesystem, then IntelliJ imports the maven project structure automatically.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, intellij-idea, spring-boot
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>I was creating a new virtual environment on Ubuntu 20.04:</p>
<pre><code>$ virtualenv my_env
</code></pre>
<p>But it gave an error:</p>
<pre><code>ModuleNotFoundError: No module named 'virtualenv.seed.embed.via_app_data'
</code></pre>
<hr />
<p>Other info:</p>
<pre><code>$ virtualenv --version
virtualenv 20.0.17 from /usr/lib/python3/dist-packages/virtualenv/__init__.py
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 65<br>
            <strong>Answer:</strong>
            <p><p>Try to create the virtual environment using directly venv module</p>
<pre><code>python3 -m venv my_env
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, virtualenv
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>I'm trying to install python 3.9 in a conda enviroment. I tried creating a new conda env using the following command,</p>
<pre><code>conda create --name myenv python=3.9
</code></pre>
<p>But I got an error saying package not found because python 3.9 is not yet released</p>
<p>So, I manually created a folder in <code>envs</code> folder and tried to list all envs. But I couldn't get the manually created new environment.</p>
<p>So, how do I install python 3.9 in a conda env with all functionalities like <code>pip</code> working?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 119<br>
            <strong>Answer:</strong>
            <p><p>To create python 3.11 conda environment use the following command</p>
<pre><code>conda create -n py311 python=3.11
</code></pre>
<pre><code>py311 - environment name
</code></pre>
<h3>Update 3</h3>
<p>To create python 3.10 conda environment use the following command</p>
<pre><code>conda create -n py310 python=3.10
</code></pre>
<pre><code>py310 - environment name
</code></pre>
<h3>Update 2</h3>
<p>You can now directly create python 3.9 environment using the following command</p>
<pre><code>conda create -n py39 python=3.9
</code></pre>
<pre><code>py39 - environment name
</code></pre>
<h3>Update 1</h3>
<p>Python 3.9 is now available in conda-forge.</p>
<p>To download the tar file - <a href="https://anaconda.org/conda-forge/python/3.9.0/download/linux-64/python-3.9.0-h852b56e_0_cpython.tar.bz2" rel="noreferrer">https://anaconda.org/conda-forge/python/3.9.0/download/linux-64/python-3.9.0-h852b56e_0_cpython.tar.bz2</a></p>
<p>Anaconda Page - <a href="https://anaconda.org/conda-forge/python" rel="noreferrer">https://anaconda.org/conda-forge/python</a></p>
<hr />
<p>As pointed out in the comments, python 3.9 is not yet there on any channels. So, it cannot be install yet via conda.</p>
<p>Instead, you can download the python 3.9 executable and install it.</p>
<p>Once the installation is done, a new executable will be created for python 3.9 and pip 3.9 will be created.</p>
<p>Python:</p>
<pre><code>python3.7          
python3.7-config   
python3.7m         
python3.7m-config  
python3.9          
python3.9-config
</code></pre>
<p>pip</p>
<pre><code>pip      
pip3     
pip3.7   
pip3.8   
pip3.9   
pipreqs
</code></pre>
<p>In order to install ipython for python 3.9,</p>
<pre><code>pip3.9 install ipython
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, conda, python-3.9
        </div>
        
    </div>
    
    <div class="month-section">
        <h2>Month: Sep-20</h2>
        
        <div class="question">
            <strong>Question 1:</strong>
            <p><p>I am getting the following error when running <code>npm run start</code> in the terminal.</p>
<blockquote>
<p>Attempted import error: 'Redirect' is not exported from 'react-router-dom'.</p>
</blockquote>
<p>I have reinstalled <code>node_modules</code>, <code>react-router-dom</code>, <code>react-router</code>. Also restarted the terminal and my computer, but the issue persists.</p>
<p><strong>My code:</strong></p>
<pre><code>import React from 'react';
import { Switch, Redirect } from 'react-router-dom';

import { RouteWithLayout } from './components';
import { Minimal as MinimalLayout } from './layouts';

import {
  Login as LoginView,
  Dashboard as DashboardView,
  NotFound as NotFoundView
} from './views';

const Routes = () =&gt; {
  return (
    &lt;Switch&gt;
      &lt;Redirect
        exact
        from=&quot;/&quot;
        to=&quot;/dashboard&quot;
      /&gt;
      &lt;RouteWithLayout
        component={routeProps =&gt; &lt;LoginView {...routeProps} data={data} /&gt;}
        exact
        layout={MinimalLayout}
        path=&quot;/login&quot;
      /&gt;
      &lt;Redirect to=&quot;/not-found&quot; /&gt;
    &lt;/Switch&gt;
  );
};

export default Routes;
</code></pre>
<p>Here is my <code>package.json</code> imports:</p>
<pre><code>&quot;react-router&quot;: &quot;^6.0.0-beta.0&quot;,
&quot;react-router-dom&quot;: &quot;^6.0.0-beta.0&quot;,
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 420<br>
            <strong>Answer:</strong>
            <p><p>For <code>react-router-dom</code> v6, simply replace <code>Redirect</code> with <code>Navigate</code></p>
<pre><code>import { Navigate } from 'react-router-dom';
.
.
.
{ component: () =&gt; &lt;Navigate to=&quot;/404&quot; /&gt; }
</code></pre>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, reactjs, react-router, react-router-dom
        </div>
        
        <div class="question">
            <strong>Question 2:</strong>
            <p><p>I have used for a long time small subroutines to format axes of charts I'm plotting. A couple of examples:</p>
<pre><code>def format_y_label_thousands(): # format y-axis tick labels formats
    ax = plt.gca()
    label_format = '{:,.0f}'
    ax.set_yticklabels([label_format.format(x) for x in ax.get_yticks().tolist()])

def format_y_label_percent(): # format y-axis tick labels formats
    ax = plt.gca()
    label_format = '{:.1%}'
    ax.set_yticklabels([label_format.format(x) for x in ax.get_yticks().tolist()])
</code></pre>
<p>However, after an update to matplotlib yesterday, I get the following warning when calling any of these two functions:</p>
<pre><code>UserWarning: FixedFormatter should only be used together with FixedLocator
  ax.set_yticklabels([label_format.format(x) for x in ax.get_yticks().tolist()])
</code></pre>
<p>What is the reason for such a warning? I couldn't figure it out looking into matplotlib's documentation.</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 78<br>
            <strong>Answer:</strong>
            <p><p><strong>WORKAROUND:</strong></p>
<p>The way to avoid the warning is to use FixedLocator (that is part of matplotlib.ticker). Below I show a code to plot three charts. I format their axes in different ways. Note that the &quot;set_ticks&quot; silence the warning, but it changes the actual ticks locations/labels (it took me some time to figure out that FixedLocator uses the same info but keeps the ticks locations intact). You can play with the x/y's to see how each solution might affect the output.</p>
<pre><code>import matplotlib as mpl
import matplotlib.pyplot as plt
import numpy as np
import matplotlib.ticker as mticker

mpl.rcParams['font.size'] = 6.5

x = np.array(range(1000, 5000, 500))
y = 37*x

fig, [ax1, ax2, ax3] = plt.subplots(1,3)

ax1.plot(x,y, linewidth=5, color='green')
ax2.plot(x,y, linewidth=5, color='red')
ax3.plot(x,y, linewidth=5, color='blue')

label_format = '{:,.0f}'

# nothing done to ax1 as it is a &quot;control chart.&quot;

# fixing yticks with &quot;set_yticks&quot;
ticks_loc = ax2.get_yticks().tolist()
ax2.set_yticks(ax1.get_yticks().tolist())
ax2.set_yticklabels([label_format.format(x) for x in ticks_loc])

# fixing yticks with matplotlib.ticker &quot;FixedLocator&quot;
ticks_loc = ax3.get_yticks().tolist()
ax3.yaxis.set_major_locator(mticker.FixedLocator(ticks_loc))
ax3.set_yticklabels([label_format.format(x) for x in ticks_loc])

# fixing xticks with FixedLocator but also using MaxNLocator to avoid cramped x-labels
ax3.xaxis.set_major_locator(mticker.MaxNLocator(3))
ticks_loc = ax3.get_xticks().tolist()
ax3.xaxis.set_major_locator(mticker.FixedLocator(ticks_loc))
ax3.set_xticklabels([label_format.format(x) for x in ticks_loc])

fig.tight_layout()
plt.show()
</code></pre>
<p>OUTPUT CHARTS:</p>
<p><a href="https://i.sstatic.net/f9ssR.png" rel="noreferrer"><img src="https://i.sstatic.net/f9ssR.png" alt="Sample charts" /></a></p>
<p>Obviously, having a couple of idle lines of code like the one above (I'm basically getting the yticks or xticks and setting them again) only adds noise to my program. I would prefer that the warning was removed. However, look into some of the &quot;bug reports&quot; (from links on the comments above/below; the issue is not actually a bug: it is an update that is generating some issues), and the contributors that manage matplotlib have their reasons to keep the warning.</p>
<p><strong>OLDER VERSION OF MATPLOTLIB:</strong>
If you use your Console to control critical outputs of your code (as I do), the warning messages might be problematic. Therefore, a way to delay having to deal with the issue is to downgrade matplotlib to version 3.2.2. I use Anaconda to manage my Python packages, and here is the command used to downgrade matplotlib:</p>
<pre><code>conda install matplotlib=3.2.2
</code></pre>
<p>Not all listed versions might be available. For instance, couldn't install matplotlib 3.3.0 although it is listed on matplotlib's releases page: <a href="https://github.com/matplotlib/matplotlib/releases" rel="noreferrer">https://github.com/matplotlib/matplotlib/releases</a></p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, matplotlib
        </div>
        
        <div class="question">
            <strong>Question 3:</strong>
            <p><p>I'm making a little graphic interface with Python 3 which should download a youtube video with its URL.
I used the <code>youtube_dl</code> module for that.
This is my code :</p>
<pre><code>import youtube_dl # Youtube_dl is used for download the video

ydl_opt = {&quot;outtmpl&quot; : &quot;/videos/%(title)s.%(ext)s&quot;, &quot;format&quot;: &quot;bestaudio/best&quot;} # Here we give some advanced settings. outtmpl is used to define the path of the video that we are going to download

def operation(link):
    &quot;&quot;&quot;
    Start the download operation
    &quot;&quot;&quot;
    try:
        with youtube_dl.YoutubeDL(ydl_opt) as yd: # The method YoutubeDL() take one argument which is a dictionary for changing default settings
            video = yd.download([link]) # Start the download
        result.set(&quot;Your video has been downloaded !&quot;)
    except Exception:
        result.set(&quot;Sorry, we got an error.&quot;)

operation(&quot;https://youtube.com/watch?v=...&quot;)

</code></pre>
<p>When I execute my code, I get this error:</p>
<pre><code>ERROR: YouTube said: Unable to extract video data
</code></pre>
<p>I saw <a href="https://github.com/ytdl-org/youtube-dl/blob/d4f53af482cc47b0473a3576da7ad902bea4ac39/youtube_dl/extractor/youtube.py#L1831" rel="noreferrer">here</a> that it was because it doesn't find any video info, how can I resolve this problem?</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 208<br>
            <strong>Answer:</strong>
            <p><p>Updating youtube-dl helped me. Depending on the way you installed it, here are the commands:</p>
<ul>
<li><code>youtube-dl --update</code> (self-update)</li>
<li><code>pip install -U youtube-dl</code> (via python)</li>
<li><code>brew upgrade youtube-dl</code> (macOS + homebrew)</li>
<li><code>choco upgrade youtube-dl</code> (Windows + Chocolatey)</li>
</ul>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> python, youtube, download, python-3.x, youtube-dl
        </div>
        
        <div class="question">
            <strong>Question 4:</strong>
            <p><p>So far I thought that <strong>effectively final</strong> and <strong>final</strong> are more or less equivalent and that the JLS would treat them similar if not identical in the actual behavior. Then I found this contrived scenario:</p>
<pre><code>final int a = 97;
System.out.println(true ? a : 'c'); // outputs a

// versus

int a = 97;
System.out.println(true ? a : 'c'); // outputs 97
</code></pre>
<p>Apparently, the JLS makes an important difference between the two here and I am not sure why.</p>
<p>I read other threads like</p>
<ul>
<li><a href="https://stackoverflow.com/questions/20938095/difference-between-final-and-effectively-final">Difference between final and effectively final</a></li>
<li><a href="https://stackoverflow.com/questions/49683114/effectively-final-variable-vs-final-variable">Effectively final variable vs final variable</a></li>
<li><a href="https://stackoverflow.com/questions/21473568/what-does-a-variable-being-effectively-final-mean">What does a variable being ‚Äúeffectively final‚Äù mean?</a></li>
</ul>
<p>but they do not go into such detail. After all, on a broader level they appear to be pretty much equivalent. But digging deeper, they apparently differ.</p>
<p>What is causing this behavior, can anyone provide some JLS definitions that explain this?</p>
<hr />
<p>Edit: I found another related scenario:</p>
<pre><code>final String a = &quot;a&quot;;
System.out.println(a + &quot;b&quot; == &quot;ab&quot;); // outputs true

// versus

String a = &quot;a&quot;;
System.out.println(a + &quot;b&quot; == &quot;ab&quot;); // outputs false
</code></pre>
<p>So the string interning also behaves differently here (I dont want to use this snippet in real code, just curious about the different behavior).</p>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 65<br>
            <strong>Answer:</strong>
            <p><p>First of all, we are talking about <strong>local variables</strong> only. <em>Effectively final</em> does not apply to fields. This is important, since the semantics for <code>final</code> fields are very distinct and are subject to heavy compiler optimizations and memory model promises, see <a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-17.html#jls-17.5.1" rel="noreferrer">$17.5.1</a> on the semantics of final fields.</p>
<p>On a surface level <code>final</code> and <code>effectively final</code> for local variables are indeed identical. However, the JLS makes a clear distinction between the two which actually has a wide range of effects in special situations like this.</p>
<hr />
<h2>Premise</h2>
<p>From <a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-4.html#jls-4.12.4" rel="noreferrer">JLS¬ß4.12.4</a> about <code>final</code> variables:</p>
<blockquote>
<p>A <strong>constant variable</strong> is a <code>final</code> variable of <strong>primitive type</strong> or type <strong>String</strong> that is initialized with a <strong>constant expression</strong> (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.29" rel="noreferrer">¬ß15.29</a>). Whether a variable is a constant variable or not <strong>may have implications</strong> with respect to class initialization (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-12.html#jls-12.4.1" rel="noreferrer">¬ß12.4.1</a>), binary compatibility (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-13.html#jls-13.1" rel="noreferrer">¬ß13.1</a>), reachability (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-14.html#jls-14.22" rel="noreferrer">¬ß14.22</a>), and definite assignment (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-16.html#jls-16.1.1" rel="noreferrer">¬ß16.1.1</a>).</p>
</blockquote>
<p>Since <code>int</code> is primitive, the variable <code>a</code> is such a <strong>constant variable</strong>.</p>
<p>Further, from the same chapter about <code>effectively final</code>:</p>
<blockquote>
<p>Certain variables that are not declared final are instead considered effectively final: ...</p>
</blockquote>
<p>So from the way this is worded, it is clear that in the other example, <code>a</code> is <strong>not</strong> considered a constant variable, as it is <strong>not final</strong>, but <em>only</em> effectively final.</p>
<hr />
<h2>Behavior</h2>
<p>Now that we have the distinction, lets lookup what is going on and why the output is different.</p>
<p>You are using the conditional operator <code>? :</code> here, so we have to check its definition. From <a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.25" rel="noreferrer">JLS¬ß15.25</a>:</p>
<blockquote>
<p>There are three kinds of conditional expressions, classified according to the second and third operand expressions: <em>boolean conditional expressions</em>, <em>numeric conditional expressions</em>, and <em>reference conditional expressions</em>.</p>
</blockquote>
<p>In this case, we are talking about a <strong>numeric conditional expressions</strong>, from <a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.25.2" rel="noreferrer">JLS¬ß15.25.2</a>:</p>
<blockquote>
<p>The type of a numeric conditional expression is determined as follows:</p>
</blockquote>
<p>And that is the part where the two cases get classified differently.</p>
<h3>effectively final</h3>
<p>The version that is <code>effectively final</code> is matched by this rule:</p>
<blockquote>
<p>Otherwise, general <strong>numeric promotion</strong> (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-5.html#jls-5.6" rel="noreferrer">¬ß5.6</a>) is applied to the second and third operands, and the type of the conditional expression is the promoted type of the second and third operands.</p>
</blockquote>
<p>Which is the same behavior as if you would do <code>5 + 'd'</code>, i.e. <code>int + char</code>, which results in <code>int</code>. See <a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-5.html#jls-5.6" rel="noreferrer">JLS¬ß5.6</a></p>
<blockquote>
<p>Numeric promotion determines the promoted type of all the expressions in a numeric context. The promoted type is chosen such that each expression can be converted to the promoted type, and, in the case of an arithmetic operation, the operation is defined for values of the promoted type. The order of expressions in a numeric context is not significant for numeric promotion. The rules are as follows:</p>
<p>[...]</p>
<p>Next, <strong>widening primitive conversion</strong> (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-5.html#jls-5.1.2" rel="noreferrer">¬ß5.1.2</a>) and <strong>narrowing primitive conversion</strong> (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-5.html#jls-5.1.3" rel="noreferrer">¬ß5.1.3</a>) are applied to some expressions, according to the following rules:</p>
<p>In a numeric choice context, the following rules apply:</p>
<p>If any expression is of type <code>int</code> and is <strong>not a constant expression</strong> (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.29" rel="noreferrer">¬ß15.29</a>), then the promoted type is <code>int</code>, and other expressions that are not of type <code>int</code> undergo <strong>widening primitive conversion</strong> to <code>int</code>.</p>
</blockquote>
<p>So everything is promoted to <code>int</code> as <code>a</code> is an <code>int</code> already. That explains the output of <code>97</code>.</p>
<h3>final</h3>
<p>The version with the <code>final</code> variable is matched by this rule:</p>
<blockquote>
<p>If one of the operands is of type <code>T</code> where <code>T</code> is <code>byte</code>, <code>short</code>, or <code>char</code>, and the other operand is a <strong>constant expression</strong> (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.29" rel="noreferrer">¬ß15.29</a>) of type <code>int</code> whose value is representable in type <code>T</code>, then the type of the conditional expression is <code>T</code>.</p>
</blockquote>
<p>The final variable <code>a</code> is of type <code>int</code> and a constant expression (because it is <code>final</code>). It is representable as <code>char</code>, hence the outcome is of type <code>char</code>. That concludes the output <code>a</code>.</p>
<hr />
<h2>String example</h2>
<p>The example with the string equality is based on the same core difference, <code>final</code> variables are treated as constant expression/variable, and <code>effectively final</code> is not.</p>
<p>In Java, <strong>string interning</strong> is based on constant expressions, hence</p>
<pre><code>&quot;a&quot; + &quot;b&quot; + &quot;c&quot; == &quot;abc&quot;
</code></pre>
<p>is <code>true</code> as well (dont use this construct in real code).</p>
<p>See <a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-3.html#jls-3.10.5" rel="noreferrer">JLS¬ß3.10.5</a>:</p>
<blockquote>
<p>Moreover, a string literal always refers to the same instance of class String. This is because string literals - or, <strong>more generally</strong>, strings that are the <strong>values of constant expressions</strong> (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-15.html#jls-15.29" rel="noreferrer">¬ß15.29</a>) - are <strong>&quot;interned&quot;</strong> so as to share unique instances, using the method <code>String.intern</code> (<a href="https://docs.oracle.com/javase/specs/jls/se14/html/jls-12.html#jls-12.5" rel="noreferrer">¬ß12.5</a>).</p>
</blockquote>
<p>Easy to overlook as it is primarily talking about literals, but it actually applies to constant expressions as well.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> java, final, jls, language-lawyer, effectively-final
        </div>
        
        <div class="question">
            <strong>Question 5:</strong>
            <p><p>This is the new error that is coming in typescript code.</p>
<p>I am not able to realize the logic behind it<br/>
<a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-0.html#operands-for-delete-must-be-optional" rel="noreferrer">Documentation</a></p>
<pre><code>/*When using the delete operator in strictNullChecks, 
the operand must now be any, unknown, never, or be optional 
(in that it contains undefined in the type). Otherwise, use of the delete operator is an error.*/

interface Thing {
  prop: string;
}

function f(x: Thing) {
  delete x.prop; // throws error = The operand of a 'delete' operator must be optional.
}
</code></pre>
</p>
        </div>
        <div class="answer">
            <strong>Answer Score:</strong> 262<br>
            <strong>Answer:</strong>
            <p><blockquote>
<p>I am not able to realize the logic behind it</p>
</blockquote>
<p>The logic as I understand is the following:</p>
<p>Interface <code>Thing</code> is a contract asking to have a (non-null, non-undefined) <code>prop</code> as a <code>string</code>.</p>
<p>If one removes the property, then the contract is not implemented anymore.</p>
<p>If you want it still valid when removed, just declare it as optional with a <code>?</code>: <code>prop?: string</code></p>
<p>I'm actually surprised that this was not causing error in earlier versions of TypeScript.</p>
</p>
        </div>
        <div class="tags">
            <strong>Tags:</strong> javascript, typescript
        </div>
        
    </div>
    
</body>
</html>